(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{303:function(e){e.exports={name:"paths-atlas",version:"1.0.0-rc.1.22",description:"The Archaeological Atlas of Coptic Literature by PAThs, an ERC Advanced funded project",bugs:"https://github.com/paths-erc/atlas/issues",email:"julian.bogdani@uniroma1.it",license:"Creative Commons Attribution 4.0 International License.",author:"Julian Bogdani <julian.bogdani@uniroma1.it> (http://www.lettere.uniroma1.it/users/julian-bogdani)",private:!0,homepage:"/",dependencies:{"@fortawesome/fontawesome-free":"^5.2.0","@fortawesome/fontawesome-svg-core":"^1.2.0-14","@fortawesome/free-brands-svg-icons":"^5.1.0-11","@fortawesome/free-solid-svg-icons":"^5.1.0-11","@fortawesome/react-fontawesome":"^0.1.0-11",axios:"^0.18.0","chart.js":"^2.7.2","gh-pages":"^2.0.1","google-maps":"^3.3.0",leaflet:"^1.3.1","object-hash":"^1.3.0","prop-types":"^15.6.1",qs:"^6.5.2",quirematrix:"^1.1.0",react:"^16.3.2","react-bootstrap-typeahead":"^3.2.3","react-chartjs-2":"^2.7.4","react-copy-to-clipboard":"^5.0.1","react-dom":"^16.3.2","react-fontawesome":"^1.6.1","react-leaflet":"^2.0.1","react-leaflet-google":"^4.0.0","react-leaflet-sidebarv2":"^0.6.0","react-markdown":"^4.0.3","react-nl2br":"^0.4.0","react-router-dom":"^4.3.1","react-scripts":"2.0.5","react-select":"^2.0.0",reactstrap:"^6.0.1"},scripts:{predeploy:"npm run build",deploy:"gh-pages -d build",start:"react-scripts start",build:"react-scripts build",test:"react-scripts test --env=jsdom",eject:"react-scripts eject"},browserslist:[">0.2%","not dead","not ie <= 11","not op_mini all"]}},304:function(e,t,a){e.exports=a.p+"static/media/erc.9fb24811.jpg"},305:function(e,t,a){e.exports=a.p+"static/media/sapienza.8672e003.jpg"},307:function(e,t,a){e.exports=a.p+"static/media/paths-logo.d0a2b412.png"},308:function(e,t,a){e.exports=a.p+"static/media/IntroMd.5a487125.md"},309:function(e,t,a){e.exports=a.p+"static/media/MissionStatementMd.853ccd40.md"},310:function(e,t,a){e.exports=a.p+"static/media/lod.d9b96c9b.md"},311:function(e,t,a){e.exports=a.p+"static/media/Ripple-1.7s-200px.7466db60.svg"},321:function(e,t,a){e.exports=a.p+"static/media/places.bd43ff14.md"},322:function(e,t,a){e.exports=a.p+"static/media/places.1485b780.jpg"},323:function(e,t,a){e.exports=a.p+"static/media/manuscripts.6be40095.md"},324:function(e,t,a){e.exports=a.p+"static/media/manuscripts.ef53f386.jpg"},325:function(e,t,a){e.exports=a.p+"static/media/works.b7c993b7.md"},326:function(e,t,a){e.exports=a.p+"static/media/works.7aa6593a.jpg"},327:function(e,t,a){e.exports=a.p+"static/media/titles.24cbbfac.md"},328:function(e,t,a){e.exports=a.p+"static/media/titles.2b8757e2.jpg"},329:function(e,t,a){e.exports=a.p+"static/media/authors.98ad4682.md"},330:function(e,t,a){e.exports=a.p+"static/media/authors.d6df50d7.jpg"},331:function(e,t,a){e.exports=a.p+"static/media/colophons.96843ce5.md"},332:function(e,t,a){e.exports=a.p+"static/media/colophons.1df56f78.jpg"},333:function(e,t,a){e.exports=a.p+"static/media/collections.63bdac97.md"},334:function(e,t,a){e.exports=a.p+"static/media/collections.7a50aeed.jpg"},340:function(e,t,a){e.exports=a.p+"static/media/Cite.399ad154.md"},344:function(e,t,a){e.exports=a(760)},371:function(e,t,a){},507:function(e,t,a){},758:function(e,t,a){},760:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(21),l=a.n(r),i=a(3),o=a(4),c=a(6),p=a(5),h=a(7),m=a(764),u=a(765),d=a(369),b=a(110),f=a(41),g=a(135),_=a(14),v=a(2),y=a(368),E=a(762),k=a(11),O=a(63),j=a(300),w=a.n(j),C={places:{episcopal_sees:{id:"episcopal_sees",title:"Episcopal sees",url:"places?verb=search&type=encoded",data:{q_encoded:btoa("`episcopalsee`=1")}},has_monasteries:{id:"has_monasteries",title:"Sites with one or many monasteries",url:"places?verb=search&type=encoded",data:{q_encoded:btoa("`hasmonastery` = 1")}},churches:{id:"churches",title:"Churches",url:"places?verb=search&type=encoded",data:{q_encoded:btoa("`typology` = 'church'")}},cemeteries:{id:"cemeteries",title:"Catacombs, cemeteries tombs or necropoleis",url:"places?verb=search&type=encoded",data:{q_encoded:btoa("`typology` = 'catacomb, cemetery, necropolis' OR `typology` = 'tomb'")}},hermitages:{id:"hermitages",title:"Hermitage units (mainly referred to the area of Western Thebes)",url:"places?verb=search&type=encoded",data:{q_encoded:btoa("`typology` = 'hermitage unit(s)'")}},mines:{id:"mines",title:"Mines or quarries",url:"places?verb=search&type=encoded",data:{q_encoded:btoa("`typology` = 'mine, quarry'")}},monasteries:{id:"monasteries",title:"Monasteries",url:"places?verb=search&type=encoded",data:{q_encoded:btoa("`typology` = 'monastery'")}},settlements:{id:"settlements",title:"Settlement",url:"places?verb=search&type=encoded",data:{q_encoded:btoa("`typology` = 'settlement'")}}},titles:{final:{id:"final",title:"Final titles",url:"titles?verb=search&type=encoded",data:{q_encoded:btoa(" `type` = 'final'")}},section_headings:{id:"section_headings",title:"Section headings",url:"titles?verb=search&type=encoded",data:{q_encoded:btoa(" `type` = 'section heading'")}}},authors:{bishops:{id:"bishops",title:"Authors-(arch)bishops",url:"authors?verb=search&type=encoded",data:{q_encoded:btoa(" `title` LIKE '%bishop' ")}}},manuscripts:{ms_has_bindings:{id:"ms_has_bindings",title:"Manuscripts with bookbindings",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`bindings`='1'")}},horizontal_rolls:{id:"horizontal_rolls",title:"Horizontal rolls",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`bookform` = 'horizontal roll'")}},vertical_rolls:{id:"vertical_rolls",title:"Vertical rolls",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`bookform` = 'vertical roll'")}},minor_dialects:{id:"minor_dialects",title:"\u201cMinor\u201d dialects",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`dialect` NOT LIKE '%F;%' AND `dialect` NOT LIKE '%S;%' AND `dialect` NOT LIKE '%B;%' AND `dialect` NOT LIKE '%F' AND `dialect` NOT LIKE '%S' AND `dialect` NOT LIKE '%B'")}},miniature_codices:{id:"miniature_codices",title:"Miniature codices",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`leafw`<101 AND `leafw`>0 AND `bookform` = 'codex'")}},square_codices:{id:"square_codices",title:"Square format codices",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`bookform`='codex' AND `prophw`>.84 AND `prophw`<1.16")}},oblong_codices:{id:"oblong_codices",title:"Oblong format codices",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`bookform`='codex' AND `prophw`>1.84")}},ms_third_c:{id:"ms_third_c",title:"Manuscripts up to the 3rd Century",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`chronofrom` < 301")}},ms_forth_c:{id:"ms_forth_c",title:"Manuscripts of the 4th Century",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`chronofrom` > 299 AND `chronofrom` < 400")}},ms_fifth_c:{id:"ms_fifth_c",title:"Manuscripts of the 5th Century",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`chronofrom` > 399 AND `chronofrom` < 500")}},ms_sixth_c:{id:"ms_sixth_c",title:"Manuscripts of the 6th Century",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`chronofrom` > 499 AND `chronofrom` < 600")}},ms_seventh_c:{id:"ms_seventh_c",title:"Manuscripts of the 7th Century",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`chronofrom` > 599 AND `chronofrom` < 700")}}},works:{early_translations_sahidic:{id:"early_translations_sahidic",title:"Early translations of biblical works into Sahidic (3rd-4th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(" `litperiod` = 'Early original literary production: Shenoute and the Shenoutean milieu (4th-5th cent.)'")}},early_translations_bohairic:{id:"early_translations_bohairic",title:"Early translations of biblical works into Bohairic (4th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(" `litperiod` = 'Early translations of biblical works into Bohairic (4th cent.)'")}},early_translations_other:{id:"early_translations_other",title:"Translations of biblical works into, Akhmimic, Lykopolitan, Oxyrhyrinchite, Fayyumic, etc. (4th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(" `litperiod` = 'Translations of biblical works into, Akhmimic, Lykopolitan, Oxyrhyrinchite, Fayyumic, etc. (4th cent.)'")}},early_translations_apocryphal:{id:"early_translations_apocryphal",title:"Early translations of apocryphal works \u2013 first phase (4th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent(" `litperiod` = 'Early translations of apocryphal works \u2013 first phase (4th cent.)'")))}},translations_gnostic:{id:"translations_gnostic",title:"Translation and (eventual) re-elaboration of a \u201cGnostic\u201d corpus (3rd-4th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Translation and (eventual) re-elaboration of a \u201cGnostic\u201d corpus (3rd-4th cent.)' ")))}},translations_manichaean:{id:"translations_manichaean",title:"Translation and (eventual) re-elaboration of a Manichaean corpus (3th-5th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Translation and (eventual) re-elaboration of a Manichaean corpus (3th-5th cent.)' ")))}},translations_patristic:{id:"translations_patristic",title:"Early translation of patristic works \u2013 first phase (3th-5th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Early translation of patristic works \u2013 first phase (3th-5th cent.)' ")))}},pachomius:{id:"pachomius",title:"Pachomius and the early Pachomian milieu (4th-5th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Pachomius and the early Pachomian milieu (4th-5th cent.)' ")))}},shenoute:{id:"shenoute",title:"Early original literary production: Shenoute and the Shenoutean milieu (4th-5th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Early original literary production: Shenoute and the Shenoutean milieu (4th-5th cent.)' ")))}},standard_translations:{id:"standard_translations",title:"\u201cStandard\u201d translations of biblical works into Sahidic (5th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = '\u201cStandard\u201d translations of biblical works into Sahidic (5th cent.)' ")))}},translations_apocryphal_second:{id:"translations_apocryphal_second",title:"Translations of apocryphal texts \u2013 second phase (4th-5th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Translations of apocryphal texts \u2013 second phase (4th-5th cent.)' ")))}},translations_hagiographical:{id:"translations_hagiographical",title:"Early translations of hagiographical works (4th-6th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Early translations of hagiographical works (4th-6th cent.)' ")))}},classsical_translations_homilies:{id:"classsical_translations_homilies",title:"\u201cClassical\u201d translations - homilies (end of 4th-6th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = '\u201cClassical\u201d translations - homilies (end of 4th-6th cent.)' ")))}},classsical_translations_historiae:{id:"classsical_translations_historiae",title:"\u201cClassical\u201d translations \u2013 historiae monachorum (end of 4th-6th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = '\u201cClassical\u201d translations \u2013 historiae monachorum (end of 4th-6th cent.)' ")))}},classsical_translations_acts:{id:"classsical_translations_acts",title:"\u201cClassical\u201d translations \u2013 acts of councils and Canones (end of 4th-6th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = '\u201cClassical\u201d translations \u2013 acts of councils and Canones (end of 4th-6th cent.)' ")))}},classsical_translations_monastic:{id:"classsical_translations_monastic",title:"\u201cClassical\u201d translations \u2013 monastic works (end of 4th-6th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = '\u201cClassical\u201d translations \u2013 monastic works (end of 4th-6th cent.)' ")))}},post_chalcedonian:{id:"post_chalcedonian",title:"Post-Chalcedonian opposition literature: the \u201cplerophories\u201d and other works (5th-6th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Post-Chalcedonian opposition literature: the \u201cplerophories\u201d and other works (5th-6th cent.)' ")))}},historiographic:{id:"historiographic",title:"Historiographic Production (6th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Historiographic Production (6th cent.)' ")))}},orig_lit_formation:{id:"orig_lit_formation",title:"Original Literature: Formation of the earlier hagiographic cycles (6 cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Original Literature: Formation of the earlier hagiographic cycles (6 cent.)' ")))}},orig_lit_damian_hag:{id:"orig_lit_damian_hag",title:"Original Literature: The period of Damian and his cultural circle (6th-7th cent.): Hagiographies",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Original Literature: The period of Damian and his cultural circle (6th-7th cent.): Hagiographies' ")))}},orig_lit_damian_hom:{id:"orig_lit_damian_hom",title:"Original Literature: The period of Damian and his cultural circle (6th-7th cent.): Homilies",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Original Literature: The period of Damian and his cultural circle (6th-7th cent.): Homilies' ")))}},poetry:{id:"poetry",title:"Poetic production (7th-8th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Poetic production (7th-8th cent.)' ")))}},orig_lit_hom:{id:"orig_lit_hom",title:"Original Literature: Homilies with apocryphal insertions (6th -8th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Original Literature: Homilies with apocryphal insertions (6th -8th cent.)' ")))}},original_lit_early_islamic:{id:"original_lit_early_islamic",title:"Original Literature: Literary production of the early Islamic period (7th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Original Literature: Literary production of the early Islamic period (7th cent.)' ")))}},standard_translations_in_bohairic:{id:"standard_translations_in_bohairic",title:"\u201cStandard\u201d translations of biblical works into Bohairic (7th-8th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = '\u201cStandard\u201d translations of biblical works into Bohairic (7th-8th cent.)' ")))}},original_lit_later_hag:{id:"original_lit_early_islamic",title:"Original Literature: Formation of the later (pseudo-epigraphical) hagiographic cycles and re-arrangement of homiletic production (7th-8th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Original Literature: Formation of the later (pseudo-epigraphical) hagiographic cycles and re-arrangement of homiletic production (7th-8th cent.)' ")))}},synaxarial:{id:"synaxarial",title:"Synaxarial arrangement (9th-10th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Synaxarial arrangement (9th-10th cent.)' ")))}},late_liturgical:{id:"late_liturgical",title:"Late liturgical production (10th-14th cent.)",url:"works?verb=search&type=encoded",data:{q_encoded:btoa(unescape(encodeURIComponent("`litperiod` = 'Late liturgical production (10th-14th cent.)' ")))}}},map:{discovery_places:{id:"discovery_places",title:"Discovery places of Coptic literary manuscripts",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:" JOIN paths__places as p ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = p.id JOIN `paths__m_msplaces` as mp ON `mp`.`table_link`= 'paths__manuscripts' AND `p`.`id` = `mp`.`place` ","fields[paths__geodata.geometry]":"Geometry","fields[p.id]":"Id","fields[p.name]":"Name","fields[p.pleiades]":"Pleiades Id","fields[p.typology]":"Site typology","fields[mp.type]":"Place type","fields[count(mp.id_link)]":"Tot ms",group:"p.id",limit_start:"0",limit_end:"500",q_encoded:btoa(" mp.type = 'discovery' ")}},storage_places:{id:"storage_places",title:"Storage places of Coptic literary manuscripts",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:" JOIN paths__places as p ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = p.id JOIN `paths__m_msplaces` as mp ON `mp`.`table_link`= 'paths__manuscripts' AND `p`.`id` = `mp`.`place` ","fields[paths__geodata.geometry]":"Geometry","fields[p.id]":"Id","fields[p.name]":"Name","fields[p.pleiades]":"Pleiades Id","fields[p.typology]":"Site typology","fields[mp.type]":"Place type","fields[count(mp.id_link)]":"Tot ms",group:"p.id",limit_start:"0",limit_end:"500",q_encoded:btoa(" mp.type = 'storage' ")}},production_places:{id:"production_places",title:"Production places of Coptic literary manuscripts",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:" JOIN paths__places as p ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = p.id JOIN `paths__m_msplaces` as mp ON `mp`.`table_link`= 'paths__manuscripts' AND `p`.`id` = `mp`.`place` ","fields[paths__geodata.geometry]":"Geometry","fields[p.id]":"Id","fields[p.name]":"Name","fields[p.pleiades]":"Pleiades Id","fields[p.typology]":"Site typology","fields[mp.type]":"Place type","fields[count(mp.id_link)]":"Tot ms",group:"p.id",limit_start:"0",limit_end:"500",q_encoded:btoa(" mp.type = 'production' ")}},all_ms_places:{id:"all_ms_places",title:"All places connected to manuscripts",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:" JOIN paths__places as p ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = p.id JOIN  (SELECT * FROM `paths__m_msplaces` GROUP BY `id_link`, `place`) as mp ON `mp`.`table_link`= 'paths__manuscripts' AND `p`.`id` = `mp`.`place` ","fields[paths__geodata.geometry]":"Geometry","fields[p.id]":"Id","fields[p.name]":"Name","fields[p.pleiades]":"Pleiades Id","fields[p.typology]":"Site typology","fields[mp.type]":"Place type","fields[count(mp.id_link)]":"Tot ms",group:"p.id",limit_start:"0",limit_end:"500",q_encoded:btoa(" 1 ")}},bishoprics:{id:"bishoprics",title:"Bishoprics",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:"JOIN paths__places ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = paths__places.id","fields[paths__geodata.geometry]":"Geometry","fields[paths__places.id]":"Id","fields[paths__places.name]":"Name","fields[paths__places.pleiades]":"Pleiades Id","fields[paths__places.typology]":"Site typology",q_encoded:btoa("`paths__places`.`episcopalsee`=1 LIMIT 0, 100")}}}},N="https://db-dev.bradypus.net/api/paths/";"localhost"===window.location.hostname&&(N="http://db.localhost/api/paths/");var x=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"getData",value:function(e,t,a){e=N+e,w()({method:"post",url:e,params:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){a(e.data)}).catch(function(e){e instanceof Error?console.log(e.message):console.log(e.data)})}},{key:"getBaseUrl",value:function(){return N}},{key:"getUniqueVal",value:function(e,t,a,n){this.getData("../v2/paths/"+e,{verb:"getUniqueVal",tb:e.replace("paths__",""),fld:t,s:a},function(e){n(e)},!0)}},{key:"getSaved",value:function(e,t,a,n){"undefined"!==typeof C[e][t]?(C[e][t].data.page=a,this.getData(C[e][t].url,C[e][t].data,function(a){n(a,C[e][t].title)})):n({status:"error",text:"No saved query found for id: ".concat(e,".").concat(t)})}},{key:"getSimple",value:function(e,t,a,n,s,r){var l={verb:"search",type:"advanced",page:s,"adv[a0][fld]":t,"adv[a0][operator]":n?"=":"LIKE","adv[a0][value]":a};this.getData(e,l,function(e){r(e)},!0)}},{key:"getAdv",value:function(e,t,a,n){var s={verb:"search",type:"advanced",page:a};Object.entries(t).forEach(function(e){var t=Object(O.a)(e,2),a=t[0],n=t[1];s["adv[".concat(a,"][fld]")]=n.f,s["adv[".concat(a,"][value]")]=n.v,s["adv[".concat(a,"][operator]")]=n.o,s["adv[".concat(a,"][connector]")]=n.c}),this.getData(e,s,function(e){n(e)},!0)}},{key:"getStr",value:function(e,t,a,n){this.getData(e,{verb:"search",type:"fast",string:t,page:a},function(e){n(e,"Search ["+t+"] in "+e.head.table_label)},!0)}},{key:"getByEncodedSql",value:function(e,t,a,n){this.getData(e,{verb:"search",type:"encoded",q_encoded:t,page:a},function(e){n(e)},!0)}},{key:"getAll",value:function(e,t,a){this.getData(e,{verb:"search",type:"all",page:t},function(e){a(e)})}},{key:"getOne",value:function(e,t,a){this.getData("../v2/paths",{tb:e,verb:"read",id:t},function(e){a(e)})}},{key:"inspect",value:function(e,t){this.getData("../v2/paths",{tb:e,verb:"inspect"},function(e){t(e)})}},{key:"getChart",value:function(e,t){this.getData("../v2/paths/"+e,{id:e,verb:"getChart"},function(e){t(e)})}},{key:"simplifyGeojson",value:function(e){var t={type:"FeatureCollection",features:[]},a=!1;return Object.entries(e.features).forEach(function(e){var n=Object(O.a)(e,2),s=(n[0],n[1]);a&&a===s.properties.id||(t.features.push(s),a=s.properties.id),a===s.properties.id&&(t.features[t.features.length-1].properties.toponym+="|"+s.properties.toponym)}),t}},{key:"getPlaces",value:function(e,t){var a={join:"JOIN paths__geodata as g ON g.table_link = 'paths__places' AND g.id_link = paths__places.id  JOIN paths__m_toponyms as t ON t.table_link = 'paths__places' AND t.id_link = paths__places.id","fields[g.geometry]":"Geometry","fields[paths__places.id]":"Id","fields[paths__places.name]":"Name","fields[paths__places.pleiades]":"Pleiades Id","fields[paths__places.typology]":"Site typology","fields[GROUP_CONCAT(t.toponym)]":"Toponyms",group:"paths__places.id",limit_start:"0",limit_end:"500",q_encoded:btoa(e?e.replace(/`(.*)`/gi,"`paths__places`.`$1`"):" 1")};this.getData("places?verb=search&geojson=true&type=encoded",a,function(e){t(e)})}},{key:"getMsPlaces",value:function(e,t){var a={join:" JOIN paths__places ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = paths__places.id JOIN `paths__m_msplaces` ON `paths__m_msplaces`.`table_link`= 'paths__manuscripts' AND `paths__places`.`id` = `paths__m_msplaces`.`place` ","fields[paths__geodata.geometry]":"Geometry","fields[paths__places.id]":"Id","fields[paths__places.name]":"Name","fields[paths__places.pleiades]":"Pleiades Id","fields[paths__places.typology]":"Site typology","fields[paths__m_msplaces.type]":"Place type",group:"paths__places.id",limit_start:"0",limit_end:"500",q_encoded:btoa(" `paths__m_msplaces`.`id_link` IN (SELECT `id` FROM `paths__manuscripts` WHERE "+e+" )")};this.getData("geodata?verb=search&geojson=true&type=encoded",a,function(e){t(e)})}}]),e}(),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).toggle=a.toggle.bind(Object(_.a)(Object(_.a)(a))),a.state={isOpen:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(v.D,{color:"dark",dark:!0,expand:"md",className:"fixed-top"},s.a.createElement(v.E,{to:"/",tag:y.a},"PAThs"),s.a.createElement(v.F,{onClick:this.toggle}),s.a.createElement(v.k,{isOpen:this.state.isOpen,navbar:!0},s.a.createElement(v.A,{navbar:!0},s.a.createElement(v.B,null,s.a.createElement(v.C,{style:{backgroundColor:"#cc545a",color:"#fff"},to:"/map",tag:E.a},s.a.createElement(k.a,{icon:"map"})," Atlas")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/places",tag:E.a},"Places")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/manuscripts",tag:E.a},"Manuscripts")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/works",tag:E.a},"Works")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/authors",tag:E.a},"Authors")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/titles",tag:E.a},"Titles")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/colophons",tag:E.a},"Colophons")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/collections",tag:E.a},"Collections")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/cite",tag:E.a},"How to cite \u201cPAThs\u201d"))),s.a.createElement(v.A,{className:"ml-auto",navbar:!0},s.a.createElement(v.L,{nav:!0,inNavbar:!0},s.a.createElement(v.n,{nav:!0,caret:!0},s.a.createElement(k.a,{icon:"plus-circle"})," Get more"),s.a.createElement(v.m,{right:!0},s.a.createElement(v.l,{to:"/charts",tag:E.a},s.a.createElement(k.a,{icon:"chart-bar"})," Charts"),s.a.createElement(v.l,{target:"_blank",href:x.getBaseUrl()+"places?verb=pelagios-void"},s.a.createElement(k.a,{icon:"share-alt"})," LOD: Pelagios VoID"),s.a.createElement(v.l,{target:"_blank",href:x.getBaseUrl()+"places?verb=search&type=encoded&q_encoded=MSBMSU1JVCAwLCA1MDA=&fullRecords=true&format=turtle"},s.a.createElement(k.a,{icon:"share-alt"})," LOD: Places")))))))}}]),t}(n.Component),I=a(303),D=a(304),q=a.n(D),P=a(305),A=a.n(P),R=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("footer",{className:"mt-5 bg-dark text-white p-3"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("p",null,"Tracking Papyrus and Parchment Paths",s.a.createElement("br",null),s.a.createElement("span",{className:"lead",style:{color:"#ffab00"}},"An Archaeological Atlas of Coptic Literature"),s.a.createElement("br",null),s.a.createElement("small",null,"Literary Texts in their Geographical Context:",s.a.createElement("br",null),"Production, Copying, Usage, Dissemination and Preservation"))),s.a.createElement("div",{className:"col text-right"},s.a.createElement("p",null,"An ",s.a.createElement("a",{href:"https://erc.europa.eu/",target:"_blank",rel:"noopener noreferrer",title:"European Research Council"},"ERC")," funded project hosted at the ",s.a.createElement("a",{href:"https://www.uniroma1.it",target:"_blank",rel:"noopener noreferrer",title:"Sapienza University of Rome"},"Sapienza University of Rome")),s.a.createElement("p",null,"Principal Investigator ",s.a.createElement("a",{href:"http://www.lettere.uniroma1.it/users/paola-buzi",title:"Paola Buzi",target:"_blank",rel:"noopener noreferrer"},"Paola Buzi")," [",s.a.createElement("a",{href:"mailto:paola.buzi@uniroma1.it",title:"Email to Paola Buzi"},"paola.buzi(at)uniroma1.it"),"]"),s.a.createElement("p",null,s.a.createElement("a",{href:"http://paths.uniroma1.it/",target:"_blank",rel:"noopener noreferrer",title:"PAThs\u2019 web site"},"paths.uniroma1.it")))),s.a.createElement(v.J,{className:"my-3"},s.a.createElement(v.j,{xs:{size:6},md:{size:3,offset:3}},s.a.createElement("img",{src:A.a,alt:"Sapienza Universit\xe0 di Roma",className:"img-fluid"})),s.a.createElement(v.j,{xs:{size:6},md:{size:3}},s.a.createElement("img",{src:q.a,alt:"European Research Council",className:"img-fluid"}))),s.a.createElement("div",{className:"text-center"},s.a.createElement("p",{className:""},"Copyright \xa9 PAThs team, Sapienza Universit\xe0 di Roma.",s.a.createElement("br",null),s.a.createElement("small",null,s.a.createElement("a",{rel:"license",href:"http://creativecommons.org/licenses/by-nc-sa/4.0/"},"Use, sharing and remixing permitted under terms of the",s.a.createElement("br",null),"Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License",s.a.createElement("br",null),s.a.createElement("img",{alt:"Creative Commons License",style:{borderWidth:0},src:"https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"})))),s.a.createElement("p",null,"Version ",I.version))))}}]),t}(n.Component),L=(a(371),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(S,{location:this.props.location}),s.a.createElement("main",{role:"main",className:"maxHeight"},this.props.children),s.a.createElement(R,null))}}]),t}(s.a.Component)),T=a(306),U=a.n(T),M=a(307),F=a.n(M),B=a(308),z=a.n(B),H=a(309),J=a.n(H),G=a(310),V=a.n(G),W=a(311),Q=a.n(W),K=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e={width:this.props.width?this.props.width:"100px"};return s.a.createElement("span",null,s.a.createElement("img",{src:Q.a,style:e,alt:"Loading..."}),""!==this.props.children?this.props.children:s.a.createElement("span",null,"Loading..."))}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={modal:!0},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"render",value:function(){return s.a.createElement(v.w,{isOpen:this.state.modal,toggle:this.toggle.bind(this),className:this.props.className},s.a.createElement(v.z,null,"Disclaimer"),s.a.createElement(v.x,null,s.a.createElement("p",null,"The Archaeological Atlas of Coptic Literature is still in progress, therefore many features might not be yet available or work as expected. Our datasets are growing on a daily basis, and will continue to grow in the next years."),s.a.createElement("p",null,"Please, feel free to report any malfunction, breakdown, omission, error you might encounter during your work session, by writing to ",s.a.createElement("a",{href:"mailto:paola.buzi@uniroma1.it"},"paola.buzi@uniroma1.it"),"."),s.a.createElement("p",null,s.a.createElement("strong",null,"The Atlas is meant to become a tool useful for the whole scholarly community, and its completeness and correctness also depends on the contribution of users."))),s.a.createElement(v.y,null,s.a.createElement(v.c,{color:"success",block:!0,onClick:this.toggle.bind(this)},"I do understand")))}}]),t}(s.a.Component),$=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={text:{},titles:[{id:"intro",title:"Introduction",path:z.a},{id:"missionstatement",title:"Mission Statement",path:J.a},{id:"lod",title:"Linked Open Data",path:V.a}]},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.state.titles.map(function(t){return fetch(t.path).then(function(e){return e.text()}).then(function(a){var n=e.state.text;n[t.id]=a,e.setState({text:n})}),!0})}},{key:"showContentAndToc",value:function(){var e=this;return this.state.text==={}?s.a.createElement(K,null):s.a.createElement("div",null,s.a.createElement("div",{className:"border p-3 d-inline-block bg-light float-right ml-5 mb-5 shadow"},s.a.createElement("h4",null,"Table of contents"),s.a.createElement("ul",{className:"p-0 m-0"},this.state.titles.map(function(e,t){return s.a.createElement("li",{key:t,style:{listStyle:"none"}},s.a.createElement("a",{href:"#"+e.id},e.title))}))),this.state.titles.map(function(t,a){return s.a.createElement("div",{key:a,className:"text-justify"},s.a.createElement("h1",{id:t.id,className:"mt-5"},t.title),s.a.createElement(U.a,{source:e.state.text[t.id],escapeHtml:!1}))}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Z,null),s.a.createElement("div",{className:"jumbotron"},s.a.createElement("div",{className:"container text-center"},s.a.createElement("img",{className:"img-fluid shadow-lg",src:F.a,alt:"Tracking Papyrus and Parchment Paths. An Archaeological Atlas of Coptic Literature. Literary Texts in their Geographical Context: Production, Copying, Usage, Dissemination and Preservation"}))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"my-5 px-5"},this.showContentAndToc())))}}]),t}(s.a.Component),Y=a(94),X=a(200),ee=a(202),te=a(199),ae=a(19),ne=a.n(ae),se=a(312),re=a.n(se),le=a(113),ie=a(12),oe=a.n(ie),ce=a(205),pe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.places&&this.props.places.features?s.a.createElement("div",{className:"mt-3"},s.a.createElement("h5",null,"Found ",this.props.places.features.length," places"),s.a.createElement("ol",null,this.props.places.features.map(function(e,t){return s.a.createElement("li",{key:t,className:"border-bottom border-info mb-3 pb-1"},s.a.createElement("strong",null,e.properties.name),s.a.createElement("br",null),s.a.createElement("small",null,s.a.createElement("span",{className:"coptic"},e.properties.copticname)),["greekname","egyptianname"].map(function(t,a){return e[t]?s.a.createElement("div",{key:a},s.a.createElement("small",null,e.properties[t])):null}),e.properties["count(mp.id_link)"]?s.a.createElement("div",{className:"text-right"},s.a.createElement(v.b,{color:"secondary"},e.properties["count(mp.id_link)"]," manuscripts related")):null,s.a.createElement("div",null,s.a.createElement("small",null,s.a.createElement(k.a,{icon:"id-badge"})," ",s.a.createElement(y.a,{to:"/places/"+e.properties.id},"paths.places.",e.properties.id))))}))):null}}]),t}(n.Component),he=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.urlFilter?s.a.createElement("div",null,s.a.createElement(y.a,{to:"/map",className:"btn btn-warning btn-block mt-1 mb-3"},s.a.createElement(k.a,{icon:"filter"})," Filter active. Click to disable")):null}}]),t}(n.Component),me=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h5",null,"Marker symbols"),s.a.createElement("ul",{style:{listStyle:"none",margin:0,padding:0}},s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("span",{className:"legend-item rounded-circle",style:{background:"rgba(255, 0, 0, .9)"}}),"Discovery"),s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("span",{className:"legend-item rounded-circle",style:{background:"rgba(0, 0, 255, .9)"}}),"Production"),s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("span",{className:"legend-item rounded-circle",style:{background:"rgba(0, 255, 0, .9)"}}),"Storage")),s.a.createElement("hr",null),s.a.createElement("h5",null,"Basemaps"),s.a.createElement("ul",{style:{listStyle:"none",margin:0,padding:0}},s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("a",{href:"http://pelagios.org/maps/greco-roman/",target:"_blank",rel:"noopener noreferrer"},"Imperium, Pelagios")),s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("a",{href:"http://dare.ht.lu.se/",target:"_blank",rel:"noopener noreferrer"},"Imperium, Digital Atlas of Ancient World (DARE)")),s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("a",{href:"http://awmc.unc.edu/wordpress/",target:"_blank",rel:"noopener noreferrer"},"Ancient World Mapping Center")),s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("a",{href:"https://www.openstreetmap.org",target:"_blank",rel:"noopener noreferrer"},"Open Street Map"))))}}]),t}(n.Component),ue=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("ul",{style:{listStyle:"none",margin:0,padding:0}},Object.values(C.map).map(function(e,t){return s.a.createElement("li",{key:t,className:"mb-3"},s.a.createElement(y.a,{to:"/map/saved/"+e.id},s.a.createElement(k.a,{icon:"arrow-circle-right"})," ",e.title))}))}}]),t}(n.Component),de=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.show?s.a.createElement(v.r,{addonType:"append"},s.a.createElement(v.c,{color:"danger",onClick:this.props.onClick},s.a.createElement("span",{"aria-hidden":"true"},"\xd7"))):null}}]),t}(n.Component),be=(a(507),Y.b.BaseLayer),fe="AIzaSyCLRylxZwGnCbbDE7pH-oUURTZHOre7h5o",ge=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={places:null,shownPlaces:null,urlFilter:!1,sidebarCollapsed:!1,selected:"home",manualFilter:""},a.placesLayerRef=s.a.createRef(),a.mapRef=s.a.createRef(),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"onSidebarClose",value:function(){this.setState({sidebarCollapsed:!0})}},{key:"onSidebarOpen",value:function(e){this.setState({sidebarCollapsed:!1,selected:e})}},{key:"pointToLayer",value:function(e,t){return new oe.a.CircleMarker(t,{radius:5,weight:1,color:"#000",opacity:.9,fillColor:"discovery"===e.properties.type?"#ff0000":"storage"===e.properties.type?"#00ff00":"#0000ff",fillOpacity:.5})}},{key:"onEachFeature",value:function(e,t){var a=window.location.pathname.replace(/\/map(.*)/,"");t.bindPopup("<strong>"+e.properties.name+"</strong>"+(e.properties.copticname?'<br><span class="coptic">'+e.properties.copticname+"</span>":"")+'<br><a href="'+a+"/places/"+e.properties.id+'">paths/places/'+e.properties.id+"</a>"),t.on("mouseover",function(){t.openPopup()})}},{key:"filterPlaces",value:function(e){var t=e.target.value,a={};if(""===t)a=this.state.places;else{a={type:"FeatureCollection",features:[]};for(var n=Object.values(this.state.places.features),s=0;s<n.length;s++){var r=n[s];Object.values(r.properties).join("|").toLowerCase().includes(t.toLowerCase())&&a.features.push(r)}}this.setState({manualFilter:t,shownPlaces:a}),this.fitMapToBounds()}},{key:"clearFiltered",value:function(){this.setState({manualFilter:"",shownPlaces:this.state.places}),this.fitMapToBounds()}},{key:"fitMapToBounds",value:function(){var e=[[19.700194,16.570227],[35.4737,32.869317]];this.placesLayerRef&&this.placesLayerRef.current.props.data.features.length>1&&(e=this.placesLayerRef.current.leafletElement.getBounds())._northEast.lat===e._southWest.lat&&e._northEast.lng===e._southWest.lng&&e.pad(),this.mapRef.current.leafletElement.fitBounds(e)}},{key:"fetchData",value:function(e,t){var a=this;if(e)x.getSaved("map",e,null,function(e){a.setState({places:e,shownPlaces:e,urlFilter:!0}),a.fitMapToBounds()});else if(t){var n=ne.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});if("manuscripts"===n.tb)x.getMsPlaces(n.where,function(e){a.setState({places:e,shownPlaces:e,urlFilter:n.where}),a.fitMapToBounds()});else{if("places"!==n.tb)return!1;n.where.includes("LIMIT")||(n.where+=" LIMIT 0, 2000"),x.getPlaces(n.where,function(e){a.setState({places:e,shownPlaces:e,urlFilter:n.where}),a.fitMapToBounds()})}}else x.getPlaces(null,function(e){a.setState({places:e,shownPlaces:e}),a.fitMapToBounds()})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e!==this.props&&(this.setState({places:null,urlFilter:null}),this.fetchData(e.match.params.data,null))}},{key:"componentDidMount",value:function(){this.fetchData(this.props.match.params.data,this.props.location.search)}},{key:"showGeoJson",value:function(){if(!this.state.shownPlaces)return s.a.createElement("div",{style:{textAlign:"center",zIndex:999,marginTop:"5rem"}},s.a.createElement(K,null,"Loading map data..."))}},{key:"render",value:function(){return s.a.createElement("div",{className:"maxHeight"},s.a.createElement(S,{location:this.props.location}),s.a.createElement("main",{role:"main",className:"maxHeight"},s.a.createElement(le.Sidebar,{id:"sidebar",collapsed:this.state.sidebarCollapsed,selected:this.state.selected,onOpen:this.onSidebarOpen.bind(this),onClose:this.onSidebarClose.bind(this),closeIcon:s.a.createElement(k.a,{icon:"caret-left"})},s.a.createElement(le.Tab,{id:"home",header:"Home",icon:s.a.createElement(k.a,{icon:"home"})},s.a.createElement("div",{className:"sidebarSearch"},s.a.createElement(v.q,{className:"my-2"},s.a.createElement(v.r,{addonType:"prepend"},"Search:"),s.a.createElement(v.p,{type:"search",value:this.state.manualFilter,onChange:this.filterPlaces.bind(this),placeholder:"start typing to filter places..."}),s.a.createElement(de,{show:this.state.manualFilter,onClick:this.clearFiltered.bind(this)}))),s.a.createElement("div",{className:"mt-2"},s.a.createElement(he,{urlFilter:this.state.urlFilter,filter:this.state.filter}),s.a.createElement(pe,{places:this.state.shownPlaces}))),s.a.createElement(le.Tab,{id:"savedQueries",header:"Saved queries",icon:s.a.createElement(k.a,{icon:"save"})},s.a.createElement("div",{className:"mt-5"},s.a.createElement(ue,null))),s.a.createElement(le.Tab,{id:"legend",header:"Legend",icon:s.a.createElement(k.a,{icon:"info"}),anchor:"bottom"},s.a.createElement("div",{className:"mt-5"},s.a.createElement(me,null)))),!this.state.shownPlaces&&s.a.createElement("div",{style:{position:"absolute",top:"5rem",textAlign:"center",zIndex:999,width:"100%"}},s.a.createElement(K,null,"Loading map data...")),s.a.createElement(X.a,{className:"sidebar-map maxHeight",zoomControl:!0,ref:this.mapRef},s.a.createElement(Y.b,{position:"topright"},s.a.createElement(be,{name:"Imperium (Pelagios)"},s.a.createElement(ee.a,{url:"http://pelagios.org/tilesets/imperium/{z}/{x}/{y}.png"})),s.a.createElement(be,{name:"Imperium (DARE)"},s.a.createElement(ee.a,{url:"http://dare.ht.lu.se/tiles/imperium/{z}/{x}/{y}.png"})),s.a.createElement(be,{name:"AWMC",checked:!0},s.a.createElement(ee.a,{url:"http://{s}.tiles.mapbox.com/v3/isawnyu.map-knmctlkh/{z}/{x}/{y}.png"})),s.a.createElement(be,{name:"Google Maps Roads"},s.a.createElement(ce.GoogleLayer,{googlekey:fe,maptype:"ROADMAP"})),s.a.createElement(be,{name:"Google Satellite"},s.a.createElement(ce.GoogleLayer,{googlekey:fe,maptype:"SATELLITE"})),s.a.createElement(be,{name:"OpenStreetMap"},s.a.createElement(ee.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"})),this.state.shownPlaces&&s.a.createElement(te.a,{ref:this.placesLayerRef,key:re()(this.state.shownPlaces),data:this.state.shownPlaces,pointToLayer:this.pointToLayer.bind(this),onEachFeature:this.onEachFeature.bind(this)})))))}}]),t}(n.Component),_e=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.tblabel,t=this.props.tb;return s.a.createElement("div",null,s.a.createElement(v.e,{className:"mt-5 mb-5",color:"light"},s.a.createElement("div",{className:"text-right"},s.a.createElement("button",{type:"button",className:"close mr-2 mt-2","aria-label":"Close",onClick:this.props.closeFn},s.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),s.a.createElement(v.f,null,s.a.createElement(v.i,null,"Saved queries for ",e),s.a.createElement(v.u,null,Object.values(C[t]).map(function(e,a){return s.a.createElement(v.v,{key:a,className:"mb-3",tag:y.a,to:"/search/".concat(t,"/saved?q=").concat(e.id),color:"secondary"},s.a.createElement(k.a,{icon:"arrow-circle-right"})," ",e.title)})))))}}]),t}(n.Component),ve={coptic:["authors.copticname","titles.text","colophons.text"],greek:["authors.greekname"],hidden:["manuscripts.creator","collections.creator","collections.cmclname","works.id","works.creator","works.shelfmarks","works.period","works.problems","titles.creator","colophons.creator","authors.id","authors.creator","authors.cmclname","editors.cmclname","places.creator","places.hasplans","places.hasphotos","persons.id","persons.creator","biblio.creator","biblio.editors","m_quires.id"],id_fld:{manuscripts:"id",collections:"fullname",works:"cmcl",titles:"cc",colophons:"id",authors:"name",places:"name",persons:"name"},searchDefault:{manuscripts:"id",collections:"fullname",works:"cmcl",titles:"cc",colophons:"id",authors:"name",places:"paths__m_toponyms:toponym",persons:"name"},preview:{manuscripts:["id","cmclid","tm","ldab","bookform","writingsupport"],collections:["id","fullname","cmclname","country","town","institution","name","notes"],works:["id","cmcl","title","cpg"],titles:["cc","type","workcc","msid"],colophons:["id","msid","dialect","chronofrom","chronoto","datingcriteria"],authors:["name","title","copticname","greekname","cmclname"],places:["id","name","tm","pleiades","region","area","episcopalsee"],persons:["id","name","type","profession","patronymic"]},label:{manuscripts:"Manuscripts",collections:"Collections",works:"Works",titles:"Titles",colophons:"Colophons",authors:"Authors",places:"Places",persons:"Persons attested in colophons"},fld_whitelist:["paths__places:id","paths__places:name","paths__places:tm","paths__places:pleiades","paths__places:region","paths__places:area","paths__places:meris","paths__places:nomos","paths__places:province","paths__places:episcopalsee","paths__places:typology","paths__places:description","paths__places:hasmonastery","paths__places:isnomoscapital","paths__m_toponyms:toponym","paths__m_placephase:fperiod","paths__m_placephase:ftypology","paths__works:id","paths__works:cmcl","paths__works:title","paths__works:cpg","paths__works:cant","paths__works:cavt","paths__works:bho","paths__works:bhg","paths__works:bhl","paths__works:cae","paths__works:litperiod","paths__m_wkauthors:type","paths__m_wkauthors:author","paths__authors:id","paths__authors:name","paths__authors:copticname","paths__authors:greekname","paths__authors:viaf","paths__authors:title","paths__titles:id","paths__titles:cc","paths__titles:workcc","paths__titles:msid","paths__titles:type","paths__colophons:id","paths__colophons:msid","paths__colophons:chronofrom","paths__colophons:chronoto","paths__colophons:dialect","paths__colophons:greektext","paths__colophons:writingaxis","paths__colophons:cryptography","paths__colophons:minusculecopitc","paths__colophons:minusculegreek","paths__colophons:text","paths__colophons:translation","paths__collections:id","paths__collections:fullname","paths__collections:country","paths__collections:town","paths__collections:institution","paths__collections:name","paths__manuscripts:id","paths__m_shelfmarks:collection","paths__m_shelfmarks:shelfmark","paths__manuscripts:cmclid","paths__manuscripts:tm","paths__manuscripts:ldab","paths__manuscripts:lcbm","paths__manuscripts:alias","paths__manuscripts:bookform","paths__manuscripts:writingsupport","paths__manuscripts:issinglefrag","paths__manuscripts:dialect","paths__manuscripts:chronofrom","paths__manuscripts:chronoto","paths__m_msplaces:place","paths__m_msplaces:type","paths__manuscripts:datingsource","paths__manuscripts:leaftotextant","paths__manuscripts:quiresextant","paths__manuscripts:columns","paths__manuscripts:linespercolumn","paths__manuscripts:charsperline","paths__manuscripts:quiresig","paths__manuscripts:quiretype","paths__manuscripts:quireposition","paths__manuscripts:pagination","paths__manuscripts:pagtype","paths__manuscripts:pagposition","paths__manuscripts:foliation","paths__manuscripts:foltype","paths__manuscripts:folposition","paths__manuscripts:handstot","paths__manuscripts:lectionalsigns","paths__manuscripts:structuralsigns","paths__manuscripts:abbreviations","paths__manuscripts:ruling","paths__manuscripts:rulingtype","paths__manuscripts:rulingtool","paths__manuscripts:pricking","paths__manuscripts:leaftabs","paths__manuscripts:kolleseis","paths__manuscripts:bindings","paths__manuscripts:sewings","paths__manuscripts:sewingtype","paths__manuscripts:covers","paths__manuscripts:palimpsest","paths__manuscripts:decortype","paths__manuscripts:decorsubj","paths__m_hands:handno","paths__m_hands:modulartypology","paths__m_hands:writingaxis","paths__m_hands:thickandthin"]},ye=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={showSaved:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"toggleSaved",value:function(e){e.preventDefault(),this.setState({showSaved:!this.state.showSaved})}},{key:"render",value:function(){var e=this.props.tblabel?this.props.tblabel:ve.label[this.props.tb],t=this.props.tb,a=!!this.props.text&&s.a.createElement("span",{className:"subText"},this.props.text),n=[{to:"/search/"+t+"/all",icon:"list-ul",text:"Show all"},{to:"/search/"+t,icon:"search",text:"Search"},{to:"/search/"+t+"/adv",icon:"search-plus",text:"Advanced search"}];return s.a.createElement("div",null,s.a.createElement(v.s,{className:"p-4"},s.a.createElement("div",{className:"container"},s.a.createElement("h2",null,a),s.a.createElement(v.D,{color:"light",light:!0,expand:"xs",className:"ml-auto"},s.a.createElement(v.E,null,s.a.createElement("h3",null,s.a.createElement("small",null,e))),s.a.createElement(v.A,{className:"ml-auto",navbar:!0},n.map(function(e,t){return s.a.createElement(v.B,{key:t},s.a.createElement(v.C,{to:e.to,tag:y.a},s.a.createElement(k.a,{icon:e.icon})," ",s.a.createElement("span",{className:"d-none d-md-inline"},e.text)))}),C[t]&&s.a.createElement(v.B,null,s.a.createElement(v.C,{onClick:this.toggleSaved.bind(this),to:"#",tag:y.a},s.a.createElement(k.a,{icon:"save"}),s.a.createElement("span",{className:"d-none d-md-inline"}," Saved queries"))))),this.state.showSaved&&s.a.createElement(_e,{tb:t,tblabel:e,closeFn:this.toggleSaved.bind(this)}))))}}]),t}(n.Component),Ee=a(763),ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={modal:!1},a.toggle=a.toggle.bind(Object(_.a)(Object(_.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"render",value:function(){return s.a.createElement("span",null,s.a.createElement(v.c,{color:"danger",size:"sm",onClick:this.toggle},s.a.createElement(k.a,{icon:"code"})),s.a.createElement(v.w,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},s.a.createElement(v.z,{toggle:this.toggle},"Executed SQL"),s.a.createElement(v.x,null,s.a.createElement("pre",{style:{height:"200px",whiteSpace:"pre-wrap"}},this.props.sql))))}}]),t}(n.Component);var Oe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=Math.ceil(a/30),r=[];n=parseInt(n,10);var l=ne.a.parse(t,{ignoreQueryPrefix:!0});return n-2>0&&(l.page=1,r.push({to:e+"?"+ne.a.stringify(l),text:1})),n-3>0&&r.push({to:"#",disabled:!0,text:"..."}),n-1>0&&(l.page=n-1,r.push({to:e+"?"+ne.a.stringify(l),text:l.page})),l.page=n,r.push({to:e+"?"+ne.a.stringify(l),active:!0,text:n}),n+1<s&&(l.page=n+1,r.push({to:e+"?"+ne.a.stringify(l),text:l.page})),n+2<s&&r.push({to:"#",disabled:!0,text:"..."}),n!==s&&(l.page=s,r.push({to:e+"?"+ne.a.stringify(l),text:l.page})),r}(this.props.path,this.props.search,this.props.totalRows,this.props.page);return s.a.createElement(v.G,null,s.a.createElement(v.H,null,s.a.createElement(v.I,null,"Pages: ")),e.map(function(e,t){var a={disabled:e.disabled,active:e.active};return s.a.createElement(v.H,Object.assign({},a,{key:t}),s.a.createElement(v.I,{tag:y.a,to:e.to},e.text))}))}}]),t}(n.Component),je=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.page?this.props.page:1,t=30*e-30+1,a=30*e<this.props.totalRows?30*e:this.props.totalRows;return s.a.createElement("div",{className:"mb-3"},"Showing records ",s.a.createElement("span",{className:"badge badge-primary"},t," \u2013  ",a," ")," of ",s.a.createElement("span",{className:"badge badge-success"},this.props.totalRows)," records found \xa0",s.a.createElement(ke,{sql:this.props.query}))}}]),t}(n.Component),we=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(v.J,null,this.props.children)}}]),t}(n.Component),Ce=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.record,t=this.props.fields,a=this.props.tb,n=this.props.previewFlds,r=this.props.idField;return s.a.createElement(v.j,{sm:"4"},s.a.createElement(v.e,{className:"mt-3",outline:!0,color:"dark"},s.a.createElement(v.g,{tag:"h4"},e[r]),s.a.createElement(v.f,{id:e.id},s.a.createElement(v.K,{hover:!0,size:"sm"},s.a.createElement("tbody",null,n.map(function(a,n){return s.a.createElement("tr",{key:n},s.a.createElement("th",null,t[a]),s.a.createElement("td",null,e[a]))}))),s.a.createElement("div",{className:"clearfix"},s.a.createElement("div",{className:"btn-group float-right",role:"group"},s.a.createElement(v.d,null,s.a.createElement(v.c,{size:"sm",color:"info",tag:y.a,to:"/"+[a,e.id].join("/")},s.a.createElement(k.a,{icon:"eye"})," View")))))))}}]),t}(n.Component),Ne=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.tb;return["manuscripts","places"].indexOf(e)<0?null:s.a.createElement("div",{className:"float-right mt-2"},s.a.createElement(y.a,{to:"/map?tb="+e+"&where="+encodeURI(this.props.where),className:"btn btn-warning"},s.a.createElement(k.a,{icon:"map-marker-alt"})," View on Map"))}}]),t}(n.Component),xe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={result:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"_fetchData",value:function(){var e=this;switch(this.props.type){case"simple":x.getSimple(this.props.tb,this.props.fld,this.props.val,this.props.strict,this.props.page,function(t){e.setState({result:t})});break;case"adv":x.getAdv(this.props.tb,this.props.data,this.props.page,function(t){e.setState({result:t})});break;case"all":x.getAll(this.props.tb,this.props.page,function(t){e.setState({result:t})});break;case"saved":x.getSaved(this.props.tb,this.props.query,this.props.page,function(t){e.setState({result:t})});break;case"encoded":x.getByEncodedSql(this.props.tb,this.props.q,this.props.page,function(t){e.setState({result:t})});break;default:return console.log("Unknown verb ".concat(this.props.type)),null}}},{key:"componentDidUpdate",value:function(e){this.props.page===e.page&&this.props.fld===e.fld&&this.props.val===e.val&&this.props.strict===e.strict&&this.props.query===e.query||this._fetchData()}},{key:"componentDidMount",value:function(){this._fetchData()}},{key:"render",value:function(){var e=this;return this.state.result?"error"===this.state.result.type?s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement(v.a,{color:"danger",className:"mt-5"},s.a.createElement("h4",{className:"alert-heading"},"We are so sorry!"),s.a.createElement("p",null,"Something went terribly wrong. Please report this error to ",s.a.createElement("a",{href:"https://github.com/paths-erc/atlas/issues"},"our public repository")," in order to get it fixes as soon as possible.")),s.a.createElement("div",null,s.a.createElement("p",null,"Please file the current URL:"),s.a.createElement(v.a,{color:"info",className:"border p-3 m-2 ml-4"},window.location.href),s.a.createElement(v.a,{color:"info",className:"border p-3 m-2 ml-4"},decodeURIComponent(window.location.href)),s.a.createElement("p",null,"and the following error message"),s.a.createElement(v.a,{color:"info",className:"border p-3 m-2 ml-4"},s.a.createElement("pre",null,this.state.result.text)),s.a.createElement("p",null,"Full error trace"),s.a.createElement(v.a,{color:"info",className:"border p-3 m-2 ml-4"},s.a.createElement("pre",null,this.state.result.trace))))):0===this.state.result.head.total_rows?s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement(v.a,{color:"warning",className:"mt-5"},s.a.createElement("h4",{className:"alert-heading"},"Ooops!"),"No result found. Please reformulate the query."))):s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"clearfix"},s.a.createElement(Ne,{tb:this.state.result.head.stripped_table,where:this.state.result.head.query_where,type:this.props.match.params.type,search:ne.a.parse(this.props.location.search,{ignoreQueryPrefix:!0})}),s.a.createElement(je,{totalRows:this.state.result.head.total_rows,page:this.state.result.head.page,query:this.state.result.head.query_arrived}),s.a.createElement(Oe,{path:this.props.location.pathname,search:this.props.location.search,totalRows:this.state.result.head.total_rows,page:this.state.result.head.page})),s.a.createElement(we,null,this.state.result.records.map(function(t,a){return s.a.createElement(Ce,{idField:ve.id_fld[e.props.match.params.table],previewFlds:ve.preview[e.props.match.params.table],tb:e.props.match.params.table,record:t,fields:e.state.result.head.fields,key:a})})),s.a.createElement("div",{className:"pt-3"},s.a.createElement(Oe,{path:this.props.location.pathname,search:this.props.location.search,totalRows:this.state.result.head.total_rows,page:this.state.result.head.page})))):s.a.createElement("div",{className:"container"},s.a.createElement(K,null))}}]),t}(n.Component),Se=Object(Ee.a)(xe),Ie=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(c.a)(this,Object(p.a)(t).call(this,e));var n=ne.a.parse(e.location.search,{ignoreQueryPrefix:!0});return a.state={saved:n.q,page:n.page},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=ne.a.parse(e.location.search,{ignoreQueryPrefix:!0}),n=ne.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});a.page!==n.page&&this.setState({page:n.page}),a.q!==n.q&&this.setState({saved:n.q})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(ye,{tb:this.props.match.params.table,text:C[this.props.match.params.table][this.state.saved].title}),s.a.createElement(Se,{tb:this.props.match.params.table,query:this.state.saved,type:"saved",page:this.state.page}))}}]),t}(n.Component),De=a(343),qe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this))).state={fields:!1,fld:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"_setState",value:function(e,t){var a;if(e=ve.fld_whitelist.map(function(t){return!!e[t]&&{value:t,label:e[t].label}}).filter(function(e){return e}),t)a=e.filter(function(e){return e.value===t})[0];else{if(ve.searchDefault[this.props.tb]){var n=ve.searchDefault[this.props.tb].includes("paths")?ve.searchDefault[this.props.tb]:"paths__".concat(this.props.tb,":").concat(ve.searchDefault[this.props.tb]);a=e.filter(function(e){return e.value===n})[0]}else a=e[0];this.props.onChange(a)}this.setState({fields:e,fld:a})}},{key:"componentDidMount",value:function(){var e=this;x.inspect(this.props.tb,function(t){e._setState(t.fields,e.props.fld)})}},{key:"render",value:function(){return this.state.fields?s.a.createElement(De.a,{defaultValue:this.state.fld,options:this.state.fields,onChange:this.props.onChange}):null}}]),t}(n.Component),Pe=a(320),Ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this)))._handleSearch=function(e){a.setState({isLoading:!0});var t=a.props.fld.split(":"),n=Object(O.a)(t,2),s=n[0],r=n[1];x.getUniqueVal(s,r,e,function(e){a.setState({options:e,isLoading:!1})})},a.state={isLoading:!1,multiple:!1,options:[]},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.state.options?s.a.createElement("div",null,s.a.createElement(Pe.AsyncTypeahead,Object.assign({},this.state,{minLength:1,placeholder:"Add a value",onSearch:this._handleSearch,onInputChange:this.props.onChange,onChange:this.props.onChange,defaultInputValue:this.props.val?this.props.val:""}))):null}}]),t}(n.Component),Re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this))).state={fld:e.fld,val:e.val,strict:!0===e.strict},a.handleSubmit=a.handleSubmit.bind(Object(_.a)(Object(_.a)(a))),a._changeField=a._changeField.bind(Object(_.a)(Object(_.a)(a))),a._changeVal=a._changeVal.bind(Object(_.a)(Object(_.a)(a))),a._changeStrict=a._changeStrict.bind(Object(_.a)(Object(_.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){e!==this.props&&this.setState({fld:this.props.fld,val:this.props.val,strict:!!this.props.strict})}},{key:"_changeField",value:function(e){this.setState({fld:e.constructor===Object&&e.value?e.value:e})}},{key:"_changeVal",value:function(e){this.setState({val:e.constructor===Array?e[0]:e})}},{key:"_changeStrict",value:function(e){this.setState({strict:e.target.checked})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.val?this.props.onSubmit(this.state.fld,this.state.val,this.state.strict):alert("Insert a value to continue")}},{key:"render",value:function(){return s.a.createElement("div",{className:"my-5"},s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},s.a.createElement(v.o,{row:!0},s.a.createElement(v.j,{sm:4},s.a.createElement(qe,{tb:this.props.tb,fld:this.state.fld,onChange:this._changeField})),s.a.createElement(v.j,{sm:5},s.a.createElement(Ae,{fld:this.state.fld,val:this.state.val,onChange:this._changeVal})),s.a.createElement(v.j,{sm:1},s.a.createElement(v.t,{check:!0},s.a.createElement(v.p,{name:"strict",type:"checkbox",checked:this.state.strict,onChange:this._changeStrict})," Strict")),s.a.createElement(v.j,{sm:2}," ",s.a.createElement(v.c,{type:"submit",color:"success",block:!0},"Search!")," "))))}}]),t}(n.Component),Le=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(c.a)(this,Object(p.a)(t).call(this,e));var n=ne.a.parse(e.location.search,{ignoreQueryPrefix:!0});return a.state={fld:n.f,val:n.v,strict:n.s&&"false"!==n.s&&"undefined"!==n.s,page:n.page},a._onFormSubmit=a._onFormSubmit.bind(Object(_.a)(Object(_.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"_onFormSubmit",value:function(e,t,a){var n="f="+encodeURIComponent(e)+(a?"&s=1":"")+"&v="+encodeURIComponent(t);this.setState({fld:e,val:t,strict:a}),this.props.history.push("/search/".concat(this.props.match.params.table,"?").concat(n))}},{key:"componentDidUpdate",value:function(e,t){var a=ne.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});this.state.page!==a.page&&this.setState({page:a.page})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(ye,{tb:this.props.match.params.table,text:"Simple search"}),s.a.createElement("div",{className:"mt-3 p-1 container"},s.a.createElement(Re,{tb:this.props.match.params.table,onSubmit:this._onFormSubmit,fld:this.state.fld,val:this.state.val,strict:this.state.strict}),s.a.createElement("hr",null)),this.state.fld&&this.state.val&&s.a.createElement(Se,{tb:this.props.match.params.table,type:"simple",fld:this.state.fld,val:this.state.val,strict:this.state.strict,page:this.state.page}))}}]),t}(n.Component),Te=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(v.p,Object.assign({type:"select",placeholder:"select"},this.props),[{k:"LIKE",v:"Contains"},{k:"=",v:"Is exactly"},{k:"NOT LIKE",v:"Does not contain"},{k:"starts_with",v:"Starts with"},{k:"ends_with",v:"Ends with"},{k:"is_empty",v:"Is empty"},{k:"is_not_empty",v:"Is not empty"},{k:">",v:"Is bigger than"},{k:"<",v:"Is smaller than"}].map(function(e,t){return s.a.createElement("option",{key:t,value:e.k},e.v)})))}}]),t}(n.Component),Ue=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(v.p,Object.assign({type:"select"},this.props),s.a.createElement("option",{value:"AND"},"AND"),s.a.createElement("option",{value:"OR"},"OR")))}}]),t}(n.Component),Me=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(c.a)(this,Object(p.a)(t).call(this,e));var n,s=ne.a.parse(e.location.search,{ignoreQueryPrefix:!0}),r=!1;return 0===Object.getOwnPropertyNames(s).length?n={a:{f:"",o:"LIKE",v:""}}:(n=s,r=!0),a.state={rows:n,showResults:r,page:!1},a._changeOperator=a._changeOperator.bind(Object(_.a)(Object(_.a)(a))),a._changeConnector=a._changeConnector.bind(Object(_.a)(Object(_.a)(a))),a._addRow=a._addRow.bind(Object(_.a)(Object(_.a)(a))),a._removeRow=a._removeRow.bind(Object(_.a)(Object(_.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"_removeRow",value:function(e){var t=this.state.rows;delete t[e.target.name],this.setState({rows:t,showResults:!1})}},{key:"_addRow",value:function(){var e=this.state.rows;e["a"+Math.random().toString(36).substr(2,9)]={f:"",o:"LIKE",v:"",c:"AND"},this.setState({rows:e,showResults:!1})}},{key:"_changeField",value:function(e,t){var a=this.state.rows;a[e].f=t.constructor===Object&&t.value?t.value:t,this.setState({rows:a,showResults:!1})}},{key:"_changeVal",value:function(e,t){var a=this.state.rows;a[e].v=t.constructor===Array?t[0]:t,this.setState({rows:a,showResults:!1})}},{key:"_changeOperator",value:function(e){var t=this.state.rows;t[e.target.name].o=e.target.value,this.setState({rows:t,showResults:!1})}},{key:"_changeConnector",value:function(e){var t=this.state.rows;t[e.target.name].c=e.target.value,this.setState({rows:t,showResults:!1})}},{key:"_handleSubmit",value:function(e){e.preventDefault(),this.setState({showResults:!0});var t=ne.a.stringify(this.state.rows);this.props.history.push("/search/".concat(this.props.match.params.table,"/adv?").concat(t))}},{key:"componentDidUpdate",value:function(e,t){var a=ne.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});this.state.page!==a.page&&this.setState({page:a.page})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(ye,{tb:this.props.match.params.table,text:"Advanced search"}),s.a.createElement("div",{className:"mt-3 p-1 container"},s.a.createElement("form",{onSubmit:this._handleSubmit.bind(this),className:"form"},Object.entries(this.state.rows).map(function(t,a){var n=t[0],r=t[1];return s.a.createElement("div",{key:a,className:"my-3"},s.a.createElement(v.J,null,s.a.createElement(v.j,{xs:1},a>0&&s.a.createElement(Ue,{defaultValue:r.c,onChange:e._changeConnector,name:n})),s.a.createElement(v.j,{xs:4},s.a.createElement(qe,{tb:e.props.match.params.table,fld:r.f,onChange:e._changeField.bind(e,n)})),s.a.createElement(v.j,{xs:2},s.a.createElement(Te,{defaultValue:r.o,name:n,onChange:e._changeOperator})),s.a.createElement(v.j,{xs:3},s.a.createElement(Ae,{fld:r.f,val:r.v,onChange:e._changeVal.bind(e,n)})),s.a.createElement(v.j,{xs:1},a+1===Object.keys(e.state.rows).length&&s.a.createElement(v.c,{type:"button",color:"info",block:!0,onClick:e._addRow},"+")),s.a.createElement(v.j,{xs:1},a>0&&s.a.createElement(v.c,{type:"button",color:"danger",block:!0,name:n,onClick:e._removeRow},"-"))))}),s.a.createElement(v.c,{type:"submit",color:"success",block:!0},"Search!")),s.a.createElement("hr",null)),this.state.showResults&&s.a.createElement(Se,{tb:this.props.match.params.table,type:"adv",data:this.state.rows,page:this.state.page}))}}]),t}(n.Component),Fe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=ne.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});return s.a.createElement("div",null,s.a.createElement(ye,{tb:this.props.match.params.table,text:"Custom query"}),s.a.createElement(Se,{tb:this.props.match.params.table,type:"encoded",q:e.q,page:e.page}))}}]),t}(n.Component),Be=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(c.a)(this,Object(p.a)(t).call(this,e));var n=ne.a.parse(e.location.search,{ignoreQueryPrefix:!0});return a.state={page:n.page},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=ne.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});this.state.page!==a.page&&this.setState({page:a.page})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(ye,{tb:this.props.match.params.table,text:"View all"}),s.a.createElement(Se,{tb:this.props.match.params.table,type:"all",page:this.state.page}))}}]),t}(n.Component),ze=a(93),He=a.n(ze),Je=a(321),Ge=a.n(Je),Ve=a(322),We=a.n(Ve),Qe=a(323),Ke=a.n(Qe),Ze=a(324),$e=a.n(Ze),Ye=a(325),Xe=a.n(Ye),et=a(326),tt=a.n(et),at=a(327),nt=a.n(at),st=a(328),rt=a.n(st),lt=a(329),it=a.n(lt),ot=a(330),ct=a.n(ot),pt=a(331),ht=a.n(pt),mt=a(332),ut=a.n(mt),dt=a(333),bt=a.n(dt),ft=a(334),gt=a.n(ft),_t=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={tb:e.match.params.table,label:!1,text:!1,img:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"_updateData",value:function(e){var t=this,a=!1,n=!1,s=!1;switch(e){case"places":a=Ge.a,n=We.a,s="Places";break;case"manuscripts":a=Ke.a,n=$e.a,s="Manuscripts";break;case"works":a=Xe.a,n=tt.a,s="Works";break;case"titles":a=nt.a,n=rt.a,s="Titles";break;case"authors":a=it.a,n=ct.a,s="Authors";break;case"colophons":a=ht.a,n=ut.a,s="Colophons";break;case"collections":a=bt.a,n=gt.a,s="Collections";break;default:return!1}fetch(a).then(function(e){return e.text()}).then(function(a){t.setState({tb:e,text:a,img:n,label:s})})}},{key:"componentDidUpdate",value:function(e){this.props.match.params.table!==e.match.params.table&&this._updateData(this.props.match.params.table)}},{key:"componentDidMount",value:function(){this._updateData(this.state.tb)}},{key:"render",value:function(){return this.state.text?(this.state.img&&(e={width:"100%",height:"300px",backgroundImage:"url("+this.state.img+")",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%"}),s.a.createElement("div",null,s.a.createElement("div",{style:e}),s.a.createElement(ye,{tblabel:this.state.label,tb:this.state.tb,text:"Introduction"}),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"my-3 px-md-5 double-column text-justify"},s.a.createElement(He.a,{source:this.state.text,escapeHtml:!1}))))):s.a.createElement(K,null);var e}}]),t}(n.Component),vt=a(335),yt=a(336),Et=a.n(yt),kt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={uid:Math.random().toString(36).substr(2,5)},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){null!==this.props.string&&new Et.a("canvas"+this.state.uid).parseString(this.props.string,"secondHalf"+this.state.uid)}},{key:"render",value:function(){var e=!1;return null!==this.props.string&&(e=100+this.props.string.length/3*20),s.a.createElement("div",{className:"mt-2 mb-4"},s.a.createElement(v.J,null,s.a.createElement(v.j,{id:"firstHalf"},this.props.string),s.a.createElement(v.j,{id:"secondHalf"+this.state.uid})),e&&s.a.createElement("canvas",{width:"400",height:e,id:"canvas"+this.state.uid}))}}]),t}(n.Component),Ot=a(337),jt=a.n(Ot);var wt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={display:"none"},a.toggleDisplay=a.toggleDisplay.bind(Object(_.a)(Object(_.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"toggleDisplay",value:function(){this.setState({display:"none"===this.state.display?"inline":"none"})}},{key:"render",value:function(){var e=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e||e.length<=t)return[e,!1];var n=e.substr(0,t);if(n.substr(n.length-1)===a)return[n,!1];var s=n+""+e.replace(n,"").split(a)[0],r=e.replace(s+""+a,"");return[s+a,r!==s&&r]}(jt()(this.props.text),200,this.props.separator);return e[1]?s.a.createElement("span",null,e[0],s.a.createElement("span",{style:{display:this.state.display}},e[1]),"none"===this.state.display?"\u2026":"",s.a.createElement(v.c,{color:"info",size:"sm",className:"ml-3",onClick:this.toggleDisplay},"none"===this.state.display?"+":"-")):e[0]}}]),t}(n.Component),Ct=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.val,t=this.props.label;if(!e||""===e)return null;var a=[];return this.props.coptic&&a.push("coptic"),this.props.greek&&a.push("greek"),s.a.createElement(v.J,{className:"border-bottom mt-2 mb-2 pb-1"+(null!==e?"":" d-none")},s.a.createElement(v.j,{sm:"4",md:"3"},s.a.createElement("label",{className:"font-weight-bold"},t)),s.a.createElement(v.j,null,s.a.createElement("div",{className:a.join(" ")},"Quire layout"===t?s.a.createElement(kt,{string:e}):s.a.createElement(wt,{text:e,separator:this.props.coptic?"\u2027":"."}))))}}]),t}(n.Component);var Nt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"plugins"},s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement("h5",null,this.props.data.metadata.tb_label)),s.a.createElement(v.f,null,this.props.data.data.map(function(e,t){return s.a.createElement("span",{key:t,className:"mr-3"},(a=e.zotero.val,n=e.short.val,a?s.a.createElement("a",{href:"https://www.zotero.org/groups/2189557/erc-paths/items/itemKey/"+a,target:"_blank",rel:"noopener noreferrer"},n):n),e.details.val?", "+e.details.val:"",e.images.val?" [".concat(e.images.val,"];"):";");var a,n}))))}}]),t}(n.Component),xt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={modal:!1},a.toggle=a.toggle.bind(Object(_.a)(Object(_.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"getHtmlModalBody",value:function(e){return s.a.createElement("dl",null,s.a.createElement("dt",null,"Country:        "),s.a.createElement("dd",null,e.country.val),s.a.createElement("dt",null,"Town:           "),s.a.createElement("dd",null,e.town.val),s.a.createElement("dt",null,"Institution:    "),s.a.createElement("dd",null,e.institution.val),s.a.createElement("dt",null,"Collection name:"),s.a.createElement("dd",null,e.name.val),s.a.createElement("dt",null,"CMCL full name: "),s.a.createElement("dd",null,e.fullsegnat.val),s.a.createElement("dt",null,"URN:            "),s.a.createElement("dd",null,s.a.createElement("code",null,"paths.shelfmarks.",e.id.val)))}},{key:"toggle",value:function(e){e.id&&this.setState({title:e.fullname.val,body:this.getHtmlModalBody(e)}),this.setState({modal:!this.state.modal})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"plugins"},s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement("h5",null,this.props.data.metadata.tb_label)),s.a.createElement(v.f,null,s.a.createElement("ul",null,this.props.data.data.map(function(t,a){return s.a.createElement("li",{key:a},s.a.createElement(v.c,{style:{margin:"0 0 4px 0",padding:0},color:"link",onClick:function(){return e.toggle(t)}},t.fullname.val),t.shelfmark.val?", "+t.shelfmark.val:"",t.pp.val?", "+t.pp.val:"")})))),s.a.createElement(v.w,{isOpen:this.state.modal,toggle:this.toggle},s.a.createElement(v.z,{toggle:this.toggle},this.state.title),s.a.createElement(v.x,null,this.state.body)))}}]),t}(n.Component),St=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={display:"none"},a.toggleDisplay=a.toggleDisplay.bind(Object(_.a)(Object(_.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"toggleDisplay",value:function(){this.setState({display:"none"===this.state.display?"inline":"none"})}},{key:"render",value:function(){return s.a.createElement("span",null,s.a.createElement("span",{style:{display:this.state.display},className:"ml-3 bg-light text-muted p-2"},this.props.text),s.a.createElement(v.c,{color:"info",size:"sm",className:"ml-3",onClick:this.toggleDisplay},"none"===this.state.display?s.a.createElement(k.a,{icon:"info"}):"<"))}}]),t}(n.Component),It=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.data.length;return s.a.createElement("div",null,this.props.data.map(function(t,a){return s.a.createElement("span",{className:"mr-2 pr-2"+(e===a+1?"":" border-right border-warning"),key:a},s.a.createElement("span",{className:t.language.val?t.language.val.toLowerCase():"",title:t.notes.val},t.toponym.val," "),t.transcription.val?s.a.createElement("span",{className:"text-muted ml-2"},"[",t.transcription.val,"]"):"",t.notes.val?s.a.createElement(St,{text:t.notes.val}):"")}))}}]),t}(n.Component),Dt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"parseNames",value:function(e){var t={};return e.forEach(function(e,a){t[e.language.val]||(t[e.language.val]=[]),t[e.language.val].push(e)}),Object.keys(t).map(function(e,a){return s.a.createElement(v.J,{className:"border-bottom mt-2 mb-2 pb-1",key:a},s.a.createElement(v.j,{sm:"4",md:"3"},s.a.createElement("label",{className:"font-weight-bold"},e)),s.a.createElement(v.j,null,s.a.createElement("div",null,s.a.createElement(It,{data:t[e]}))))})}},{key:"render",value:function(){return s.a.createElement("div",{className:"plugins"},s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement("h5",null,this.props.data.metadata.tb_label)),s.a.createElement(v.f,null,this.parseNames(this.props.data.data))))}}]),t}(n.Component),qt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.props.data.data.length<1?null:"paths__m_biblio"===this.props.data.metadata.tb_id?s.a.createElement(Nt,{data:this.props.data}):"paths__m_shelfmarks"===this.props.data.metadata.tb_id?s.a.createElement(xt,{data:this.props.data}):"paths__m_toponyms"===this.props.data.metadata.tb_id?s.a.createElement(Dt,{data:this.props.data}):s.a.createElement("div",{className:"plugins"},s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement("h5",null,this.props.data.metadata.tb_label)),this.props.data.data.map(function(t,a){return s.a.createElement(v.f,{key:a,className:"border border-info mb-2"},Object.keys(t).map(function(a,n){return ve.hidden.indexOf(e.props.data.metadata.tb_stripped+"."+a)>-1?null:t[a].label?s.a.createElement(Ct,{val:t[a].val_label?t[a].val_label:t[a].val,label:t[a].label,key:n}):null}),s.a.createElement("hr",null))})))}}]),t}(n.Component),Pt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.rec,t=[];return s.a.createElement("div",null,Object.values(e.core).map(function(a,n){return ve.hidden.indexOf(e.metadata.tb_stripped+"."+a.name)>-1?null:"alias"===a.name?(t.push("paths__m_shelfmarks"),s.a.createElement("div",{key:n},s.a.createElement(Ct,{coptic:ve.coptic.indexOf(e.metadata.tb_stripped+"."+a.name)>-1,greek:ve.greek.indexOf(e.metadata.tb_stripped+"."+a.name)>-1,label:a.label,val:a.val_label?a.val_label:a.val}),s.a.createElement(v.J,{key:n,className:"border-bottom mb-2 pb-2"},s.a.createElement(v.j,null,e.plugins.paths__m_shelfmarks&&s.a.createElement(qt,{data:e.plugins.paths__m_shelfmarks}))))):s.a.createElement(Ct,{coptic:ve.coptic.indexOf(e.metadata.tb_stripped+"."+a.name)>-1,greek:ve.greek.indexOf(e.metadata.tb_stripped+"."+a.name)>-1,label:a.label,val:a.val_label?a.val_label:a.val,key:n})}),Object.keys(e.plugins).map(function(a,n){return t.includes(a)?null:s.a.createElement(qt,{key:n,data:e.plugins[a]})}))}}]),t}(n.Component),At=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"renderTemplate",value:function(e){switch(e.metadata.tb_stripped){case"manuscripts":return s.a.createElement(Pt,{rec:e});default:return s.a.createElement("div",null,Object.values(e.core).map(function(t,a){return ve.hidden.indexOf(e.metadata.tb_stripped+"."+t.name)>-1?null:s.a.createElement(Ct,{coptic:ve.coptic.indexOf(e.metadata.tb_stripped+"."+t.name)>-1,greek:ve.greek.indexOf(e.metadata.tb_stripped+"."+t.name)>-1,label:t.label,val:t.val_label?t.val_label:t.val,key:a})}),Object.keys(e.plugins).map(function(t,a){return s.a.createElement(qt,{key:a,data:e.plugins[t]})}))}}},{key:"render",value:function(){return this.props.rec?s.a.createElement("div",{className:"mb-5"},this.renderTemplate(this.props.rec)):s.a.createElement("div",{className:"m-5 p-5"},s.a.createElement(K,null))}}]),t}(n.Component),Rt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"makeHref",value:function(e,t){return["/","search","/",e.replace("paths__",""),"/","encoded","?q="+window.btoa("SELECT * FROM "+e+" WHERE "+t)].join("")}},{key:"renderLinks",value:function(e){var t=this;return Object.entries(e).map(function(e,a){var n=Object(O.a)(e,2),r=n[0],l=n[1];return l.tot<1?null:s.a.createElement(v.v,{key:a,tag:y.a,to:t.makeHref(r,l.where)},s.a.createElement(k.a,{icon:"external-link-square-alt"})," ",l.tot+" referenced item"+(l.tot>1?"s":"")+" in "+l.tb_label)})}},{key:"renderBackLinks",value:function(e){var t=this;return!("undefined"===typeof e||e.length<1)&&Object.entries(e).map(function(e,a){var n=Object(O.a)(e,2),r=n[0],l=n[1];return!(l.tot<1)&&s.a.createElement(v.v,{key:a,tag:y.a,to:t.makeHref(r,l.where)},s.a.createElement(k.a,{icon:"external-link-square-alt"})," ",l.tot+" referenced item"+(l.tot>1?"s":"")+" in "+l.tb_label)})}},{key:"render",value:function(){return!this.props.links&&!this.props.backlinks||this.props.links.length<1&&this.props.backlinks.length<1?null:s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement(k.a,{icon:"link"})," Links"),s.a.createElement(v.f,null,s.a.createElement(v.u,null,this.renderLinks(this.props.links),this.renderBackLinks(this.props.backlinks))))}}]),t}(n.Component),Lt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"makeHref",value:function(e,t){return["/",e.replace("paths__",""),"/",t].join("")}},{key:"render",value:function(){var e=this,t=this.props.links||[];return"undefined"===typeof t||t.length<1?null:s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement(k.a,{icon:"link"})," Manually entered links"),s.a.createElement(v.f,null,s.a.createElement(v.u,null,t.map(function(t,a){return s.a.createElement(v.v,{key:a,tag:y.a,to:e.makeHref(t.tb_stripped,t.ref_id)},s.a.createElement(k.a,{icon:"external-link-square-alt"}),"  ",t.tb_label," #",t.ref_label?t.ref_label:t.ref_id)}))))}}]),t}(n.Component),Tt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.text?s.a.createElement(v.f,{className:"text-secondary",style:{fontSize:".9rem",fontStyle:"italic"}},this.props.text):null}}]),t}(n.Component),Ut=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={modal:!1},a.toggle=a.toggle.bind(Object(_.a)(Object(_.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(v.e,{className:"mt-1"},s.a.createElement(v.h,{top:!0,width:"100%",src:this.props.file,onClick:this.toggle}),s.a.createElement(Tt,{text:this.props.description})),s.a.createElement(v.w,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className,size:"lg"},s.a.createElement(v.x,null,s.a.createElement("div",null,s.a.createElement("img",{style:{width:"100%"},src:this.props.file,alt:this.props.description}))),s.a.createElement(v.y,null,s.a.createElement(Tt,{text:this.props.description}))))}}]),t}(n.Component),Mt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={shown:!1,buttonText:"Show more images"},a.toggle=a.toggle.bind(Object(_.a)(Object(_.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({shown:!this.state.shown,buttonText:"Show more images"===this.state.buttonText?"Hide":"Show more"})}},{key:"render",value:function(){var e=this;return!this.props.files||this.props.files.length<1?null:s.a.createElement("div",null,s.a.createElement("div",{style:{display:this.state.shown?"block":"none"}},this.props.files.map(function(t,a){return s.a.createElement(Ut,{key:a,file:e.props.baseUrl.replace("/api/","/projects/")+"files/"+t.id+"."+t.ext,description:t.description})})),s.a.createElement("div",{className:"text-center mt-2"},s.a.createElement(v.c,{onClick:this.toggle,color:"info"},this.state.buttonText)))}}]),t}(n.Component),Ft=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.files||[],a=(t=t.map(function(e){return!!["jpg","png","gif","tif","tiff","jpeg"].includes(e.ext.toLowerCase())&&e}).filter(function(e){return e})).slice(0,3),n=t.slice(3);return a.length<1?null:s.a.createElement("div",{className:"mt-3"},s.a.createElement("h5",null,"Attached images"),a.map(function(t,a){return s.a.createElement(Ut,{key:a,file:e.props.baseUrl.replace("/api/","/projects/")+"files/"+t.id+"."+t.ext,description:t.description})}),s.a.createElement(Mt,{files:n,baseUrl:this.props.baseUrl}))}}]),t}(n.Component),Bt=a(201),zt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(this.props.geom.length<1)return null;var e=JSON.parse(this.props.geom[0].geojson).coordinates.reverse();return s.a.createElement("div",{style:{height:"300px",width:"100%"}},s.a.createElement(X.a,{className:"sidebar-map maxHeight",center:e,zoom:11,zoomControl:!0},s.a.createElement(ee.a,{url:"http://pelagios.org/tilesets/imperium/{z}/{x}/{y}.png"}),this.props.geom.map(function(e,t){var a=JSON.parse(e.geojson).coordinates.reverse();return s.a.createElement(Bt.a,{position:a,key:t})})))}}]),t}(n.Component),Ht=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return"manuscripts"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"http://coptot.manuscriptroom.com/manuscript-catalog/?gaNum="+encodeURIComponent(this.props.data.val),target:"_blank",rel:"noopener noreferrer"},s.a.createElement(k.a,{icon:"external-link-alt"})," The Digital Edition of the Coptic Old Testament"))}}]),t}(n.Component),Jt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return"manuscripts"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"https://www.trismegistos.org/text/"+this.props.data.val,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(k.a,{icon:"external-link-alt"})," Trismegistos texts"))}}]),t}(n.Component),Gt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return"places"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"https://www.trismegistos.org/place/"+this.props.data.val,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(k.a,{icon:"external-link-alt"})," Trismegistos places"))}}]),t}(n.Component),Vt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return"manuscripts"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"https://www.trismegistos.org/ldab/text.php?quick="+this.props.data.val,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(k.a,{icon:"external-link-alt"})," Leuven Database of Ancient books"))}}]),t}(n.Component),Wt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return"places"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"https://pleiades.stoa.org/places/"+this.props.data.val,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(k.a,{icon:"external-link-alt"})," Pleiades"))}}]),t}(n.Component),Qt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return"colophons"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"https://github.com/paths-erc/coptic-texts/blob/master/colophons/paths.colophons.".concat(this.props.data.val,".xml"),target:"_blank",rel:"noopener noreferrer"},s.a.createElement(k.a,{icon:"external-link-alt"})," View marked-up text on GitHub"))}}]),t}(n.Component),Kt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return!this.props.rec||this.props.rec.length<1?null:s.a.createElement("div",{className:"mt-3"},s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement(k.a,{icon:["fab","hubspot"]})," External links"),s.a.createElement(v.f,null,s.a.createElement(v.u,null,s.a.createElement(Ht,{data:this.props.rec.lcbm,tb:this.props.tb}),s.a.createElement(Jt,{data:this.props.rec.tm,tb:this.props.tb}),s.a.createElement(Vt,{data:this.props.rec.ldab,tb:this.props.tb}),s.a.createElement(Gt,{data:this.props.rec.tm,tb:this.props.tb}),s.a.createElement(Wt,{data:this.props.rec.pleiades,tb:this.props.tb}),s.a.createElement(Qt,{data:this.props.rec.id,tb:this.props.tb})))))}}]),t}(n.Component),Zt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={rec:!1,copied:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;e!==this.props&&(this.setState({rec:null}),x.getOne(e.match.params.table,e.match.params.id,function(e){t.setState({rec:e})}))}},{key:"componentDidMount",value:function(){var e=this;x.getOne(this.props.match.params.table,this.props.match.params.id,function(t){e.setState({rec:t})})}},{key:"renderTemplate",value:function(e){var t=this;return"error"===e.type?s.a.createElement("pre",{className:"text-danger p-5"},e.text):(e.metadata.tb_stripped,e.core.length<1?s.a.createElement("div",{className:"container"},s.a.createElement(ye,{tb:e.metadata.tb_stripped,tblabel:e.metadata.tb_label,text:"View record"}),s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement("h3",{className:"text-danger"},"Record paths.",e.metadata.tb_stripped,".",this.props.match.params.id,"  not found!")))):s.a.createElement("div",{className:"container"},s.a.createElement(ye,{tb:e.metadata.tb_stripped,tblabel:e.metadata.tb_label,text:"View record"}),s.a.createElement(v.J,{className:"mt-2"},s.a.createElement(v.j,{sm:"8"},s.a.createElement(v.e,null,s.a.createElement(v.g,null,s.a.createElement("h3",null,"paths.",e.metadata.tb_stripped,".",e.core.id.val),s.a.createElement("div",{className:"text-secondary d-flex justify-content-between"},s.a.createElement("div",null,s.a.createElement(k.a,{icon:"link"})," http://paths.uniroma1.it/atlas/",e.metadata.tb_stripped,"/",e.core.id.val),s.a.createElement("div",null,s.a.createElement(vt.CopyToClipboard,{text:"http://paths.uniroma1.it/atlas/"+e.metadata.tb_stripped+"/"+e.core.id.val,onCopy:function(){t.setState({copied:!0}),window.setTimeout(function(){t.setState({copied:!1})},2e3)}},s.a.createElement(v.c,{size:"sm",color:this.state.copied?"primary":"secondary"},s.a.createElement(k.a,{icon:"clone"})," ",s.a.createElement("span",{className:"d-none d-sm-inline"},this.state.copied?"Copied!":"Copy to clipboard")))))),s.a.createElement(v.f,null,s.a.createElement(At,{rec:e})))),s.a.createElement(v.j,{sm:"4"},s.a.createElement(zt,{geom:e.geodata}),s.a.createElement(Ft,{files:e.files,baseUrl:x.getBaseUrl()}),s.a.createElement(Rt,{links:e.links,backlinks:e.backlinks}),s.a.createElement(Lt,{links:e.manualLinks}),s.a.createElement(Kt,{rec:e.core,tb:e.metadata.tb_stripped})))))}},{key:"render",value:function(){return this.state.rec?s.a.createElement("div",{className:"mb-5"},this.renderTemplate(this.state.rec)):s.a.createElement("div",{className:"m-5 p-5"},s.a.createElement(K,null))}}]),t}(n.Component),$t=a(338),Yt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"parseData",value:function(e){var t={labels:[],datasets:[{label:"My First dataset",backgroundColor:"rgba(195,31,42,0.8)",borderColor:"rgba(195,31,42,1)",borderWidth:1,hoverBackgroundColor:"rgba(195,31,42,1)",hoverBorderColor:"rgba(195,31,42,0.8)",data:[]}]};return e.forEach(function(e){t.labels.push(e.series_name),Object.keys(e).forEach(function(a){"series_name"!==a&&(t.datasets[0].data.push(e[a]),t.datasets[0].label=a)})}),t}},{key:"render",value:function(){if(this.props.loading)return s.a.createElement(K,null,"Loading chart...");if(!this.props.data)return null;var e=this.parseData(this.props.data);return s.a.createElement("div",{className:"my-5"},s.a.createElement("h2",null,this.props.name),s.a.createElement($t.a,{data:e,width:100,height:350,options:{maintainAspectRatio:!1}}))}}]),t}(n.Component),Xt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={name:!1,data:!1,loading:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"loadChart",value:function(e){var t=this;this.setState({loading:!0}),x.getChart(e,function(e){t.setState({name:e.name}),t.setState({data:e.data}),t.setState({loading:!1})})}},{key:"render",value:function(){var e=this;return this.props.charts?"error"===this.props.charts.type?s.a.createElement("div",{className:"text-danger mt-5 px-5"},"Sorry! There was an error getting list of chart from the database..."):s.a.createElement("div",{className:"mt-5"},s.a.createElement(Yt,{name:this.state.name,data:this.state.data,loading:this.state.loading}),s.a.createElement(v.e,null,s.a.createElement(v.f,null,s.a.createElement(v.u,null,this.props.charts.map(function(t,a){return s.a.createElement(v.v,{key:a,tag:v.c,onClick:function(){return e.loadChart(t.id)},className:"mb-3",color:"secondary"},t.name)}))))):s.a.createElement(K,null,"Loading chart list...")}}]),t}(n.Component),ea=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={chartList:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(e,t){var a=this;x.getChart("all",function(e){a.setState({chartList:e})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"container mt-5"},s.a.createElement("h1",null,s.a.createElement(k.a,{icon:"chart-bar"})," Available charts"),s.a.createElement(Xt,{charts:this.state.chartList}))}}]),t}(n.Component),ta=(a(758),a(340)),aa=a.n(ta),na=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={text:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;fetch(aa.a).then(function(e){return e.text()}).then(function(t){e.setState({text:t})})}},{key:"showContent",value:function(){return this.state.text?s.a.createElement("div",{className:"text-justify"},s.a.createElement(He.a,{source:this.state.text,escapeHtml:!1})):s.a.createElement(K,null)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"jumbotron"},s.a.createElement("div",{className:"container text-center"},s.a.createElement("h1",null,"How to cite the \u201cPAThs\u201d project as a whole and single database records"))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"my-5 px-5"},this.showContent())))}}]),t}(s.a.Component);b.b.add(f.i,g.b,f.a,f.b,f.d,f.c,f.e,g.a,f.f,f.g,f.h);var sa=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(m.a,{basename:"/"},s.a.createElement(u.a,null,s.a.createElement(d.a,{path:"/map/:action?/:data?",component:ge}),s.a.createElement(L,null,s.a.createElement(d.a,{exact:!0,path:"/",component:$}),s.a.createElement(d.a,{exact:!0,path:"/:table(places|titles|works|manuscripts|authors|colophons|collections)",component:_t}),s.a.createElement(d.a,{exact:!0,path:"/:table(places|titles|works|manuscripts|authors|colophons|collections)/:id",component:Zt}),s.a.createElement(d.a,{exact:!0,path:"/search/:table(places|titles|works|manuscripts|authors|colophons|collections)/saved",component:Ie}),s.a.createElement(d.a,{exact:!0,path:"/search/:table(places|titles|works|manuscripts|authors|colophons|collections)/all",component:Be}),s.a.createElement(d.a,{exact:!0,path:"/search/:table(places|titles|works|manuscripts|authors|colophons|collections)/adv",component:Me}),s.a.createElement(d.a,{exact:!0,path:"/search/:table(places|titles|works|manuscripts|authors|colophons|collections)/encoded",component:Fe}),s.a.createElement(d.a,{exact:!0,path:"/search/:table(places|titles|works|manuscripts|authors|colophons|collections)",component:Le}),s.a.createElement(d.a,{exact:!0,path:"/charts/:id?",component:ea}),s.a.createElement(d.a,{exact:!0,path:"/cite",component:na}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(sa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[344,2,1]]]);
//# sourceMappingURL=main.27963e56.chunk.js.map