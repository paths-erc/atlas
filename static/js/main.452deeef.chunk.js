(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{284:function(e,t,a){e.exports=a.p+"static/media/erc.9fb24811.jpg"},285:function(e,t,a){e.exports=a.p+"static/media/sapienza.8672e003.jpg"},286:function(e,t,a){e.exports=a.p+"static/media/paths-logo.d0a2b412.png"},287:function(e,t,a){e.exports=a.p+"static/media/IntroMd.92d4b11a.md"},288:function(e,t,a){e.exports=a.p+"static/media/MissionStatementMd.f0422a50.md"},289:function(e,t,a){e.exports=a.p+"static/media/lod.d9b96c9b.md"},290:function(e,t,a){e.exports=a.p+"static/media/Ripple-1.7s-200px.7466db60.svg"},300:function(e,t,a){e.exports=a.p+"static/media/places.fc3e98f6.md"},301:function(e,t,a){e.exports=a.p+"static/media/places.1485b780.jpg"},302:function(e,t,a){e.exports=a.p+"static/media/manuscripts.61e517b3.md"},303:function(e,t,a){e.exports=a.p+"static/media/manuscripts.ef53f386.jpg"},304:function(e,t,a){e.exports=a.p+"static/media/works.b0b306c7.md"},305:function(e,t,a){e.exports=a.p+"static/media/titles.24cbbfac.md"},306:function(e,t,a){e.exports=a.p+"static/media/authors.9b8c6b7b.md"},307:function(e,t,a){e.exports=a.p+"static/media/authors.c5d4185c.jpg"},308:function(e,t,a){e.exports=a.p+"static/media/colophons.96843ce5.md"},314:function(e,t,a){e.exports=a(676)},341:function(e,t,a){},428:function(e,t,a){},676:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(21),l=a.n(r),i=a(3),c=a(4),o=a(6),p=a(5),m=a(7),u=a(680),h=a(681),d=a(339),b=a(106),f=a(40),g=a(131),E=a(14),v=a(2),y=a(338),O=a(678),j=a(13),_=a(69),k=a(281),w=a.n(k),C={manuscripts:{ms_has_bindings:{id:"ms_has_bindings",title:"Manuscripts with bookbindings",url:"manuscripts?verb=search&type=encoded",data:{q_encoded:btoa("`bindings`='1'")}}},map:{discovery_places:{id:"discovery_places",title:"Manuscript discovery places",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:" JOIN paths__places as p ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = p.id JOIN `paths__m_msplaces` as mp ON `mp`.`table_link`= 'paths__manuscripts' AND `p`.`id` = `mp`.`place` ","fields[paths__geodata.geometry]":"Geometry","fields[p.id]":"Id","fields[p.name]":"Name","fields[p.pleiades]":"Pleiades Id","fields[p.typology]":"Site typology","fields[mp.type]":"Place type","fields[count(mp.id_link)]":"Tot ms",group:"p.id",limit_start:"0",limit_end:"500",q_encoded:btoa(" mp.type = 'discovery' ")}},storage_places:{id:"storage_places",title:"Manuscript storage places",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:" JOIN paths__places as p ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = p.id JOIN `paths__m_msplaces` as mp ON `mp`.`table_link`= 'paths__manuscripts' AND `p`.`id` = `mp`.`place` ","fields[paths__geodata.geometry]":"Geometry","fields[p.id]":"Id","fields[p.name]":"Name","fields[p.pleiades]":"Pleiades Id","fields[p.typology]":"Site typology","fields[mp.type]":"Place type","fields[count(mp.id_link)]":"Tot ms",group:"p.id",limit_start:"0",limit_end:"500",q_encoded:btoa(" mp.type = 'storage' ")}},production_places:{id:"production_places",title:"Manuscript production places",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:" JOIN paths__places as p ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = p.id JOIN `paths__m_msplaces` as mp ON `mp`.`table_link`= 'paths__manuscripts' AND `p`.`id` = `mp`.`place` ","fields[paths__geodata.geometry]":"Geometry","fields[p.id]":"Id","fields[p.name]":"Name","fields[p.pleiades]":"Pleiades Id","fields[p.typology]":"Site typology","fields[mp.type]":"Place type","fields[count(mp.id_link)]":"Tot ms",group:"p.id",limit_start:"0",limit_end:"500",q_encoded:btoa(" mp.type = 'production' ")}},all_ms_places:{id:"all_ms_places",title:"All places connected to manuscripts",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:" JOIN paths__places as p ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = p.id JOIN  (SELECT * FROM `paths__m_msplaces` GROUP BY `id_link`, `place`) as mp ON `mp`.`table_link`= 'paths__manuscripts' AND `p`.`id` = `mp`.`place` ","fields[paths__geodata.geometry]":"Geometry","fields[p.id]":"Id","fields[p.name]":"Name","fields[p.pleiades]":"Pleiades Id","fields[p.typology]":"Site typology","fields[mp.type]":"Place type","fields[count(mp.id_link)]":"Tot ms",group:"p.id",limit_start:"0",limit_end:"500",q_encoded:btoa(" 1 ")}},bishoprics:{id:"bishoprics",title:"Bishoprics",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:"JOIN paths__places ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = paths__places.id","fields[paths__geodata.geometry]":"Geometry","fields[paths__places.id]":"Id","fields[paths__places.name]":"Name","fields[paths__places.pleiades]":"Pleiades Id","fields[paths__places.typology]":"Site typology",q_encoded:btoa("`paths__places`.`episcopalsee`=1 LIMIT 0, 100")}},multi_stratified:{id:"multi_stratified",title:"Multi stratified sites",url:"geodata?verb=search&geojson=true&type=encoded",data:{join:"JOIN `paths__places` ON `paths__geodata`.`table_link` = 'paths__places' AND `paths__geodata`.`id_link` = `paths__places`.`id` JOIN (SELECT `id_link`, count(id) as tot from `paths__m_placefase` GROUP BY `id_link` ORDER BY `tot` DESC LIMIT 0,10) as t ON `t`.`id_link` = `paths__geodata`.`id_link` ","fields[paths__geodata.geometry]":"Geometry","fields[paths__places.id]":"Id","fields[paths__places.name]":"Name","fields[paths__places.pleiades]":"Pleiades Id","fields[paths__places.typology]":"Site typology",q_encoded:btoa("1 ORDER BY `t`.`tot` DESC")}}}},N="https://db-dev.bradypus.net/api/paths/";"localhost"===window.location.hostname&&(N="http://db.localhost/api/paths/");var x=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"getData",value:function(e,t,a){e=N+e,w()({method:"post",url:e,params:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){a(e.data)}).catch(function(e){e instanceof Error?console.log(e.message):console.log(e.data)})}},{key:"getBaseUrl",value:function(){return N}},{key:"getUniqueVal",value:function(e,t,a,n){this.getData("../v2/paths/"+e,{verb:"getUniqueVal",tb:e.replace("paths__",""),fld:t,s:a},function(e){n(e)},!0)}},{key:"getSaved",value:function(e,t,a,n){"undefined"!==typeof C[e][t]?(C[e][t].data.page=a,this.getData(C[e][t].url,C[e][t].data,function(a){n(a,C[e][t].title)})):n({status:"error",text:"No saved query found for id: ".concat(e,".").concat(t)})}},{key:"getSimple",value:function(e,t,a,n,s,r){var l={verb:"search",type:"advanced",page:s,"adv[a0][fld]":t,"adv[a0][operator]":n?"=":"LIKE","adv[a0][value]":a};this.getData(e,l,function(e){r(e)},!0)}},{key:"getAdv",value:function(e,t,a,n){var s={verb:"search",type:"advanced",page:a};Object.entries(t).forEach(function(e){var t=Object(_.a)(e,2),a=t[0],n=t[1];s["adv[".concat(a,"][fld]")]=n.f,s["adv[".concat(a,"][value]")]=n.v,s["adv[".concat(a,"][operator]")]=n.o,s["adv[".concat(a,"][connector]")]=n.c}),this.getData(e,s,function(e){n(e)},!0)}},{key:"getStr",value:function(e,t,a,n){this.getData(e,{verb:"search",type:"fast",string:t,page:a},function(e){n(e,"Search ["+t+"] in "+e.head.table_label)},!0)}},{key:"getByEncodedSql",value:function(e,t,a,n){this.getData(e,{verb:"search",type:"encoded",q_encoded:t,page:a},function(e){n(e)},!0)}},{key:"getAll",value:function(e,t,a){this.getData(e,{verb:"search",type:"all",page:t},function(e){a(e)})}},{key:"getOne",value:function(e,t,a){this.getData("../v2/paths",{tb:e,verb:"read",id:t},function(e){a(e)})}},{key:"inspect",value:function(e,t){this.getData("../v2/paths",{tb:e,verb:"inspect"},function(e){t(e)})}},{key:"getChart",value:function(e,t){this.getData("../v2/paths/"+e,{id:e,verb:"getChart"},function(e){t(e)})}},{key:"getPlaces",value:function(e,t){var a={join:"JOIN paths__places ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = paths__places.id","fields[paths__geodata.geometry]":"Geometry","fields[paths__places.id]":"Id","fields[paths__places.name]":"Name","fields[paths__places.pleiades]":"Pleiades Id","fields[paths__places.typology]":"Site typology",q_encoded:btoa(e?e.replace(/`(.*)`/gi,"`paths__places`.`$1`"):" 1 LIMIT 0, 500")};this.getData("geodata?verb=search&geojson=true&type=encoded",a,function(e){t(e)})}},{key:"getMsPlaces",value:function(e,t){var a={join:" JOIN paths__places ON paths__geodata.table_link = 'paths__places' AND paths__geodata.id_link = paths__places.id JOIN `paths__m_msplaces` ON `paths__m_msplaces`.`table_link`= 'paths__manuscripts' AND `paths__places`.`id` = `paths__m_msplaces`.`place` ","fields[paths__geodata.geometry]":"Geometry","fields[paths__places.id]":"Id","fields[paths__places.name]":"Name","fields[paths__places.pleiades]":"Pleiades Id","fields[paths__places.typology]":"Site typology","fields[paths__m_msplaces.type]":"Place type",group:"paths__places.id",limit_start:"0",limit_end:"500",q_encoded:btoa(" `paths__m_msplaces`.`id_link` IN (SELECT `id` FROM `paths__manuscripts` WHERE "+e+" )")};this.getData("geodata?verb=search&geojson=true&type=encoded",a,function(e){t(e)})}}]),e}(),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).toggle=a.toggle.bind(Object(E.a)(Object(E.a)(a))),a.state={isOpen:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(v.D,{color:"dark",dark:!0,expand:"md",className:"fixed-top"},s.a.createElement(v.E,{to:"/",tag:y.a},"PAThs"),s.a.createElement(v.F,{onClick:this.toggle}),s.a.createElement(v.k,{isOpen:this.state.isOpen,navbar:!0},s.a.createElement(v.A,{navbar:!0},s.a.createElement(v.B,null,s.a.createElement(v.C,{style:{backgroundColor:"#cc545a",color:"#fff"},to:"/map",tag:O.a},s.a.createElement(j.a,{icon:"map"})," Atlas")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/places",tag:O.a},"Places")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/manuscripts",tag:O.a},"Manuscripts")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/works",tag:O.a},"Works")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/authors",tag:O.a},"Authors")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/titles",tag:O.a},"Titles")),s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/colophons",tag:O.a},"Colophons"))),s.a.createElement(v.A,{className:"ml-auto",navbar:!0},s.a.createElement(v.B,null,s.a.createElement(v.C,{to:"/charts",tag:O.a},s.a.createElement(j.a,{icon:"chart-bar"})," Charts")),s.a.createElement(v.L,{nav:!0,inNavbar:!0},s.a.createElement(v.n,{nav:!0,caret:!0},s.a.createElement(j.a,{icon:"share-alt"})," LOD"),s.a.createElement(v.m,{right:!0},s.a.createElement(v.l,{target:"_blank",href:x.getBaseUrl()+"places?verb=pelagios-void"},"Pelagios VoID"),s.a.createElement(v.l,{target:"_blank",href:x.getBaseUrl()+"places?verb=search&type=encoded&q_encoded=MSBMSU1JVCAwLCA1MDA=&fullRecords=true&format=turtle"},"Places")))))))}}]),t}(n.Component),D=a(284),P=a.n(D),A=a(285),B=a.n(A),I=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("footer",{className:"mt-5 bg-dark text-white p-3"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("p",null,"Tracking Papyrus and Parchment Paths",s.a.createElement("br",null),s.a.createElement("span",{className:"lead",style:{color:"#ffab00"}},"An Archaeological Atlas of Coptic Literature"),s.a.createElement("br",null),s.a.createElement("small",null,"Literary Texts in their Geographical Context:",s.a.createElement("br",null),"Production, Copying, Usage, Dissemination and Preservation"))),s.a.createElement("div",{className:"col text-right"},s.a.createElement("p",null,"An ",s.a.createElement("a",{href:"https://erc.europa.eu/",target:"_blank",rel:"noopener noreferrer",title:"European Research Council"},"ERC")," funded project hosted at the ",s.a.createElement("a",{href:"https://www.uniroma1.it",target:"_blank",rel:"noopener noreferrer",title:"Sapienza University of Rome"},"Sapienza University of Rome")),s.a.createElement("p",null,"Principal Investigator ",s.a.createElement("a",{href:"http://www.lettere.uniroma1.it/users/paola-buzi",title:"Paola Buzi",target:"_blank",rel:"noopener noreferrer"},"Paola Buzi")," [",s.a.createElement("a",{href:"mailto:paola.buzi@uniroma1.it",title:"Email to Paola Buzi"},"paola.buzi(at)uniroma1.it"),"]"),s.a.createElement("p",null,s.a.createElement("a",{href:"http://paths.uniroma1.it/",target:"_blank",rel:"noopener noreferrer",title:"PAThs\u2019 web site"},"paths.uniroma1.it")))),s.a.createElement(v.J,{className:"my-3"},s.a.createElement(v.j,{xs:{size:6},md:{size:3,offset:3}},s.a.createElement("img",{src:B.a,alt:"Sapienza Universit\xe0 di Roma",className:"img-fluid"})),s.a.createElement(v.j,{xs:{size:6},md:{size:3}},s.a.createElement("img",{src:P.a,alt:"European Research Council",className:"img-fluid"}))),s.a.createElement("div",{className:"text-center"},s.a.createElement("p",{className:"text-secondary"},s.a.createElement("small",null,s.a.createElement("a",{rel:"license",href:"http://creativecommons.org/licenses/by/4.0/"},s.a.createElement("img",{alt:"Creative Commons License",style:{borderWidth:0},src:"https://i.creativecommons.org/l/by/4.0/88x31.png"}),s.a.createElement("br",null),"This work is licensed under a Creative Commons Attribution 4.0 International License"),".")),s.a.createElement("a",{href:"https://github.com/paths-erc/atlas",title:"Fork PAThs\u2019 Atlas on Github",target:"_blank",rel:"noopener noreferrer"},s.a.createElement(j.a,{icon:["fab","github"],size:"2x"})," Fork on Github"))))}}]),t}(n.Component),R=(a(341),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(S,{location:this.props.location}),s.a.createElement("main",{role:"main",className:"maxHeight"},this.props.children),s.a.createElement(I,null))}}]),t}(s.a.Component)),L=a(135),T=a.n(L),M=a(286),F=a.n(M),q=a(287),z=a.n(q),U=a(288),J=a.n(U),H=a(289),G=a.n(H),V=a(290),W=a.n(V),Q=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={width:this.props.width?this.props.width:"100px"};return s.a.createElement("span",null,s.a.createElement("img",{src:W.a,style:e,alt:"Loading..."}),"Loading...")}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={text:{},titles:[{id:"intro",title:"Introduction",path:z.a},{id:"missionstatement",title:"Mission Statement",path:J.a},{id:"lod",title:"Linked Open Data",path:G.a}]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.state.titles.map(function(t){return fetch(t.path).then(function(e){return e.text()}).then(function(a){var n=e.state.text;n[t.id]=a,e.setState({text:n})}),!0})}},{key:"showContentAndToc",value:function(){var e=this;return this.state.text==={}?s.a.createElement(Q,null):s.a.createElement("div",null,s.a.createElement("div",{className:"border p-3 d-inline-block bg-light float-right ml-5 mb-5"},s.a.createElement("h4",null,"Table of contents"),s.a.createElement("ul",{className:"p-0 m-0"},this.state.titles.map(function(e,t){return s.a.createElement("li",{key:t,style:{listStyle:"none"}},s.a.createElement("a",{href:"#"+e.id},e.title))}))),this.state.titles.map(function(t,a){return s.a.createElement("div",{key:a,className:"text-justify"},s.a.createElement("h1",{id:t.id,className:"mt-5"},t.title),s.a.createElement(T.a,{source:e.state.text[t.id],escapeHtml:!1}))}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"jumbotron"},s.a.createElement("div",{className:"container text-center"},s.a.createElement("img",{className:"img-fluid",src:F.a,alt:"Tracking Papyrus and Parchment Paths. An Archaeological Atlas of Coptic Literature. Literary Texts in their Geographical Context: Production, Copying, Usage, Dissemination and Preservation"}))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"my-5 px-5"},this.showContentAndToc())))}}]),t}(s.a.Component),Y=a(90),Z=a(191),$=a(193),X=a(190),ee=a(20),te=a.n(ee),ae=a(291),ne=a.n(ae),se=a(109),re=a(11),le=a.n(re),ie=a(197),ce=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.places&&this.props.places.features?s.a.createElement("div",{className:"mt-3"},s.a.createElement("h5",null,"Found ",this.props.places.features.length," places"),s.a.createElement("ol",null,this.props.places.features.map(function(e,t){return s.a.createElement("li",{key:t,className:"border-bottom border-info mb-3 pb-1"},s.a.createElement("strong",null,e.properties.name),s.a.createElement("br",null),s.a.createElement("small",null,s.a.createElement("span",{className:"coptic"},e.properties.copticname)),["greekname","egyptianname"].map(function(t,a){return e[t]?s.a.createElement("div",{key:a},s.a.createElement("small",null,e.properties[t])):null}),e.properties["count(mp.id_link)"]?s.a.createElement("div",{className:"text-right"},s.a.createElement(v.b,{color:"secondary"},e.properties["count(mp.id_link)"]," manuscripts related")):null,s.a.createElement("div",null,s.a.createElement("small",null,s.a.createElement(j.a,{icon:"id-badge"})," ",s.a.createElement(y.a,{to:"/read/places/"+e.properties.id},"paths.places.",e.properties.id))))}))):null}}]),t}(n.Component),oe=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.urlFilter?s.a.createElement("div",null,s.a.createElement(y.a,{to:"/map",className:"btn btn-warning btn-block mt-1 mb-3"},s.a.createElement(j.a,{icon:"filter"})," Filter active. Click to disable")):null}}]),t}(n.Component),pe=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h5",null,"Marker symbols"),s.a.createElement("ul",{style:{listStyle:"none",margin:0,padding:0}},s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("span",{className:"legend-item rounded-circle",style:{background:"rgba(255, 0, 0, .9)"}}),"Discovery"),s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("span",{className:"legend-item rounded-circle",style:{background:"rgba(0, 0, 255, .9)"}}),"Production"),s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("span",{className:"legend-item rounded-circle",style:{background:"rgba(0, 255, 0, .9)"}}),"Storage")),s.a.createElement("hr",null),s.a.createElement("h5",null,"Basemaps"),s.a.createElement("ul",{style:{listStyle:"none",margin:0,padding:0}},s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("a",{href:"http://pelagios.org/maps/greco-roman/",target:"_blank",rel:"noopener noreferrer"},"Imperium, Pelagios")),s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("a",{href:"http://dare.ht.lu.se/",target:"_blank",rel:"noopener noreferrer"},"Imperium, Digital Atlas of Ancient World (DARE)")),s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("a",{href:"http://awmc.unc.edu/wordpress/",target:"_blank",rel:"noopener noreferrer"},"Ancient World Mapping Center")),s.a.createElement("li",{className:"p-1 m-1"},s.a.createElement("a",{href:"https://www.openstreetmap.org",target:"_blank",rel:"noopener noreferrer"},"Open Street Map"))))}}]),t}(n.Component),me=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("ul",{style:{listStyle:"none",margin:0,padding:0}},Object.values(C.map).map(function(e,t){return s.a.createElement("li",{key:t,className:"mb-3"},s.a.createElement(y.a,{to:"/map/saved/"+e.id},s.a.createElement(j.a,{icon:"arrow-circle-right"})," ",e.title))}))}}]),t}(n.Component),ue=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.show?s.a.createElement(v.r,{addonType:"append"},s.a.createElement(v.c,{color:"danger",onClick:this.props.onClick},s.a.createElement("span",{"aria-hidden":"true"},"\xd7"))):null}}]),t}(n.Component),he=(a(428),Y.b.BaseLayer),de="AIzaSyCLRylxZwGnCbbDE7pH-oUURTZHOre7h5o",be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={places:null,shownPlaces:null,urlFilter:!1,sidebarCollapsed:!1,selected:"home",manualFilter:""},a.placesLayerRef=s.a.createRef(),a.mapRef=s.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onSidebarClose",value:function(){this.setState({sidebarCollapsed:!0})}},{key:"onSidebarOpen",value:function(e){this.setState({sidebarCollapsed:!1,selected:e})}},{key:"pointToLayer",value:function(e,t){return new le.a.CircleMarker(t,{radius:5,weight:1,color:"#000",opacity:.9,fillColor:"discovery"===e.properties.type?"#ff0000":"storage"===e.properties.type?"#00ff00":"#0000ff",fillOpacity:.5})}},{key:"onEachFeature",value:function(e,t){var a=window.location.pathname.replace(/\/map(.*)/,"");t.bindPopup("<strong>"+e.properties.name+"</strong>"+(e.properties.copticname?'<br><span class="coptic">'+e.properties.copticname+"</span>":"")+'<br><a href="'+a+"/read/places/"+e.properties.id+'">paths/places/'+e.properties.id+"</a>")}},{key:"filterPlaces",value:function(e){var t=e.target.value,a={};if(""===t)a=this.state.places;else{a={type:"FeatureCollection",features:[]};for(var n=Object.values(this.state.places.features),s=0;s<n.length;s++){var r=n[s];Object.values(r.properties).join("|").toLowerCase().includes(t.toLowerCase())&&a.features.push(r)}}this.setState({manualFilter:t,shownPlaces:a}),this.fitMapToBounds()}},{key:"clearFiltered",value:function(){this.setState({manualFilter:"",shownPlaces:this.state.places}),this.fitMapToBounds()}},{key:"fitMapToBounds",value:function(){var e=[[19.700194,16.570227],[35.4737,32.869317]];this.placesLayerRef&&this.placesLayerRef.current.props.data.features.length>1&&(e=this.placesLayerRef.current.leafletElement.getBounds()),this.mapRef.current.leafletElement.fitBounds(e)}},{key:"fetchData",value:function(e,t){var a=this;if(e)x.getSaved("map",e,null,function(e){a.setState({places:e,shownPlaces:e,urlFilter:!0}),a.fitMapToBounds()});else if(t){var n=te.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});if("manuscripts"===n.tb)x.getMsPlaces(n.where,function(e){a.setState({places:e,shownPlaces:e,urlFilter:n.where}),a.fitMapToBounds()});else{if("places"!==n.tb)return!1;x.getPlaces(n.where,function(e){a.setState({places:e,shownPlaces:e,urlFilter:n.where}),a.fitMapToBounds()})}}else x.getPlaces(null,function(e){a.setState({places:e,shownPlaces:e}),a.fitMapToBounds()})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e!==this.props&&(this.setState({places:null,urlFilter:null}),this.fetchData(e.match.params.data,null))}},{key:"componentDidMount",value:function(){this.fetchData(this.props.match.params.data,this.props.location.search)}},{key:"render",value:function(){return s.a.createElement("div",{className:"maxHeight"},s.a.createElement(S,{location:this.props.location}),s.a.createElement("main",{role:"main",className:"maxHeight"},s.a.createElement(se.Sidebar,{id:"sidebar",collapsed:this.state.sidebarCollapsed,selected:this.state.selected,onOpen:this.onSidebarOpen.bind(this),onClose:this.onSidebarClose.bind(this),closeIcon:s.a.createElement(j.a,{icon:"caret-left"})},s.a.createElement(se.Tab,{id:"home",header:"Home",icon:s.a.createElement(j.a,{icon:"home"})},s.a.createElement("div",{style:{position:"fixed",width:"380px",background:"#fff",marginTop:"2rem"}},s.a.createElement(v.q,{className:"my-2"},s.a.createElement(v.r,{addonType:"prepend"},"Search:"),s.a.createElement(v.p,{type:"search",value:this.state.manualFilter,onChange:this.filterPlaces.bind(this),placeholder:"start typing to filter places..."}),s.a.createElement(ue,{show:this.state.manualFilter,onClick:this.clearFiltered.bind(this)}))),s.a.createElement("div",{style:{marginTop:"6rem"}},s.a.createElement(oe,{urlFilter:this.state.urlFilter,filter:this.state.filter}),s.a.createElement(ce,{places:this.state.shownPlaces}))),s.a.createElement(se.Tab,{id:"savedQueries",header:"Saved queries",icon:s.a.createElement(j.a,{icon:"save"})},s.a.createElement("div",{className:"mt-5"},s.a.createElement(me,null))),s.a.createElement(se.Tab,{id:"legend",header:"Legend",icon:s.a.createElement(j.a,{icon:"info"}),anchor:"bottom"},s.a.createElement("div",{className:"mt-5"},s.a.createElement(pe,null)))),s.a.createElement(Z.a,{className:"sidebar-map maxHeight",zoomControl:!0,ref:this.mapRef},s.a.createElement(Y.b,{position:"topright"},s.a.createElement(he,{name:"Imperium (Pelagios)"},s.a.createElement($.a,{url:"http://pelagios.org/tilesets/imperium/{z}/{x}/{y}.png"})),s.a.createElement(he,{name:"Imperium (DARE)"},s.a.createElement($.a,{url:"http://dare.ht.lu.se/tiles/imperium/{z}/{x}/{y}.png"})),s.a.createElement(he,{name:"AWMC",checked:!0},s.a.createElement($.a,{url:"http://{s}.tiles.mapbox.com/v3/isawnyu.map-knmctlkh/{z}/{x}/{y}.png"})),s.a.createElement(he,{name:"Google Maps Roads"},s.a.createElement(ie.GoogleLayer,{googlekey:de,maptype:"ROADMAP"})),s.a.createElement(he,{name:"Google Satellite"},s.a.createElement(ie.GoogleLayer,{googlekey:de,maptype:"SATELLITE"})),s.a.createElement(he,{name:"OpenStreetMap"},s.a.createElement($.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"})),this.state.places&&s.a.createElement(X.a,{ref:this.placesLayerRef,key:ne()(this.state.shownPlaces),data:this.state.shownPlaces,pointToLayer:this.pointToLayer.bind(this),onEachFeature:this.onEachFeature.bind(this)})))))}}]),t}(n.Component),fe=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.tblabel,t=this.props.tb;return s.a.createElement("div",null,s.a.createElement(v.e,{className:"mt-5 mb-5",color:"light"},s.a.createElement("div",{className:"text-right"},s.a.createElement("button",{type:"button",className:"close mr-2 mt-2","aria-label":"Close",onClick:this.props.closeFn},s.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),s.a.createElement(v.f,null,s.a.createElement(v.i,null,"Saved queries for ",e),s.a.createElement(v.u,null,Object.values(C[t]).map(function(e,a){return s.a.createElement(v.v,{key:a,className:"mb-3",tag:y.a,to:"/search/".concat(t,"/saved?q=").concat(e.id),color:"secondary"},s.a.createElement(j.a,{icon:"arrow-circle-right"})," ",e.title)})))))}}]),t}(n.Component),ge={coptic:["authors.copticname","titles.text","colophons.text"],greek:["authors.greekname"],hidden:["manuscripts.creator","collections.creator","collections.cmclname","works.id","works.creator","works.shelfmarks","works.period","works.problems","titles.creator","colophons.creator","authors.id","authors.creator","authors.cmclname","places.creator","places.hasplans","places.hasphotos","persons.id","persons.creator","biblio.creator","m_quires.id"],id_fld:{manuscripts:"id",collections:"fullname",works:"cmcl",titles:"cc",colophons:"id",authors:"name",places:"name",persons:"name"},searchDefault:{manuscripts:"id",collections:"fullname",works:"cmcl",titles:"cc",colophons:"id",authors:"name",places:"paths__m_toponyms:toponym",persons:"name"},preview:{manuscripts:["id","cmclid","tm","ldab","bookform","writingsupport"],collections:["id","fullname","cmclname","country","town","institution","name","notes"],works:["id","cmcl","title","cpg"],titles:["cc","type","workcc","msid"],colophons:["id","dialect","chronofrom","chronoto","datingcriteria"],authors:["name","title","copticname","greekname","cmclname"],places:["id","name","tm","pleiades","region","area","episcopalsee"],persons:["id","name","type","profession","patronymic"]},label:{manuscripts:"Manuscripts",collections:"Collections",works:"Works",titles:"Titles",colophons:"Colophons",authors:"Authors",places:"Places",persons:"Persons attested in colophons"}},Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={showSaved:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggleSaved",value:function(e){e.preventDefault(),this.setState({showSaved:!this.state.showSaved})}},{key:"render",value:function(){var e=this.props.tblabel?this.props.tblabel:ge.label[this.props.tb],t=this.props.tb,a=!!this.props.text&&s.a.createElement("span",{className:"subText"},this.props.text),n=[{to:"/search/"+t+"/all",icon:"list-ul",text:"Show all"},{to:"/search/"+t,icon:"search",text:"Search"},{to:"/search/"+t+"/adv",icon:"search-plus",text:"Advanced search"}];return s.a.createElement("div",null,s.a.createElement(v.s,{className:"p-4"},s.a.createElement("div",{className:"container"},s.a.createElement("h2",null,a),s.a.createElement(v.D,{color:"light",light:!0,expand:"xs",className:"ml-auto"},s.a.createElement(v.E,null,s.a.createElement("h3",null,s.a.createElement("small",null,e))),s.a.createElement(v.A,{className:"ml-auto",navbar:!0},n.map(function(e,t){return s.a.createElement(v.B,{key:t},s.a.createElement(v.C,{to:e.to,tag:y.a},s.a.createElement(j.a,{icon:e.icon})," ",e.text))}),C[t]&&s.a.createElement(v.B,null,s.a.createElement(v.C,{onClick:this.toggleSaved.bind(this),to:"#",tag:y.a},s.a.createElement(j.a,{icon:"save"})," Saved queries")))),this.state.showSaved&&s.a.createElement(fe,{tb:t,tblabel:e,closeFn:this.toggleSaved.bind(this)}))))}}]),t}(n.Component),ve=a(679),ye=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={modal:!1},a.toggle=a.toggle.bind(Object(E.a)(Object(E.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"render",value:function(){return s.a.createElement("span",null,s.a.createElement(v.c,{color:"danger",size:"sm",onClick:this.toggle},s.a.createElement(j.a,{icon:"code"})),s.a.createElement(v.w,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},s.a.createElement(v.z,{toggle:this.toggle},"Executed SQL"),s.a.createElement(v.x,null,s.a.createElement("code",null,this.props.sql))))}}]),t}(n.Component);var Oe=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=Math.ceil(a/30),r=[];n=parseInt(n,10);var l=te.a.parse(t,{ignoreQueryPrefix:!0});return n-2>0&&(l.page=1,r.push({to:e+"?"+te.a.stringify(l),text:1})),n-3>0&&r.push({to:"#",disabled:!0,text:"..."}),n-1>0&&(l.page=n-1,r.push({to:e+"?"+te.a.stringify(l),text:l.page})),l.page=n,r.push({to:e+"?"+te.a.stringify(l),active:!0,text:n}),n+1<s&&(l.page=n+1,r.push({to:e+"?"+te.a.stringify(l),text:l.page})),n+2<s&&r.push({to:"#",disabled:!0,text:"..."}),n!==s&&(l.page=s,r.push({to:e+"?"+te.a.stringify(l),text:l.page})),r}(this.props.path,this.props.search,this.props.totalRows,this.props.page);return s.a.createElement(v.G,null,s.a.createElement(v.H,null,s.a.createElement(v.I,null,"Pages: ")),e.map(function(e,t){var a={disabled:e.disabled,active:e.active};return s.a.createElement(v.H,Object.assign({},a,{key:t}),s.a.createElement(v.I,{tag:y.a,to:e.to},e.text))}))}}]),t}(n.Component),je=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.page?this.props.page:1,t=30*e-30+1,a=30*e<this.props.totalRows?30*e:this.props.totalRows;return s.a.createElement("div",{className:"mb-3"},"Showing records ",s.a.createElement("span",{className:"badge badge-primary"},t," \u2013  ",a," ")," of ",s.a.createElement("span",{className:"badge badge-success"},this.props.totalRows)," records found \xa0",s.a.createElement(ye,{sql:this.props.query}))}}]),t}(n.Component),_e=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(v.J,null,this.props.children)}}]),t}(n.Component),ke=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.record,t=this.props.fields,a=this.props.tb,n=this.props.previewFlds,r=this.props.idField;return s.a.createElement(v.j,{sm:"4"},s.a.createElement(v.e,{className:"mt-3",outline:!0,color:"dark"},s.a.createElement(v.g,{tag:"h4"},e[r]),s.a.createElement(v.f,{id:e.id},s.a.createElement(v.K,{hover:!0,size:"sm"},s.a.createElement("tbody",null,n.map(function(a,n){return s.a.createElement("tr",{key:n},s.a.createElement("th",null,t[a]),s.a.createElement("td",null,e[a]))}))),s.a.createElement("div",{className:"clearfix"},s.a.createElement("div",{className:"btn-group float-right",role:"group"},s.a.createElement(v.d,null,s.a.createElement(v.c,{size:"sm",color:"info",tag:y.a,to:"/"+["read",a,e.id].join("/")},s.a.createElement(j.a,{icon:"eye"})," View")))))))}}]),t}(n.Component),we=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.tb;return["manuscripts","places"].indexOf(e)<0?null:s.a.createElement("div",{className:"float-right mt-2"},s.a.createElement(y.a,{to:"/map?tb="+e+"&where="+encodeURI(this.props.where),className:"btn btn-warning"},s.a.createElement(j.a,{icon:"map-marker-alt"})," View on Map"))}}]),t}(n.Component),Ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={result:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"_fetchData",value:function(){var e=this;switch(this.props.type){case"simple":x.getSimple(this.props.tb,this.props.fld,this.props.val,this.props.strict,this.props.page,function(t){e.setState({result:t})});break;case"adv":x.getAdv(this.props.tb,this.props.data,this.props.page,function(t){e.setState({result:t})});break;case"all":x.getAll(this.props.tb,this.props.page,function(t){e.setState({result:t})});break;case"saved":x.getSaved(this.props.tb,this.props.query,this.props.page,function(t){e.setState({result:t})});break;case"encoded":x.getByEncodedSql(this.props.tb,this.props.q,this.props.page,function(t){e.setState({result:t})});break;default:return console.log("Unknown verb ".concat(this.props.type)),null}}},{key:"componentDidUpdate",value:function(e){this.props.page===e.page&&this.props.fld===e.fld&&this.props.val===e.val&&this.props.strict===e.strict||this._fetchData()}},{key:"componentDidMount",value:function(){this._fetchData()}},{key:"render",value:function(){var e=this;return this.state.result?"error"===this.state.result.type?s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement(v.a,{color:"danger",className:"mt-5"},s.a.createElement("h4",{className:"alert-heading"},"We are so sorry!"),s.a.createElement("p",null,"Something went terribly wrong. Please report this error to ",s.a.createElement("a",{href:"https://github.com/paths-erc/atlas/issues"},"our public repository")," in order to get it fixes as soon as possible.")),s.a.createElement("div",null,s.a.createElement("p",null,"Please file the current URL:"),s.a.createElement(v.a,{color:"info",className:"border p-3 m-2 ml-4"},window.location.href),s.a.createElement(v.a,{color:"info",className:"border p-3 m-2 ml-4"},decodeURIComponent(window.location.href)),s.a.createElement("p",null,"and the following error message"),s.a.createElement(v.a,{color:"info",className:"border p-3 m-2 ml-4"},s.a.createElement("pre",null,this.state.result.text)),s.a.createElement("p",null,"Full error trace"),s.a.createElement(v.a,{color:"info",className:"border p-3 m-2 ml-4"},s.a.createElement("pre",null,this.state.result.trace))))):0===this.state.result.head.total_rows?s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement(v.a,{color:"warning",className:"mt-5"},s.a.createElement("h4",{className:"alert-heading"},"Ooops!"),"No result found. Please reformulate the query.",s.a.createElement(v.a,{color:"info",className:"border p-3 m-2 ml-4"},this.state.result.head.query_arrived)))):s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"clearfix"},s.a.createElement(we,{tb:this.state.result.head.stripped_table,where:this.state.result.head.query_where,type:this.props.match.params.type,search:te.a.parse(this.props.location.search,{ignoreQueryPrefix:!0})}),s.a.createElement(je,{totalRows:this.state.result.head.total_rows,page:this.state.result.head.page,query:this.state.result.head.query_arrived}),s.a.createElement(Oe,{path:this.props.location.pathname,search:this.props.location.search,totalRows:this.state.result.head.total_rows,page:this.state.result.head.page})),s.a.createElement(_e,null,this.state.result.records.map(function(t,a){return s.a.createElement(ke,{idField:ge.id_fld[e.props.match.params.table],previewFlds:ge.preview[e.props.match.params.table],tb:e.props.match.params.table,record:t,fields:e.state.result.head.fields,key:a})})),s.a.createElement("div",{className:"pt-3"},s.a.createElement(Oe,{path:this.props.location.pathname,search:this.props.location.search,totalRows:this.state.result.head.total_rows,page:this.state.result.head.page})))):s.a.createElement("div",{className:"container"},s.a.createElement(Q,null))}}]),t}(n.Component),Ne=Object(ve.a)(Ce),xe=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(p.a)(t).call(this,e));var n=te.a.parse(e.location.search,{ignoreQueryPrefix:!0});return a.state={saved:n.q,page:n.page},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=te.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});this.state.page!==a.page&&this.setState({page:a.page})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Ee,{tb:this.props.match.params.table,text:C[this.props.match.params.table][this.state.saved].title}),s.a.createElement(Ne,{tb:this.props.match.params.table,query:this.state.saved,type:"saved",page:this.state.page}))}}]),t}(n.Component),Se=a(313),De=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this))).state={fields:!1,fld:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"_setState",value:function(e,t,a){var n;if(a&&(e=Object.keys(e).map(function(t){return ge.hidden.indexOf(t.replace(":",".").replace("paths__",""))<0&&{value:e[t].fullname,label:e[t].label}}).filter(function(e){return e})),t)n=e.filter(function(e){return e.value===t})[0];else{if(ge.searchDefault[this.props.tb]){var s=ge.searchDefault[this.props.tb].includes("paths")?ge.searchDefault[this.props.tb]:"paths__".concat(this.props.tb,":").concat(ge.searchDefault[this.props.tb]);n=e.filter(function(e){return e.value===s})[0]}else n=e[0];this.props.onChange(n)}this.setState({fields:e,fld:n})}},{key:"componentDidMount",value:function(){var e=this;this.props.fields?this._setState(this.props.fields,this.props.fld):x.inspect(this.props.tb,function(t){e._setState(t.fields,e.props.fld,!0)})}},{key:"render",value:function(){return this.state.fields?s.a.createElement(Se.a,{defaultValue:this.state.fld,options:this.state.fields,onChange:this.props.onChange}):null}}]),t}(n.Component),Pe=a(299),Ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this)))._handleSearch=function(e){a.setState({isLoading:!0});var t=a.props.fld.split(":"),n=Object(_.a)(t,2),s=n[0],r=n[1];x.getUniqueVal(s,r,e,function(e){a.setState({options:e,isLoading:!1})})},a.state={isLoading:!1,multiple:!1,options:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.options?s.a.createElement("div",null,s.a.createElement(Pe.AsyncTypeahead,Object.assign({},this.state,{minLength:1,placeholder:"Add a value",onSearch:this._handleSearch,onInputChange:this.props.onChange,onChange:this.props.onChange,defaultInputValue:this.props.val?this.props.val:""}))):null}}]),t}(n.Component),Be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this))).state={fld:e.fld,val:e.val,strict:!0===e.strict},a.handleSubmit=a.handleSubmit.bind(Object(E.a)(Object(E.a)(a))),a._changeField=a._changeField.bind(Object(E.a)(Object(E.a)(a))),a._changeVal=a._changeVal.bind(Object(E.a)(Object(E.a)(a))),a._changeStrict=a._changeStrict.bind(Object(E.a)(Object(E.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e!==this.props&&this.setState({fld:this.props.fld,val:this.props.val,strict:!!this.props.strict})}},{key:"_changeField",value:function(e){this.setState({fld:e.constructor===Object&&e.value?e.value:e})}},{key:"_changeVal",value:function(e){this.setState({val:e.constructor===Array?e[0]:e})}},{key:"_changeStrict",value:function(e){this.setState({strict:e.target.checked})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.val?this.props.onSubmit(this.state.fld,this.state.val,this.state.strict):alert("Insert a value to continue")}},{key:"render",value:function(){return s.a.createElement("div",{className:"my-5"},s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},s.a.createElement(v.o,{row:!0},s.a.createElement(v.j,{sm:4},s.a.createElement(De,{tb:this.props.tb,fld:this.state.fld,onChange:this._changeField})),s.a.createElement(v.j,{sm:5},s.a.createElement(Ae,{fld:this.state.fld,val:this.state.val,onChange:this._changeVal})),s.a.createElement(v.j,{sm:1},s.a.createElement(v.t,{check:!0},s.a.createElement(v.p,{name:"strict",type:"checkbox",checked:this.state.strict,onChange:this._changeStrict})," Strict")),s.a.createElement(v.j,{sm:2}," ",s.a.createElement(v.c,{type:"submit",color:"success",block:!0},"Search!")," "))))}}]),t}(n.Component),Ie=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(p.a)(t).call(this,e));var n=te.a.parse(e.location.search,{ignoreQueryPrefix:!0});return a.state={fld:n.f,val:n.v,strict:n.s&&"false"!==n.s&&"undefined"!==n.s,page:n.page},a._onFormSubmit=a._onFormSubmit.bind(Object(E.a)(Object(E.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"_onFormSubmit",value:function(e,t,a){var n="f="+encodeURIComponent(e)+(a?"&s=1":"")+"&v="+encodeURIComponent(t);this.setState({fld:e,val:t,strict:a}),this.props.history.push("/search/".concat(this.props.match.params.table,"?").concat(n))}},{key:"componentDidUpdate",value:function(e,t){var a=te.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});this.state.page!==a.page&&this.setState({page:a.page})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Ee,{tb:this.props.match.params.table,text:"Simple search"}),s.a.createElement("div",{className:"mt-3 p-1 container"},s.a.createElement(Be,{tb:this.props.match.params.table,onSubmit:this._onFormSubmit,fld:this.state.fld,val:this.state.val,strict:this.state.strict}),s.a.createElement("hr",null)),this.state.fld&&this.state.val&&s.a.createElement(Ne,{tb:this.props.match.params.table,type:"simple",fld:this.state.fld,val:this.state.val,strict:this.state.strict,page:this.state.page}))}}]),t}(n.Component),Re=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(v.p,Object.assign({type:"select",placeholder:"select"},this.props),[{k:"LIKE",v:"Contains"},{k:"=",v:"Is exactly"},{k:"NOT LIKE",v:"Does not contain"},{k:"starts_with",v:"Starts with"},{k:"ends_with",v:"Ends with"},{k:"is_empty",v:"Is empty"},{k:"is_not_empty",v:"Is not empty"},{k:">",v:"Is bigger than"},{k:"<",v:"Is smaller than"}].map(function(e,t){return s.a.createElement("option",{key:t,value:e.k},e.v)})))}}]),t}(n.Component),Le=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(v.p,Object.assign({type:"select"},this.props),s.a.createElement("option",{value:"AND"},"AND"),s.a.createElement("option",{value:"OR"},"OR")))}}]),t}(n.Component),Te=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(p.a)(t).call(this,e));var n,s=te.a.parse(e.location.search,{ignoreQueryPrefix:!0}),r=!1;return 0===Object.getOwnPropertyNames(s).length?n={a:{f:"",o:"LIKE",v:""}}:(n=s,r=!0),a.state={rows:n,showResults:r,page:!1,fields:!1},a._changeOperator=a._changeOperator.bind(Object(E.a)(Object(E.a)(a))),a._changeConnector=a._changeConnector.bind(Object(E.a)(Object(E.a)(a))),a._addRow=a._addRow.bind(Object(E.a)(Object(E.a)(a))),a._removeRow=a._removeRow.bind(Object(E.a)(Object(E.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"_removeRow",value:function(e){var t=this.state.rows;delete t[e.target.name],this.setState({rows:t,showResults:!1})}},{key:"_addRow",value:function(){var e=this.state.rows;e["a"+Math.random().toString(36).substr(2,9)]={f:"",o:"LIKE",v:"",c:"AND"},this.setState({rows:e,showResults:!1})}},{key:"_changeField",value:function(e,t){var a=this.state.rows;a[e].f=t.constructor===Object&&t.value?t.value:t,this.setState({rows:a,showResults:!1})}},{key:"_changeVal",value:function(e,t){var a=this.state.rows;a[e].v=t.constructor===Array?t[0]:t,this.setState({rows:a,showResults:!1})}},{key:"_changeOperator",value:function(e){var t=this.state.rows;t[e.target.name].o=e.target.value,this.setState({rows:t,showResults:!1})}},{key:"_changeConnector",value:function(e){var t=this.state.rows;t[e.target.name].c=e.target.value,this.setState({rows:t,showResults:!1})}},{key:"_handleSubmit",value:function(e){e.preventDefault(),this.setState({showResults:!0});var t=te.a.stringify(this.state.rows);this.props.history.push("/search/".concat(this.props.match.params.table,"/adv?").concat(t))}},{key:"componentDidUpdate",value:function(e,t){var a=te.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});this.state.page!==a.page&&this.setState({page:a.page})}},{key:"componentDidMount",value:function(){var e=this;x.inspect(this.props.match.params.table,function(t){var a=t.fields;a=Object.keys(t.fields).map(function(e){return{value:a[e].fullname,label:a[e].label}}),e.setState({fields:a})})}},{key:"render",value:function(){var e=this;return this.state.fields?s.a.createElement("div",null,s.a.createElement(Ee,{tb:this.props.match.params.table,text:"Advanced search"}),s.a.createElement("div",{className:"mt-3 p-1 container"},s.a.createElement("form",{onSubmit:this._handleSubmit.bind(this),className:"form"},Object.entries(this.state.rows).map(function(t,a){var n=t[0],r=t[1];return s.a.createElement("div",{key:a,className:"my-3"},s.a.createElement(v.J,null,s.a.createElement(v.j,{xs:1},a>0&&s.a.createElement(Le,{defaultValue:r.c,onChange:e._changeConnector,name:n})),s.a.createElement(v.j,{xs:4},s.a.createElement(De,{fields:e.state.fields,tb:e.props.match.params.table,fld:r.f,onChange:e._changeField.bind(e,n)})),s.a.createElement(v.j,{xs:2},s.a.createElement(Re,{defaultValue:r.o,name:n,onChange:e._changeOperator})),s.a.createElement(v.j,{xs:3},s.a.createElement(Ae,{fld:r.f,val:r.v,onChange:e._changeVal.bind(e,n)})),s.a.createElement(v.j,{xs:1},a+1===Object.keys(e.state.rows).length&&s.a.createElement(v.c,{type:"button",color:"info",block:!0,onClick:e._addRow},"+")),s.a.createElement(v.j,{xs:1},a>0&&s.a.createElement(v.c,{type:"button",color:"danger",block:!0,name:n,onClick:e._removeRow},"-"))))}),s.a.createElement(v.c,{type:"submit",color:"success",block:!0},"Search!")),s.a.createElement("hr",null)),this.state.showResults&&s.a.createElement(Ne,{tb:this.props.match.params.table,type:"adv",data:this.state.rows,page:this.state.page})):s.a.createElement(Q,null)}}]),t}(n.Component),Me=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=te.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});return s.a.createElement("div",null,s.a.createElement(Ee,{tb:this.props.match.params.table,text:"Custom query"}),s.a.createElement(Ne,{tb:this.props.match.params.table,type:"encoded",q:e.q,page:e.page}))}}]),t}(n.Component),Fe=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(p.a)(t).call(this,e));var n=te.a.parse(e.location.search,{ignoreQueryPrefix:!0});return a.state={page:n.page},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=te.a.parse(this.props.location.search,{ignoreQueryPrefix:!0});this.state.page!==a.page&&this.setState({page:a.page})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Ee,{tb:this.props.match.params.table,text:"View all"}),s.a.createElement(Ne,{tb:this.props.match.params.table,type:"all",page:this.state.page}))}}]),t}(n.Component),qe=a(300),ze=a.n(qe),Ue=a(301),Je=a.n(Ue),He=a(302),Ge=a.n(He),Ve=a(303),We=a.n(Ve),Qe=a(304),Ke=a.n(Qe),Ye=a(305),Ze=a.n(Ye),$e=a(306),Xe=a.n($e),et=a(307),tt=a.n(et),at=a(308),nt=a.n(at),st=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={tb:e.match.params.table,label:!1,text:!1,img:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"_updateData",value:function(e){var t=this,a=!1,n=!1,s=!1;switch(e){case"places":a=ze.a,n=Je.a,s="Places";break;case"manuscripts":a=Ge.a,n=We.a,s="Manuscripts";break;case"works":a=Ke.a,s="Works";break;case"titles":a=Ze.a,s="Titles";break;case"authors":a=Xe.a,n=tt.a,s="Authors";break;case"colophons":a=nt.a,s="Colophons";break;default:return!1}fetch(a).then(function(e){return e.text()}).then(function(a){t.setState({tb:e,text:a,img:n,label:s})})}},{key:"componentDidUpdate",value:function(e){this.props.match.params.table!==e.match.params.table&&this._updateData(this.props.match.params.table)}},{key:"componentDidMount",value:function(){this._updateData(this.state.tb)}},{key:"render",value:function(){return this.state.text?s.a.createElement("div",null,s.a.createElement("div",null,this.state.img&&s.a.createElement("img",{className:"img-fluid",src:this.state.img,alt:this.state.label})),s.a.createElement(Ee,{tblabel:this.state.label,tb:this.state.tb,text:"Introduction"}),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"my-3 px-md-5 double-column"},s.a.createElement(T.a,{source:this.state.text,escapeHtml:!1})))):s.a.createElement(Q,null)}}]),t}(n.Component),rt=a(309),lt=a.n(rt),it=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={uid:Math.random().toString(36).substr(2,5)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){null!==this.props.string&&new lt.a("canvas"+this.state.uid).parseString(this.props.string,"secondHalf"+this.state.uid)}},{key:"render",value:function(){var e=!1;return null!==this.props.string&&(e=100+this.props.string.length/3*20),s.a.createElement("div",{className:"mt-2 mb-4"},s.a.createElement(v.J,null,s.a.createElement(v.j,{id:"firstHalf"},this.props.string),s.a.createElement(v.j,{id:"secondHalf"+this.state.uid})),e&&s.a.createElement("canvas",{width:"400",height:e,id:"canvas"+this.state.uid}))}}]),t}(n.Component);var ct=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={display:"none"},a.toggleDisplay=a.toggleDisplay.bind(Object(E.a)(Object(E.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggleDisplay",value:function(){this.setState({display:"none"===this.state.display?"inline":"none"})}},{key:"render",value:function(){var e=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e||e.length<=t)return[e,!1];var n=e.substr(0,t);if(n.substr(n.length-1)===a)return[n,!1];var s=n+""+e.replace(n,"").split(a)[0];return[s+a,e.replace(s+a,"")]}(this.props.text,200,this.props.separator);return e[1]?s.a.createElement("span",null,e[0],s.a.createElement("span",{style:{display:this.state.display}},e[1]),"none"===this.state.display?"\u2026":"",s.a.createElement(v.c,{color:"info",size:"sm",className:"ml-3",onClick:this.toggleDisplay},"none"===this.state.display?"+":"-")):e[0]}}]),t}(n.Component),ot=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.val,t=this.props.label;if(!e||""===e)return null;var a=[];return this.props.coptic&&a.push("coptic"),this.props.greek&&a.push("greek"),s.a.createElement(v.J,{className:"border-bottom mt-2 mb-2 pb-1"+(null!==e?"":" d-none")},s.a.createElement(v.j,{sm:"4",md:"3"},s.a.createElement("label",{className:"font-weight-bold"},t)),s.a.createElement(v.j,null,s.a.createElement("div",{className:a.join(" ")},"Quire layout"===t?s.a.createElement(it,{string:e}):s.a.createElement(ct,{text:e,separator:this.props.coptic?"\u2027":"."}))))}}]),t}(n.Component),pt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"makeHref",value:function(e,t){return["/","search","/",e.replace("paths__",""),"/","encoded","?q="+window.btoa("SELECT * FROM "+e+" WHERE "+t)].join("")}},{key:"renderLinks",value:function(e){var t=this;return Object.entries(e).map(function(e,a){var n=Object(_.a)(e,2),r=n[0],l=n[1];return l.tot<1?null:s.a.createElement(v.v,{key:a,tag:y.a,to:t.makeHref(r,l.where)},s.a.createElement(j.a,{icon:"external-link-square-alt"})," ",l.tot+" referenced item"+(l.tot>1?"s":"")+" in "+l.tb_label)})}},{key:"renderBackLinks",value:function(e){var t=this;return!("undefined"===typeof e||e.length<1)&&Object.entries(e).map(function(e,a){var n=Object(_.a)(e,2),r=n[0],l=n[1];return!(l.tot<1)&&s.a.createElement(v.v,{key:a,tag:y.a,to:t.makeHref(r,l.where)},s.a.createElement(j.a,{icon:"external-link-square-alt"})," ",l.tot+" referenced item"+(l.tot>1?"s":"")+" in "+l.tb_label)})}},{key:"render",value:function(){return!this.props.links&&!this.props.backlinks||this.props.links.length<1&&this.props.backlinks.length<1?null:s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement(j.a,{icon:"link"})," Links"),s.a.createElement(v.f,null,s.a.createElement(v.u,null,this.renderLinks(this.props.links),this.renderBackLinks(this.props.backlinks))))}}]),t}(n.Component),mt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"makeHref",value:function(e,t){return["/","read","/",e.replace("paths__",""),"/",t].join("")}},{key:"render",value:function(){var e=this,t=this.props.links||[];return"undefined"===typeof t||t.length<1?null:s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement(j.a,{icon:"link"})," Manualy entered links"),s.a.createElement(v.f,null,s.a.createElement(v.u,null,t.map(function(t,a){return s.a.createElement(v.v,{key:a,tag:y.a,to:e.makeHref(t.tb_stripped,t.ref_id)},s.a.createElement(j.a,{icon:"external-link-square-alt"}),"  ",t.tb_label," #",t.ref_label?t.ref_label:t.ref_id)}))))}}]),t}(n.Component),ut=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.text?s.a.createElement(v.f,{className:"text-secondary",style:{fontSize:".9rem",fontStyle:"italic"}},this.props.text):null}}]),t}(n.Component),ht=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={modal:!1},a.toggle=a.toggle.bind(Object(E.a)(Object(E.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(v.e,{className:"mt-1"},s.a.createElement(v.h,{top:!0,width:"100%",src:this.props.file,onClick:this.toggle}),s.a.createElement(ut,{text:this.props.description})),s.a.createElement(v.w,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className,size:"lg"},s.a.createElement(v.x,null,s.a.createElement("div",null,s.a.createElement("img",{style:{width:"100%"},src:this.props.file,alt:this.props.description}))),s.a.createElement(v.y,null,s.a.createElement(ut,{text:this.props.description}))))}}]),t}(n.Component),dt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={shown:!1,buttonText:"Show more images"},a.toggle=a.toggle.bind(Object(E.a)(Object(E.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({shown:!this.state.shown,buttonText:"Show more images"===this.state.buttonText?"Hide":"Show more"})}},{key:"render",value:function(){var e=this;return!this.props.files||this.props.files.length<1?null:s.a.createElement("div",null,s.a.createElement("div",{style:{display:this.state.shown?"block":"none"}},this.props.files.map(function(t,a){return s.a.createElement(ht,{key:a,file:e.props.baseUrl.replace("/api/","/projects/")+"files/"+t.id+"."+t.ext,description:t.description})})),s.a.createElement("div",{className:"text-center mt-2"},s.a.createElement(v.c,{onClick:this.toggle,color:"info"},this.state.buttonText)))}}]),t}(n.Component),bt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.files||[],a=(t=t.map(function(e){return!!["jpg","png","gif","tif","tiff"].includes(e.ext)&&e})).slice(0,3),n=t.slice(3);return a.length<1?null:s.a.createElement("div",{className:"mt-3"},s.a.createElement("h5",null,"Attached images"),a.map(function(t,a){return s.a.createElement(ht,{key:a,file:e.props.baseUrl.replace("/api/","/projects/")+"files/"+t.id+"."+t.ext,description:t.description})}),s.a.createElement(dt,{files:n,baseUrl:this.props.baseUrl}))}}]),t}(n.Component);var ft=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"plugins"},s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement("h5",null,this.props.data.metadata.tb_label)),s.a.createElement(v.f,null,this.props.data.data.map(function(e,t){return s.a.createElement("span",{key:t,className:"mr-3"},(a=e.zotero.val,n=e.short.val,a?s.a.createElement("a",{href:"https://www.zotero.org/groups/2189557/erc-paths/items/itemKey/"+a,target:"_blank",rel:"noopener noreferrer"},n):n),e.details.val?", "+e.details.val:"",";");var a,n}))))}}]),t}(n.Component),gt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={modal:!1},a.toggle=a.toggle.bind(Object(E.a)(Object(E.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getHtmlModalBody",value:function(e){return s.a.createElement("dl",null,s.a.createElement("dt",null,"Country:        "),s.a.createElement("dd",null,e.country.val),s.a.createElement("dt",null,"Town:           "),s.a.createElement("dd",null,e.town.val),s.a.createElement("dt",null,"Institution:    "),s.a.createElement("dd",null,e.institution.val),s.a.createElement("dt",null,"Collection name:"),s.a.createElement("dd",null,e.name.val),s.a.createElement("dt",null,"CMCL full name: "),s.a.createElement("dd",null,e.fullsegnat.val),s.a.createElement("dt",null,"URN:            "),s.a.createElement("dd",null,s.a.createElement("code",null,"paths.shelfmarks.",e.id.val)))}},{key:"toggle",value:function(e){e.id&&this.setState({title:e.fullname.val,body:this.getHtmlModalBody(e)}),this.setState({modal:!this.state.modal})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"plugins"},s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement("h5",null,this.props.data.metadata.tb_label)),s.a.createElement(v.f,null,s.a.createElement("ul",null,this.props.data.data.map(function(t,a){return s.a.createElement("li",{key:a},s.a.createElement(v.c,{style:{margin:"0 0 4px 0",padding:0},color:"link",onClick:function(){return e.toggle(t)}},t.fullname.val),t.shelfmark.val?", "+t.shelfmark.val:"",t.pp.val?", "+t.pp.val:"")})))),s.a.createElement(v.w,{isOpen:this.state.modal,toggle:this.toggle},s.a.createElement(v.z,{toggle:this.toggle},this.state.title),s.a.createElement(v.x,null,this.state.body)))}}]),t}(n.Component),Et=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={display:"none"},a.toggleDisplay=a.toggleDisplay.bind(Object(E.a)(Object(E.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggleDisplay",value:function(){this.setState({display:"none"===this.state.display?"inline":"none"})}},{key:"render",value:function(){return s.a.createElement("span",null,s.a.createElement("span",{style:{display:this.state.display},className:"ml-3 bg-light text-muted p-2"},this.props.text),s.a.createElement(v.c,{color:"info",size:"sm",className:"ml-3",onClick:this.toggleDisplay},"none"===this.state.display?s.a.createElement(j.a,{icon:"info"}):"<"))}}]),t}(n.Component),vt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.data.length;return s.a.createElement("div",null,this.props.data.map(function(t,a){return s.a.createElement("span",{className:"mr-2 pr-2"+(e===a+1?"":" border-right border-warning"),key:a},s.a.createElement("span",{className:t.language.val.toLowerCase(),title:t.notes.val},t.toponym.val," "),t.transcription.val?s.a.createElement("span",{className:"text-muted ml-2"},"[",t.transcription.val,"]"):"",t.notes.val?s.a.createElement(Et,{text:t.notes.val}):"")}))}}]),t}(n.Component),yt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"parseNames",value:function(e){var t={};return e.forEach(function(e,a){t[e.language.val]||(t[e.language.val]=[]),t[e.language.val].push(e)}),Object.keys(t).map(function(e,a){return s.a.createElement(v.J,{className:"border-bottom mt-2 mb-2 pb-1",key:a},s.a.createElement(v.j,{sm:"4",md:"3"},s.a.createElement("label",{className:"font-weight-bold"},e)),s.a.createElement(v.j,null,s.a.createElement("div",null,s.a.createElement(vt,{data:t[e]}))))})}},{key:"render",value:function(){return s.a.createElement("div",{className:"plugins"},s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement("h5",null,this.props.data.metadata.tb_label)),s.a.createElement(v.f,null,this.parseNames(this.props.data.data))))}}]),t}(n.Component),Ot=a(146),jt={"Predynastic Egypt (4500 BC - 2950 BC)":{s:-4500,e:-2950},"Early Dynastic Egypt (2950 BC - 2670 BC)":{s:-2950,e:-2760},"Old Kingdom Egypt (2670 BC - 2168 BC)":{s:-2760,e:-2168},"First Intermediate Period Egypt (2168 BC - 2010 BC)":{s:-2168,e:-2010},"Middle Kingdom Egypt (2010 BC - 1640 BC)":{s:-2010,e:-1640},"Second Intermediate Period Egypt (1640 BC - 1548 BC)":{s:-1640,e:-1548},"New Kingdom Egypt (1548 BC - 1086 BC)":{s:-1548,e:-1086},"Third Intermediate Period Egypt (1086 BC - 664 BC)":{s:-1086,e:-664},"Late Period Egypt (664 BC - 332 BC)":{s:-664,e:-332},"Macedonian Egypt (332 BC - 304 BC)":{s:-332,e:-304},"Ptolemaic Egypt (304 BC - 30 BC)":{s:-304,e:-30},"Ptolemaic-Roman Egypt (304 BC - AD 640)":{s:-306,e:640},"Roman, early Empire (30 BC - AD 300)":{s:-30,e:300},"Late Antique (AD 300 - AD 640)":{s:300,e:640},"Early Byzantine (AD 650 - AD 850)":{s:650,e:850},"Middle Byzantine (AD 850 - AD 1200)":{s:850,e:1200},"Late Byzantine Period (AD 1200 - AD 1450)":{s:1200,e:1450},"Early Ottoman Empire (AD 1453 - AD 1683)":{s:1453,e:1683},"Ottoman Empire (AD 1513 - AD 1918)":{s:1513,e:1918}},_t={legend:{display:!1},scales:{yAxes:[{stacked:!0}],xAxes:[{ticks:{stepSize:100,max:1918}}]}},kt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(!this.props.placefase||this.props.placefase.length<1)return null;var e={labels:[],datasets:[{backgroundColor:"#fff",hoverBackgroundColor:"#fff",data:[]},{backgroundColor:"#B5353C",borderColor:"#B5353C",borderWidth:1,hoverBackgroundColor:"#B5353C",hoverBorderColor:"#B5353C",data:[]}]};return this.props.placefase.data.forEach(function(t){e.labels.push(t.fperiod.val.replace(/\s*\([^)]+\)/gi,"")),jt[t.fperiod.val]&&(jt[t.fperiod.val].e<0?(e.datasets[0].data.push(jt[t.fperiod.val].e),e.datasets[1].data.push(jt[t.fperiod.val].s)):jt[t.fperiod.val].e>0&&jt[t.fperiod.val].s<0&&(e.datasets[1].data.push(jt[t.fperiod.val].s),e.datasets[1].data.push(jt[t.fperiod.val].e),e.datasets[0].data.push(0),e.datasets[0].data.push(0),e.labels.push(t.fperiod.val.replace(/\s*\([^)]+\)/gi,""))))}),s.a.createElement("div",{className:"mt-5"},s.a.createElement("h5",null,"Other phases overview"),s.a.createElement(Ot.b,{data:e,options:_t}))}}]),t}(n.Component),wt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.props.data.data.length<1?null:"paths__m_biblio"===this.props.data.metadata.tb_id?s.a.createElement(ft,{data:this.props.data}):"paths__m_shelfmarks"===this.props.data.metadata.tb_id?s.a.createElement(gt,{data:this.props.data}):"paths__m_toponyms"===this.props.data.metadata.tb_id?s.a.createElement(yt,{data:this.props.data}):s.a.createElement("div",{className:"plugins"},s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement("h5",null,this.props.data.metadata.tb_label)),"paths__m_placefase"===this.props.data.metadata.tb_id&&s.a.createElement("div",{className:"p-1"},s.a.createElement(kt,{placefase:this.props.data})),this.props.data.data.map(function(t,a){return s.a.createElement(v.f,{key:a,className:"border border-info mb-2"},Object.keys(t).map(function(a,n){return ge.hidden.indexOf(e.props.data.metadata.tb_stripped+"."+a)>-1?null:t[a].label?s.a.createElement(ot,{val:t[a].val_label?t[a].val_label:t[a].val,label:t[a].label,key:n}):null}),s.a.createElement("hr",null))})))}}]),t}(n.Component),Ct=a(192),Nt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(this.props.geom.length<1)return null;var e=JSON.parse(this.props.geom[0].geojson).coordinates.reverse();return s.a.createElement("div",{style:{height:"300px",width:"100%"}},s.a.createElement(Z.a,{className:"sidebar-map maxHeight",center:e,zoom:11,zoomControl:!0},s.a.createElement($.a,{url:"http://pelagios.org/tilesets/imperium/{z}/{x}/{y}.png"}),this.props.geom.map(function(e,t){var a=JSON.parse(e.geojson).coordinates.reverse();return s.a.createElement(Ct.a,{position:a,key:t})})))}}]),t}(n.Component),xt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"manuscripts"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"http://coptot.manuscriptroom.com/manuscript-catalog/?gaNum="+encodeURIComponent(this.props.data.val),target:"_blank",rel:"noopener noreferrer"},s.a.createElement(j.a,{icon:"external-link-alt"})," The Digital Edition of the Coptic Old Testament"))}}]),t}(n.Component),St=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"manuscripts"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"https://www.trismegistos.org/text/"+this.props.data.val,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(j.a,{icon:"external-link-alt"})," Trismegistos texts"))}}]),t}(n.Component),Dt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"places"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"https://www.trismegistos.org/place/"+this.props.data.val,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(j.a,{icon:"external-link-alt"})," Trismegistos places"))}}]),t}(n.Component),Pt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"manuscripts"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"https://www.trismegistos.org/ldab/text.php?quick="+this.props.data.val,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(j.a,{icon:"external-link-alt"})," Leuven Database of Ancient books"))}}]),t}(n.Component),At=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"places"!==this.props.tb||!this.props.data.val||this.props.data.val.length<1?null:s.a.createElement(v.v,null,s.a.createElement("a",{href:"https://pleiades.stoa.org/places/"+this.props.data.val,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(j.a,{icon:"external-link-alt"})," Pleiades"))}}]),t}(n.Component),Bt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return!this.props.rec||this.props.rec.length<1?null:s.a.createElement("div",{className:"mt-3"},s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement(j.a,{icon:["fab","hubspot"]})," External links"),s.a.createElement(v.f,null,s.a.createElement(v.u,null,s.a.createElement(xt,{data:this.props.rec.lcbm,tb:this.props.tb}),s.a.createElement(St,{data:this.props.rec.tm,tb:this.props.tb}),s.a.createElement(Pt,{data:this.props.rec.ldab,tb:this.props.tb}),s.a.createElement(Dt,{data:this.props.rec.tm,tb:this.props.tb}),s.a.createElement(At,{data:this.props.rec.pleiades,tb:this.props.tb})))))}}]),t}(n.Component),It=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={rec:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;e!==this.props&&(this.setState({rec:null}),x.getOne(e.match.params.table,e.match.params.id,function(e){t.setState({rec:e})}))}},{key:"componentDidMount",value:function(){var e=this;x.getOne(this.props.match.params.table,this.props.match.params.id,function(t){e.setState({rec:t})})}},{key:"renderTemplate",value:function(e){return"error"===e.type?s.a.createElement("pre",{className:"text-danger p-5"},e.text):(e.metadata.tb_stripped,e.core.length<1?s.a.createElement("div",{className:"container"},s.a.createElement(Ee,{tb:e.metadata.tb_stripped,tblabel:e.metadata.tb_label,text:"View record"}),s.a.createElement(v.e,{className:"mt-2"},s.a.createElement(v.g,null,s.a.createElement("h3",{className:"text-danger"},"Record paths.",e.metadata.tb_stripped,".",this.props.match.params.id,"  not found!")))):s.a.createElement("div",{className:"container"},s.a.createElement(Ee,{tb:e.metadata.tb_stripped,tblabel:e.metadata.tb_label,text:"View record"}),s.a.createElement(v.J,{className:"mt-2"},s.a.createElement(v.j,{sm:"8"},s.a.createElement(v.e,null,s.a.createElement(v.g,null,s.a.createElement("h3",null,"paths.",e.metadata.tb_stripped,".",e.core.id.val)),s.a.createElement(v.f,null,Object.values(e.core).map(function(t,a){return ge.hidden.indexOf(e.metadata.tb_stripped+"."+t.name)>-1?null:s.a.createElement(ot,{coptic:ge.coptic.indexOf(e.metadata.tb_stripped+"."+t.name)>-1,greek:ge.greek.indexOf(e.metadata.tb_stripped+"."+t.name)>-1,label:t.label,val:t.val_label?t.val_label:t.val,key:a})}),Object.keys(e.plugins).map(function(t,a){return s.a.createElement(wt,{key:a,data:e.plugins[t]})})))),s.a.createElement(v.j,{sm:"4"},s.a.createElement(Nt,{geom:e.geodata}),s.a.createElement(kt,{placefase:e.plugins.paths__m_placefase}),s.a.createElement(bt,{files:e.files,baseUrl:x.getBaseUrl()}),s.a.createElement(pt,{links:e.links,backlinks:e.backlinks}),s.a.createElement(mt,{links:e.manualLinks}),s.a.createElement(Bt,{rec:e.core,tb:e.metadata.tb_stripped})))))}},{key:"render",value:function(){return this.state.rec?s.a.createElement("div",{className:"mb-5"},this.renderTemplate(this.state.rec)):s.a.createElement("div",{className:"m-5 p-5"},s.a.createElement(Q,null))}}]),t}(n.Component),Rt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"parseData",value:function(e){var t={labels:[],datasets:[{label:"My First dataset",backgroundColor:"rgba(195,31,42,0.8)",borderColor:"rgba(195,31,42,1)",borderWidth:1,hoverBackgroundColor:"rgba(195,31,42,1)",hoverBorderColor:"rgba(195,31,42,0.8)",data:[]}]};return e.forEach(function(e){t.labels.push(e.series_name),Object.keys(e).forEach(function(a){"series_name"!==a&&(t.datasets[0].data.push(e[a]),t.datasets[0].label=a)})}),t}},{key:"render",value:function(){if(this.props.loading)return s.a.createElement("p",{className:"lead my-5 text-secondary"},"Loading chart...");if(!this.props.data)return null;var e=this.parseData(this.props.data);return s.a.createElement("div",{className:"my-5"},s.a.createElement("h2",null,this.props.name),s.a.createElement(Ot.a,{data:e,width:100,height:350,options:{maintainAspectRatio:!1}}))}}]),t}(n.Component),Lt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={name:!1,data:!1,loading:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"loadChart",value:function(e){var t=this;this.setState({loading:!0}),x.getChart(e,function(e){t.setState({name:e.name}),t.setState({data:e.data}),t.setState({loading:!1})})}},{key:"render",value:function(){var e=this;return this.props.charts?"error"===this.props.charts.type?s.a.createElement("div",{className:"text-danger mt-5 px-5"},"Sorry! There was an error getting list of chart from the database..."):s.a.createElement("div",{className:"mt-5"},s.a.createElement(Rt,{name:this.state.name,data:this.state.data,loading:this.state.loading}),s.a.createElement(v.e,null,s.a.createElement(v.f,null,s.a.createElement(v.u,null,this.props.charts.map(function(t,a){return s.a.createElement(v.v,{key:a,tag:v.c,onClick:function(){return e.loadChart(t.id)},className:"mb-3",color:"secondary"},t.name)}))))):s.a.createElement("p",{className:"lead my-5 text-secondary"},"Loading chart list...")}}]),t}(n.Component),Tt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={chartList:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(e,t){var a=this;x.getChart("all",function(e){a.setState({chartList:e})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"container mt-5"},s.a.createElement("h1",null,s.a.createElement(j.a,{icon:"chart-bar"})," Available charts"),s.a.createElement(Lt,{charts:this.state.chartList}))}}]),t}(n.Component);b.b.add(f.i,g.b,f.a,f.b,f.d,f.c,f.e,g.a,f.f,f.g,f.h);var Mt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(u.a,{basename:"atlas"},s.a.createElement(h.a,null,s.a.createElement(d.a,{path:"/map/:action?/:data?",component:be}),s.a.createElement(R,null,s.a.createElement(d.a,{exact:!0,path:"/",component:K}),s.a.createElement(d.a,{path:"/:table(places|titles|works|manuscripts|authors|colophons)",component:st}),s.a.createElement(d.a,{exact:!0,path:"/search/:table(places|titles|works|manuscripts|authors|colophons)/saved",component:xe}),s.a.createElement(d.a,{exact:!0,path:"/search/:table(places|titles|works|manuscripts|authors|colophons)/all",component:Fe}),s.a.createElement(d.a,{exact:!0,path:"/search/:table(places|titles|works|manuscripts|authors|colophons)/adv",component:Te}),s.a.createElement(d.a,{exact:!0,path:"/search/:table(places|titles|works|manuscripts|authors|colophons)/encoded",component:Me}),s.a.createElement(d.a,{exact:!0,path:"/search/:table(places|titles|works|manuscripts|authors|colophons)",component:Ie}),s.a.createElement(d.a,{exact:!0,path:"/read/:table(places|titles|works|manuscripts|authors|colophons)/:id",component:It}),s.a.createElement(d.a,{exact:!0,path:"/charts/:id?",component:Tt}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(Mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[314,2,1]]]);
//# sourceMappingURL=main.452deeef.chunk.js.map