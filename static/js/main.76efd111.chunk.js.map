{"version":3,"sources":["components/mainLayout/Header.jsx","components/mainLayout/img/erc.jpg","components/mainLayout/img/sapienza.jpg","components/mainLayout/Footer.jsx","components/mainLayout/MainTemplate.jsx","components/Home/paths-logo.png","components/Loading/Ripple-1.7s-200px.svg","components/Loading/Loading.jsx","components/ReactMarkdownPath/ReactMarkdownPath.jsx","components/Home/IntroMd.md","components/Home/Latest.md","components/Home/LogoMd.md","components/Home/MissionStatementMd.md","components/Home/lod.md","components/Home/license.md","components/Home/Home.jsx","components/Home/BrowserNotSupported.jsx","components/PathsMap/ListPlaces.jsx","components/PathsMap/UrlFilterButton.jsx","components/PathsMap/Tabs/Legend.jsx","components/Services/SavedQueries.js","components/PathsMap/Tabs/MapSavedQueries.jsx","components/PathsMap/ClearButton.jsx","components/ShowError/ShowError.jsx","components/PathsMap/Map/PathsPlaces.jsx","components/Services/Cfg/remoteGisSources.js","components/Services/Cfg/GoogleApiKey.js","components/PathsMap/Map/Defaults.js","components/PathsMap/Map/Layers.jsx","components/Services/Database/Database.jsx","components/PathsMap/PathsMap.jsx","components/SubHead/SavedQueriesList.jsx","components/Services/Cfg/Cfg.js","components/SubHead/SubHead.jsx","components/PaginateResult/PaginateResult.jsx","components/PaginateResult/PaginateResultSummary.jsx","components/Search/ItemPreview.jsx","components/Manuscripts/OpenInMap.jsx","components/Search/Results.jsx","components/Search/SearchSaved.jsx","components/Search/FldSelect.jsx","components/Search/ValueInput.jsx","components/Search/CustomSearchForm.jsx","components/Search/SearchSimple.jsx","components/Search/OperatorSelect.jsx","components/Search/ConnectorSelect.jsx","components/Search/SearchAdv.jsx","components/Search/SearchShortSQL.jsx","components/Search/SearchAll.jsx","components/Intro/places/places.md","components/Intro/places/places.jpg","components/Intro/manuscripts/manuscripts.md","components/Intro/manuscripts/manuscripts.jpg","components/Intro/works/works.md","components/Intro/works/works-without-clavis.md","components/Intro/works/works.jpg","components/Intro/titles/titles.md","components/Intro/titles/titles.jpg","components/Intro/authors/authors.md","components/Intro/authors/authors.jpg","components/Intro/colophons/colophons.md","components/Intro/colophons/colophons.jpg","components/Intro/persons/persons.md","components/Intro/persons/persons.jpg","components/Intro/collections/collections.md","components/Intro/collections/collections.jpg","components/Intro/Intro.jsx","components/Record/QuireMatrixView.jsx","components/Utils/internalLinks.jsx","components/Record/PreviewText.jsx","components/Utils/relaxedSplit.jsx","components/Record/ColophonText.jsx","components/Record/RecordCell.jsx","components/Record/PluginBiblio.jsx","components/Record/PluginShelfmarks.jsx","components/Record/PluginToponyms.jsx","components/Record/Plugin.jsx","components/Record/RecordCellDb.jsx","components/Record/Bodies/FieldSet.jsx","components/Record/Bodies/ManuscriptsBody.jsx","components/Record/Bodies/Body.jsx","components/Record/RecordLinks.jsx","components/Record/UserLinks.jsx","components/ViewFiles/Caption.jsx","components/ViewFiles/PreviewModal.jsx","components/ViewFiles/MoreImages.jsx","components/ViewFiles/Files.jsx","components/PathsMap/Map/SiteMaps.jsx","components/Record/MiniMap.jsx","components/Record/ExternalLinks/CoptOT.jsx","components/Record/ExternalLinks/TM.jsx","components/Record/ExternalLinks/TmGeo.jsx","components/Record/ExternalLinks/Ldab.jsx","components/Record/ExternalLinks/Pleiades.jsx","components/Record/ExternalLinks/CopticColophons.jsx","components/Record/ExternalLinks/Dbmnt.jsx","components/Record/ExternalLinks.jsx","components/Record/ViewOne.jsx","components/Charts/ChartView.jsx","components/Charts/ChartList.jsx","components/Charts/Charts.jsx","components/Cite/Cite.md","components/Cite/Cite.jsx","components/Api/Api.md","components/Api/Api.jsx","App.js","registerServiceWorker.js","index.js"],"names":["FixedNavbar","props","useState","isOpen","toggleOpen","Navbar","color","dark","expand","className","NavbarBrand","to","tag","Link","NavbarToggler","onClick","Collapse","navbar","Nav","NavItem","NavLink","style","backgroundColor","RRNavLink","icon","href","Footer","target","rel","title","Row","Col","xs","size","md","offset","src","Sapienza","alt","Erc","borderWidth","packageJson","version","MainTemplate","location","role","children","showUnder","Loading","width","Ripple","ReactMarkdownPath","mdText","setMdtext","useEffect","path","a","fetch","then","response","text","getMd","source","escapeHtml","Home","titles","id","latest","fontSize","padding","intro","logo","missionstatement","lod","license","imgPathsLogo","map","k","i","listStyle","BrowserNotSupported","compatibility","browser","name","os","Object","keys","ListPlaces","Component","render","this","places","features","length","e","properties","copticname","ee","ii","Badge","UrlFilterButton","urlFilter","Legend","Fragment","margin","background","makeShortSql","arr","join","discovery_places","url","data","storage_places","production_places","episcopal_sees","ms_in_graves","cemeteries","hermitages","mines","monasteries","settlements","final","section_headings","authors","bishops","manuscripts","palimpsest_ms","wandering_ms","ms_has_bindings","detached_bindings","horizontal_rolls","vertical_rolls","minor_dialects","miniature_codices","square_codices","oblong_codices","early_bohairic","fayyumic","ms_third_c","ms_forth_c","ms_fifth_c","ms_sixth_c","ms_seventh_c","works","translations_apocryphal","translations_gnostic","translations_manichaean","translations_patristic","pachomius","shenoute","translations_apocryphal_second","translations_hagiographical","classsical_translations_homilies","classsical_translations_historiae","classical_translations_acts","classical_translations_monastic","post_chalcedonian","historiographic","orig_lit_formation","orig_lit_damian_hag","orig_lit_damian_hom","poetry","orig_lit_hom","original_lit_early_islamic","original_lit_later_hag","late_liturgical","colophons","cryptography","greek_minuscule","coptic_minuscule","persons","donors","copyists","all_ms_places","bishoprics","MapSavedQueries","values","SavedQueries","ClearButton","show","InputGroupAddon","addonType","Button","aria-hidden","ShowError","modal","toggleModal","Modal","toggle","ModalHeader","ModalBody","ModalFooter","block","pointToLayer","t","col","type","includes","L","CircleMarker","radius","weight","opacity","fillColor","fillOpacity","onEachFeature","feature","layer","base","window","pathname","replace","bindPopup","on","openPopup","PathsPlaces","shownPlaces","GeoJSON","onAdd","hash","Themes","SiteMapsList","BaseLayer","LayersControl","Overlay","Layers","remotes","setRemotes","remotesArr","axiosArray","GisThemes","push","info","axios","method","all","respArr","geojson","position","TileLayer","checked","googlekey","GoogleApiKey","maptype","attribution","maxZoom","r","Math","random","toString","substr","html","entries","filter","Boolean","baseUrl","hostname","Database","params","callback","headers","res","console","log","catch","Error","message","tb","fld","string","cb","getData","verb","s","d","grp","q","page","status","val","strict","shortsql","where","forEach","v","wp","o","c","f","head","table_label","where_arr","split","shift","encodeURIComponent","ms_where","PathsMap","constructor","super","state","sidebarCollapsed","selected","manualFilter","error","mapBounds","zoom","geoJsonBounds","placesLayerRef","React","createRef","mapRef","onSidebarClose","setState","onSidebarOpen","filterPlaces","str","value","fgj","toLowerCase","fitMapToBounds","clearFiltered","bounds","_northEast","_southWest","lat","lng","pad","current","leafletElement","fitBounds","fetchData","savedQ","locationSearch","getSaved","qstring","qs","parse","search","ignoreQueryPrefix","getMsPlaces","getPlaces","onViewportChanged","getBounds","UNSAFE_componentWillReceiveProps","nextProps","match","componentDidMount","showGeoJson","textAlign","zIndex","marginTop","onAddgeoJson","collapsed","onOpen","bind","onClose","closeIcon","header","InputGroup","Input","onChange","placeholder","top","Map","zoomControl","ref","SavedQueriesList","tblabel","Card","aria-label","closeFn","CardBody","CardTitle","ListGroup","ListGroupItem","SubHead","showSaved","toggleSaved","Cfg","label","menuItems","Jumbotron","light","cursor","PaginateResult","result","queryString","tot_rows","curr_page","tot_pages","ceil","parseInt","qString","stringify","disabled","active","build_object","totalRows","Pagination","PaginationItem","PaginationLink","key","PaginateResultSummary","start_at","up_to","ItemPreviewWrapper","ItemPreview","el","record","flds","fields","preview_flds","previewFlds","id_field","idField","sm","outline","CardHeader","Table","hover","ButtonGroup","OpenInMap","indexOf","encodeURI","Results","_fetchData","getSimple","getAdv","getAll","query","componentDidUpdate","prevProps","Alert","decodeURIComponent","trace","total_rows","stripped_table","query_arrived","records","id_fld","table","preview","withRouter","SearchSaved","saved","prevState","old_qstring","new_qstring","FldSelect","_setState","fldList","selObj","fld_whitelist","searchDefault","inspect","defaultValue","options","ValueInput","isLoading","setIsLoading","setOptions","handleSearch","useCallback","getUniqueVal","defSelected","customOption","minLength","multiple","onSearch","onInputChange","defaultSelected","CustomSearchForm","handleSubmit","_changeField","_changeVal","_changeStrict","Array","event","preventDefault","onSubmit","alert","FormGroup","row","Label","check","SearchSimple","_onFormSubmit","history","OperatorSelect","ConnectorSelect","AdvSearchForm","rows","getOwnPropertyNames","showResults","_changeOperator","_changeConnector","_addRow","_removeRow","index","_handleSubmit","SearchShortSQL","SearchAll","Intro","dataMap","img","PlacesImg","mdPath","PlacesMd","ManuscriptsImg","ManuscriptsMd","WorksImg","WorksMd","WorksWithoutClavisMd","TitlesImg","TitlesMd","AuthorsImg","AuthorsMd","ColophonsImg","ColophonsMd","PersonsImg","PersonsMd","collections","CollectionsImg","CollectionsMd","hasOwnProperty","styles","height","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","QuireMatrixView","uid","Matrix","parseString","internalLinks","p1","p2","p3","p4","parseText","nl2br","dangerouslySetInnerHTML","__html","PreviewText","separator","display","setDisplay","linkedText","link","service","trim","undefined","getExternalLink","textParts","until","str1","start","cont","relaxedSplit","ColophonText","clph","colophon","clphText","setClphText","get","xml","parsedtext","content","ref_parts","formatColophon","line","RecordCell","isCoptic","coptic","isGreek","greek","colophonId","PluginBiblio","metadata","tb_label","di","zotero","short","val_label","details","images","PluginShelfmarks","getHtmlModalBody","country","town","institution","fullsegnat","fullname","body","shelfmark","pp","ToggleText","toggleDisplay","TopoCell","tot","language","notes","toponym","transcription","PluginToponyms","parseNames","obj","l","Plugin","tb_id","fi","hidden","tb_stripped","RecordCellDb","FieldSet","legend","ManuscriptBody","rec","core","cmclid","tm","ldab","lcbm","dbmnt","alias","issinglefrag","reusedinbinding","stratigraphy","modernhistory","contents","plugins","dialect","dialectnotes","datingsource","chronofrom","chronoto","datingcriteria","bookform","writingsupport","leaftotextant","fragtot","fragdim","leaftotestimated","quiresextant","gennotes","columns","colnotes","linespercolumn","charsperline","alignment","alignmentnotes","leafw","leafh","framew","frameh","intercolumnium","marginup","marginlow","marginin","marginout","marginleft","marginright","heighttenlines","prophw","propwt","dimnotes","quirenotes","quiresig","quiretype","quireposition","quirenrnotes","pagination","pagtype","pagposition","pagnote","foliation","foltype","folposition","folnotes","handstot","lectionalsigns","structuralsigns","signsnotes","abbreviations","abbrnotes","ruling","rulingtype","rulingtool","pricking","rulingnotes","leaftabs","leaftabsnotes","kolleseis","kolleseseisdescr","tracesnotes","kollno","kolldim","bindings","covers","coversnotes","sewings","sewingtype","holesno","holesarrangement","holesnotes","pgmcol","pgmlocation","pgmnotes","blktype","blklocation","blknotes","marginalnotes","greekminuscule","greekminusculenotes","palimpsest","palimpsestnotes","decortype","decorsubj","decorationdescr","enlargedinitials","restancient","restmodern","sourceinfo","editors","lastmodified","ViewOne","renderTemplate","RecordLinks","makeHref","renderLinks","links","renderBackLinks","backlinks","UserLinks","ref_id","ref_label","Caption","fontStyle","PreviewModal","CardImg","file","description","MoreImages","shown","buttonText","files","ext","Files","firstFiles","slice","otherFiles","getStyle","p","reconstr","dashArray","phase","part","fill","place","subplace","subsource","SiteMaps","siteId","siteMaps","addSiteMaps","startsWith","gj","MiniMap","geom_arr","geom","JSON","coordinates","reverse","center","coord","Marker","Popup","CoptOT","TM","TmGeo","Ldab","Pleiades","CopticColophons","Dbmnt","ExternalLinks","tmgeo","pleiades","copied","getOne","onCopy","setTimeout","geodata","getBaseUrl","manualLinks","ChartView","parseData","labels","datasets","borderColor","hoverBackgroundColor","hoverBorderColor","series_name","loading","maintainAspectRatio","ChartList","loadChart","getChart","charts","Charts","chartList","Cite","cite","Api","api","detect","ReactGA","initialize","pageview","notSupported","bName","bVersion","App","basename","component","exact","SearchAdv","library","add","fas","fab","faArrowCircleRight","faBug","faEye","faExternalLinkSquareAlt","faFilter","faGithub","faIdBadge","faLink","faMapMarkerAlt","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"2jEAMe,SAASA,EAAYC,GAAQ,MAAD,EAEZC,oBAAS,GAFG,mBAElCC,EAFkC,KAE1BC,EAF0B,KAIzC,OACM,8BACE,eAACC,EAAA,EAAD,CAAQC,MAAM,OAAOC,MAAI,EAACC,OAAO,KAAKC,UAAU,YAAhD,UACE,cAACC,EAAA,EAAD,CAAaC,GAAG,IAAIC,IAAKC,IAAzB,mBACA,cAACC,EAAA,EAAD,CAAeC,QAAS,KAAMX,GAAYD,MAC1C,eAACa,EAAA,EAAD,CAAUb,OAASA,EAASc,QAAM,EAAlC,UACE,eAACC,EAAA,EAAD,CAAKD,QAAM,EAAX,UACE,cAACE,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,CAASC,MAAO,CAAEC,gBAAiB,UAAWhB,MAAO,QAASK,GAAG,2BAA2BC,IAAKW,IAAjG,UACE,cAAC,IAAD,CAAiBC,KAAK,QADxB,cAIF,cAACL,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAST,GAAG,UAAUC,IAAKW,IAA3B,sBAGF,cAACJ,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAST,GAAG,eAAeC,IAAKW,IAAhC,2BAEF,cAACJ,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAST,GAAG,SAASC,IAAKW,IAA1B,qBAEF,cAACJ,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAST,GAAG,WAAWC,IAAKW,IAA5B,uBAEF,cAACJ,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAST,GAAG,UAAUC,IAAKW,IAA3B,sBAEF,cAACJ,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAST,GAAG,aAAaC,IAAKW,IAA9B,yBAEF,cAACJ,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAST,GAAG,WAAWC,IAAKW,IAA5B,uBAEF,cAACJ,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAST,GAAG,eAAeC,IAAKW,IAAhC,8BAIJ,eAACL,EAAA,EAAD,CAAKT,UAAU,UAAUQ,QAAM,EAA/B,UACE,cAACE,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAASK,KAAK,2BAAd,uBAEF,cAACN,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAST,GAAG,QAAQC,IAAKW,IAAzB,iCAEF,cAACJ,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAST,GAAG,OAAOC,IAAKW,IAAxB,8B,+BCzDH,MAA0B,gCCA1B,MAA0B,qCCQ1B,SAASG,IAEtB,OACE,wBAAQjB,UAAU,8BAAlB,SACE,sBAAKA,UAAU,YAAf,UACE,sBAAKA,UAAU,MAAf,UACE,qBAAKA,UAAU,MAAf,SACE,qEAAuC,uBACvC,sBAAOA,UAAU,OAAOY,MAAO,CAAEf,MAAO,WAAxC,0DAAuG,uBACvG,kFAAoD,uBAApD,qEAGF,sBAAKG,UAAU,iBAAf,UACE,oCAAM,mBAAGgB,KAAK,yBAAyBE,OAAO,SAASC,IAAI,sBAAsBC,MAAM,4BAAjF,iBAAN,iCAAwJ,mBAAGJ,KAAK,0BAA0BE,OAAO,SAASC,IAAI,sBAAsBC,MAAM,8BAAlF,4CACxJ,wDAA0B,mBAAGJ,KAAK,kDAAkDI,MAAM,aAAaF,OAAO,SAASC,IAAI,sBAAjG,wBAA1B,KAAiK,mBAAGH,KAAK,gCAAgCI,MAAM,sBAA9C,uCAAjK,OACA,4BACE,mBAAGJ,KAAK,4BAA4BE,OAAO,SAASC,IAAI,sBAAsBC,MAAM,uBAApF,uCAON,eAACC,EAAA,EAAD,CAAKrB,UAAU,OAAf,UACE,cAACsB,EAAA,EAAD,CAAKC,GAAI,CAAEC,KAAM,GAAKC,GAAI,CAACD,KAAM,EAAGE,OAAQ,GAA5C,SAAgD,qBAAKC,IAAKC,EAAUC,IAAI,iCAA8B7B,UAAU,gBAChH,cAACsB,EAAA,EAAD,CAAKC,GAAI,CAAEC,KAAM,GAAKC,GAAI,CAACD,KAAM,GAAjC,SAAqC,qBAAKG,IAAKG,EAAKD,IAAI,4BAA4B7B,UAAU,mBAGhG,sBAAKA,UAAU,cAAf,UACE,oBAAGA,UAAU,GAAb,uEACsD,uBACpD,gCACE,oBAAGmB,IAAI,UAAUH,KAAK,oDAAtB,mEACwD,uBADxD,kFAEiF,uBAC/E,qBAAKa,IAAI,2BAA2BjB,MAAO,CAACmB,YAAY,GAClDJ,IAAI,mEAKhB,yCACYK,EAAYC,QAAS,uBAC/B,mBAAGjB,KAAK,oDAAoDE,OAAO,SAASC,IAAI,sBAAhF,kC,OC5CG,SAASe,EAAc1C,GACpC,OACE,gCACE,cAAC,EAAD,CAAQ2C,SAAW3C,EAAM2C,WACvB,sBAAMC,KAAK,OAAOpC,UAAU,YAA5B,SACIR,EAAM6C,WAEZ,cAACpB,EAAD,IACA,cAAC,IAAD,CAAaqB,UAAW,IAAxB,SACA,cAAC,IAAD,CAAiBvB,KAAK,kBAAkBS,KAAK,YChBpC,UAA0B,uC,6CCA1B,MAA0B,8CCK1B,SAASe,EAAQ/C,GAE9B,MAAMoB,EAAQ,CACZ4B,MAAOhD,EAAMgD,MAAQhD,EAAMgD,MAAQ,SAErC,OACE,iCACE,qBAAKb,IAAKc,EAAQ7B,MAAOA,EAAOiB,IAAI,eAEf,KAAnBrC,EAAM6C,SAAkB7C,EAAM6C,SAAW,iDCLlC,SAASK,EAAkBlD,GAAO,MAAD,EAElBC,qBAFkB,mBAEvCkD,EAFuC,KAE/BC,EAF+B,KAa9C,OATAC,qBAAW,KAAM,4CACf,WAAqBC,GAArB,SAAAC,EAAA,sEACQC,MAAMF,GAAMG,MAAMC,GAAaA,EAASC,SAAQF,MAAME,IAC1DP,EAAUO,MAFd,4CADe,uBAAC,SAAD,2BAMfC,CAAM5D,EAAMsD,QACX,CAACtD,EAAMsD,OAENH,EACK,cAAC,IAAD,CAAeU,OAAQV,EAAQW,YAAY,IAE3C,cAACf,EAAD,ICzBI,UAA0B,mCCA1B,MAA0B,kCCA1B,MAA0B,kCCA1B,MAA0B,8CCA1B,MAA0B,+BCA1B,MAA0B,mCCY1B,SAASgB,IACrB,IAAMC,EAAS,CACb,CACEC,GAAQ,SACRrC,MAAQ,6CACR0B,KAAQY,EACR9C,MAAQ,CACNf,MAAO,UACP8D,SAAU,QACV9C,gBAAiB,UACjB+C,QAAS,SAGb,CACEH,GAAQ,QACRrC,MAAQ,eACR0B,KAAQe,GAEV,CACEJ,GAAQ,OACRrC,MAAQ,OACR0B,KAAQgB,GAEV,CACEL,GAAQ,mBACRrC,MAAQ,oBACR0B,KAAQiB,GAEV,CACEN,GAAQ,MACRrC,MAAQ,mBACR0B,KAAQkB,GAEV,CACEP,GAAQ,UACRrC,MAAQ,wBACR0B,KAAQmB,IAgCZ,OACE,gCACE,qBAAKjE,UAAU,YAAf,SACE,qBAAKA,UAAU,wBAAf,SACE,qBAAKA,UAAU,sBAAsB2B,IAAMuC,EAAerC,IAAI,qMAGlE,qBAAK7B,UAAU,YAAf,SACE,qBAAKA,UAAU,YAAf,SAjCF,gCACE,sBAAKA,UAAU,kEAAf,UACE,mDACA,oBAAIA,UAAU,UAAd,SACGwD,EAAOW,KAAK,SAACC,EAAGC,GACf,OACE,oBAAYzD,MAAO,CAAE0D,UAAW,QAAhC,SACE,mBAAGtD,KAAO,IAAMoD,EAAEX,GAAlB,SAAyBW,EAAEhD,SADpBiD,WAOfb,EAAOW,KAAK,SAACC,EAAGC,GAChB,OACE,sBAAarE,UAAU,eAAeY,MAAOwD,EAAExD,MAA/C,UACE,oBAAI6C,GAAKW,EAAEX,GAAKzD,UAAU,OAA1B,SAAmCoE,EAAEhD,QACrC,cAACsB,EAAD,CAAmBI,KAAMsB,EAAEtB,SAFnBuB,gBClER,SAASE,EAAoB/E,GAE1C,MAAMgF,EAAgBhF,EAAMgF,cACtBC,EAAgBjF,EAAMiF,QAG5B,OACE,qBAAKzE,UAAU,wBAAf,SACE,sBAAKA,UAAU,YAAf,UACE,qFACA,iDAAmB,+BAAQyE,EAAQC,OAAnC,aAA0D,+BAAQD,EAAQxC,UAA1E,OAA8F,+BAAQwC,EAAQE,KAA9G,OACA,0GAEA,gCACE,oDACA,8BAEEC,OAAOC,KAAKL,GAAeL,KAAI,CAACE,EAAGD,IAE/B,8BAE0B,MAArBI,EAAcH,GAAeA,EAAI,OAASG,EAAcH,GAAK,IAFxDD,UAWlB,qBAAKpE,UAAU,uBAAf,SACE,qBAAKA,UAAU,sBAAsB2B,IAAMuC,EAAerC,IAAI,wM,6EC9BzD,MAAMiD,WAAmBC,YAEtCC,SAEE,OAAKC,KAAKzF,MAAM0F,QAAWD,KAAKzF,MAAM0F,OAAOC,SAI3C,sBAAKnF,UAAU,OAAf,UACE,wCAAYiF,KAAKzF,MAAM0F,OAAOC,SAASC,OAAvC,aACA,6BAEIH,KAAKzF,MAAM0F,OAAOC,SAAShB,KAAK,CAACkB,EAAGhB,IAE3B,qBAAYrE,UAAU,sCAAtB,UACL,iCAAUqF,EAAEC,WAAWZ,OACvB,uBAAM,gCAAO,sBAAM1E,UAAU,SAAhB,SAA0BqF,EAAEC,WAAWC,eAElD,CAAC,YAAa,gBAAgBpB,KAAK,CAACqB,EAAIC,IAClCJ,EAAEG,GACI,8BAAc,gCAAQH,EAAEC,WAAWE,MAAzBC,GAEX,OAMXJ,EAAEC,WAAF,QAAqD,MAA3BD,EAAEC,WAAF,OAAkC,qBAAKtF,UAAU,aAAf,SAA4B,eAAC0F,GAAA,EAAD,CAAO7F,MAAM,YAAb,UAA2BwF,EAAEC,WAAF,OAA3B,4BAAyF,KAGnL,8BAAK,kCAAO,cAAC,IAAD,CAAiBvE,KAAK,aAA7B,IAA2C,eAAC,IAAD,CAAMb,GAAK,WAAamF,EAAEC,WAAW7B,GAArC,0BAAwD4B,EAAEC,WAAW7B,aAjBvGY,UATjB,MCLE,SAASsB,GAAiBnG,GAEvC,OAAIA,EAAMoG,UAEN,8BACE,eAAC,IAAD,CAAM1F,GAAG,OAAOF,UAAU,sCAA1B,UACE,cAAC,IAAD,CAAiBe,KAAK,WADxB,wCAOG,KCfI,MAAM8E,WAAed,YAElCC,SAEE,OACE,eAAC,IAAMc,SAAP,WAEE,4CACA,qBAAIlF,MAAO,CAAE0D,UAAW,OAAQyB,OAAQ,EAAGnC,QAAS,GAApD,UACE,qBAAI5D,UAAU,UAAd,UACE,sBAAMA,UAAU,6BAA6BY,MAAO,CAAEoF,WAAY,aADpE,sCAIA,qBAAIhG,UAAU,UAAd,UACE,sBAAMA,UAAU,6BAA6BY,MAAO,CAAEoF,WAAY,aADpE,mCAIA,qBAAIhG,UAAU,UAAd,UACE,sBAAMA,UAAU,6BAA6BY,MAAO,CAAEoF,WAAY,aADpE,qCAIA,qBAAIhG,UAAU,UAAd,UACE,sBAAMA,UAAU,6BAA6BY,MAAO,CAAEoF,WAAY,aADpE,oDAIA,qBAAIhG,UAAU,UAAd,UACE,sBAAMA,UAAU,6BAA6BY,MAAO,CAAEoF,WAAY,aADpE,kDAIA,qBAAIhG,UAAU,UAAd,UACE,sBAAMA,UAAU,6BAA6BY,MAAO,CAAEoF,WAAY,aADpE,iDAIA,qBAAIhG,UAAU,UAAd,UACE,sBAAMA,UAAU,6BAA6BY,MAAO,CAAEoF,WAAY,aADpE,gEAMF,uBACA,oDACA,qBAAIpF,MAAO,CAAE0D,UAAW,OAAQyB,OAAQ,EAAGnC,QAAS,GAApD,UACE,oBAAI5D,UAAU,UAAd,SACE,mBAAGgB,KAAK,wCAAwCE,OAAO,SAASC,IAAI,sBAApE,kCAEF,oBAAInB,UAAU,UAAd,SACE,mBAAGgB,KAAK,yBAAyBE,OAAO,SAASC,IAAI,sBAArD,+DAEF,oBAAInB,UAAU,UAAd,SACE,mBAAGgB,KAAK,iCAAiCE,OAAO,SAASC,IAAI,sBAA7D,4CAEF,oBAAInB,UAAU,UAAd,SACE,mBAAGgB,KAAK,gCAAgCE,OAAO,SAASC,IAAI,sBAA5D,kCAIJ,uBACA,mDACA,sPAEe,mBAAGH,KAAK,wCAAwCE,OAAO,SAASC,IAAI,sBAApE,0DC5DvB,IAAM8E,GAAe,SAAAC,GACnB,MAAM,yBAAN,OAAgCA,EAAIC,KAAK,OAG5B,IACbjB,OAAQ,CACNkB,iBAAkB,CAChB3C,GAAI,mBACJrC,MAAO,kDACPiF,IAAKJ,GAAa,CACd,UADc,uFAIlBK,KAAM,IAERC,eAAgB,CACd9C,GAAI,iBACJrC,MAAO,gDACPiF,IAAKJ,GAAa,CACd,UADc,qFAIlBK,KAAM,IAERE,kBAAmB,CACjB/C,GAAI,oBACJrC,MAAO,mDACPiF,IAAKJ,GAAa,CACd,UADc,wFAIlBK,KAAM,IAERG,eAAgB,CACdhD,GAAI,iBACJrC,MAAO,iBACPiF,IAAKJ,GAAa,CAChB,UADgB,sBAIlBK,KAAM,IAERI,aAAc,CACZjD,GAAI,eACJrC,MAAO,oEACPiF,IAAKJ,GAAa,CAChB,UADgB,0CAIlBK,KAAM,IAERK,WAAY,CACVlD,GAAI,aACJrC,MAAO,6CACPiF,IAAKJ,GAAa,CAChB,UADgB,mEAIlBK,KAAM,IAERM,WAAY,CACVnD,GAAI,aACJrC,MAAO,kEACPiF,IAAKJ,GAAa,CAChB,UADgB,kCAIlBK,KAAM,IAERO,MAAO,CACLpD,GAAI,QACJrC,MAAO,oBACPiF,IAAKJ,GAAa,CAChB,UADgB,6BAIlBK,KAAM,IAERQ,YAAa,CACXrD,GAAI,cACJrC,MAAO,cACPiF,IAAKJ,GAAa,CAChB,UADgB,0BAIlBK,KAAM,IAERS,YAAa,CACXtD,GAAI,cACJrC,MAAO,aACPiF,IAAKJ,GAAa,CAChB,UADgB,2BAIlBK,KAAM,KAGV9C,OAAQ,CACNwD,MAAO,CACLvD,GAAI,QACJrC,MAAO,eACPiF,IAAKJ,GAAa,CAChB,UADgB,kBAIlBK,KAAM,IAERW,iBAAkB,CAChBxD,GAAI,mBACJrC,MAAO,mBACPiF,IAAKJ,GAAa,CAChB,UADgB,4BAIlBK,KAAM,KAGVY,QAAS,CACPC,QAAS,CACP1D,GAAI,UACJrC,MAAO,wBACPiF,IAAKJ,GAAa,CAChB,WADgB,wBAIlBK,KAAM,KAGVc,YAAa,CACXC,cAAe,CACb5D,GAAI,gBACJrC,MAAO,cACPiF,IAAKJ,GAAa,CAChB,eADgB,oBAIlBK,KAAM,IAERgB,aAAc,CACZ7D,GAAI,eACJrC,MAAO,8GACPiF,IAAKJ,GAAa,CAChB,eADgB,mKAKlBK,KAAM,IAERiB,gBAAiB,CACf9D,GAAI,kBACJrC,MAAO,wCACPiF,IAAKJ,GAAa,CAChB,eADgB,kBAIlBK,KAAM,IAERkB,kBAAmB,CACjB/D,GAAI,oBACJrC,MAAO,kDACPiF,IAAKJ,GAAa,CAChB,eADgB,uBAIlBK,KAAM,IAERmB,iBAAmB,CACjBhE,GAAI,mBACJrC,MAAO,mBACPiF,IAAKJ,GAAa,CAChB,eADgB,gCAIlBK,KAAM,IAERoB,eAAiB,CACfjE,GAAI,iBACJrC,MAAO,iBACPiF,IAAKJ,GAAa,CAChB,eADgB,8BAIlBK,KAAM,IAERqB,eAAiB,CACflE,GAAI,iBACJrC,MAAO,6BACPiF,IAAKJ,GAAa,CAChB,eADgB,mIAIlBK,KAAM,IAERsB,kBAAoB,CAClBnE,GAAI,oBACJrC,MAAO,oBACPiF,IAAKJ,GAAa,CAChB,eADgB,sDAIlBK,KAAM,IAERuB,eAAiB,CACfpE,GAAI,iBACJrC,MAAO,wBACPiF,IAAKJ,GAAa,CAChB,eADgB,2DAIlBK,KAAM,IAERwB,eAAiB,CACfrE,GAAI,iBACJrC,MAAO,wBACPiF,IAAKJ,GAAa,CAChB,eADgB,wCAIlBK,KAAM,IAERyB,eAAgB,CACdtE,GAAI,iBACJrC,MAAO,+CACPiF,IAAKJ,GAAa,CAChB,eADgB,0CAIlBK,KAAM,IAER0B,SAAU,CACRvE,GAAI,WACJrC,MAAO,+BACPiF,IAAKJ,GAAa,CAChB,eADgB,sBAIlBK,KAAM,IAER2B,WAAY,CACVxE,GAAI,aACJrC,MAAO,oCACPiF,IAAKJ,GAAa,CAChB,eADgB,sBAIlBK,KAAM,IAER4B,WAAY,CACVzE,GAAI,aACJrC,MAAO,iCACPiF,IAAKJ,GAAa,CAChB,eADgB,4CAIlBK,KAAM,IAER6B,WAAY,CACV1E,GAAI,aACJrC,MAAO,iCACPiF,IAAKJ,GAAa,CAChB,eADgB,4CAIlBK,KAAM,IAER8B,WAAY,CACV3E,GAAI,aACJrC,MAAO,iCACPiF,IAAKJ,GAAa,CAChB,eADgB,4CAIlBK,KAAM,IAER+B,aAAc,CACZ5E,GAAI,eACJrC,MAAO,iCACPiF,IAAKJ,GAAa,CAChB,eADgB,4CAIlBK,KAAM,KAIVgC,MAAO,CA4BLC,wBAAyB,CACvB9E,GAAI,0BACJrC,MAAO,wEACPiF,IAAKJ,GAAa,CAChB,SADgB,uFAIlBK,KAAM,IAERkC,qBAAsB,CACpB/E,GAAI,uBACJrC,MAAO,4FACPiF,IAAKJ,GAAa,CAChB,SADgB,2GAIlBK,KAAM,IAERmC,wBAAyB,CACvBhF,GAAI,0BACJrC,MAAO,mFACPiF,IAAKJ,GAAa,CAChB,SADgB,kGAIlBK,KAAM,IAERoC,uBAAwB,CACtBjF,GAAI,yBACJrC,MAAO,0EACPiF,IAAKJ,GAAa,CAChB,SADgB,yFAIlBK,KAAM,IAERqC,UAAW,CACTlF,GAAI,YACJrC,MAAO,2DACPiF,IAAKJ,GAAa,CAChB,SADgB,0EAIlBK,KAAM,IAERsC,SAAU,CACRnF,GAAI,WACJrC,MAAO,yFACPiF,IAAKJ,GAAa,CAChB,SADgB,wGAIlBK,KAAM,IAWRuC,+BAAgC,CAC9BpF,GAAI,iCACJrC,MAAO,uEACPiF,IAAKJ,GAAa,CAChB,SADgB,sFAIlBK,KAAM,IAERwC,4BAA6B,CAC3BrF,GAAI,8BACJrC,MAAO,0EACPiF,IAAKJ,GAAa,CAChB,SADgB,yFAIlBK,KAAM,IAERyC,iCAAkC,CAChCtF,GAAI,mCACJrC,MAAO,uEACPiF,IAAKJ,GAAa,CAChB,SADgB,sFAIlBK,KAAM,IAER0C,kCAAmC,CACjCvF,GAAI,oCACJrC,MAAO,wFACPiF,IAAKJ,GAAa,CAChB,SADgB,uGAIlBK,KAAM,IAER2C,4BAA6B,CAC3BxF,GAAI,8BACJrC,MAAO,gGACPiF,IAAKJ,GAAa,CAChB,SADgB,+GAIlBK,KAAM,IAER4C,gCAAiC,CAC/BzF,GAAI,kCACJrC,MAAO,kFACPiF,IAAKJ,GAAa,CAChB,SADgB,iGAIlBK,KAAM,IAER6C,kBAAmB,CACjB1F,GAAI,oBACJrC,MAAO,wGACPiF,IAAKJ,GAAa,CAChB,SADgB,uHAIlBK,KAAM,IAER8C,gBAAiB,CACf3F,GAAI,kBACJrC,MAAO,yCACPiF,IAAKJ,GAAa,CAChB,SADgB,wDAIlBK,KAAM,IAER+C,mBAAoB,CAClB5F,GAAI,qBACJrC,MAAO,8EACPiF,IAAKJ,GAAa,CAChB,SADgB,6FAIlBK,KAAM,IAERgD,oBAAqB,CACnB7F,GAAI,sBACJrC,MAAO,mGACPiF,IAAKJ,GAAa,CAChB,SADgB,kHAIlBK,KAAM,IAERiD,oBAAqB,CACnB9F,GAAI,sBACJrC,MAAO,8FACPiF,IAAKJ,GAAa,CAChB,SADgB,6GAIlBK,KAAM,IAERkD,OAAQ,CACN/F,GAAI,SACJrC,MAAO,oCACPiF,IAAKJ,GAAa,CAChB,SADgB,mDAIlBK,KAAM,IAERmD,aAAc,CACZhG,GAAI,eACJrC,MAAO,4EACPiF,IAAKJ,GAAa,CAChB,SADgB,2FAIlBK,KAAM,IAERoD,2BAA4B,CAC1BjG,GAAI,6BACJrC,MAAO,mFACPiF,IAAKJ,GAAa,CAChB,SADgB,kGAIlBK,KAAM,IAWRqD,uBAAwB,CACtBlG,GAAI,yBACJrC,MAAO,mJACPiF,IAAKJ,GAAa,CAChB,SADgB,kKAIlBK,KAAM,IAWRsD,gBAAiB,CACfnG,GAAI,kBACJrC,MAAO,+CACPiF,IAAKJ,GAAa,CAChB,SADgB,8DAIlBK,KAAM,KAGVuD,UAAW,CACTC,aAAc,CACZrG,GAAI,eACJrC,MAAO,8BACPiF,IAAKJ,GAAa,CAChB,aADgB,sBAIlBK,KAAM,IAERyD,gBAAiB,CACftG,GAAI,kBACJrC,MAAO,iCACPiF,IAAKJ,GAAa,CAChB,aADgB,wBAIlBK,KAAM,IAER0D,iBAAkB,CAChBvG,GAAI,mBACJrC,MAAO,kCACPiF,IAAKJ,GAAa,CAChB,aADgB,uCAIlBK,KAAM,KAGV2D,QAAS,CACPC,OAAQ,CACNzG,GAAI,SACJrC,MAAO,SACPiF,IAAKJ,GAAa,CAChB,WADgB,kBAIlBK,KAAM,IAER6D,SAAU,CACR1G,GAAI,WACJrC,MAAO,WACPiF,IAAKJ,GAAa,CAChB,WADgB,oBAIlBK,KAAM,KAGVnC,IAAK,CACHiC,iBAAkB,CAChB3C,GAAI,mBACJrC,MAAO,kDACPiF,IAAKJ,GAAa,CAChB,UACA,8HACA,4FACA,WACG,aACLK,KAAM,IAERC,eAAgB,CACd9C,GAAI,iBACJrC,MAAO,gDACPiF,IAAKJ,GAAa,CAChB,UACA,8HACA,0FACA,WACG,aACLK,KAAM,IAERE,kBAAmB,CACjB/C,GAAI,oBACJrC,MAAO,mDACPiF,IAAKJ,GAAa,CAChB,UACA,8HACA,6FACA,WACG,aACLK,KAAM,IAER8D,cAAe,CACb3G,GAAI,gBACJrC,MAAO,sCACPiF,IAAKJ,GAAa,CAChB,UACA,8HACA,SACA,iBACG,aACLK,KAAM,IAER+D,WAAY,CACV5G,GAAI,aACJrC,MAAO,aACPiF,IAAKJ,GAAa,CAChB,UACA,0EACA,oBACA,WACG,aACLK,KAAM,MC7nBG,MAAMgE,WAAwBvF,YAE3CC,SACE,OACE,oBAAIpE,MAAO,CAAE0D,UAAW,OAAQyB,OAAQ,EAAGnC,QAAS,GAApD,SACIgB,OAAO2F,OAAOC,GAAarG,KAAKA,KAAK,CAACkB,EAAGhB,IAClC,oBAAarE,UAAU,OAAvB,SACL,eAAC,IAAD,CAAME,GAAK,cAAgBmF,EAAE5B,GAA7B,UACE,cAAC,IAAD,CAAiB1C,KAAK,uBADxB,IACkDsE,EAAEjE,UAFtCiD,Q,cCVX,SAASoG,GAAajL,GAEjC,OAAKA,EAAMkL,KAIT,cAACC,EAAA,EAAD,CAAiBC,UAAU,SAA3B,SACE,cAACC,GAAA,EAAD,CAAQhL,MAAM,SAASS,QAAYd,EAAMc,QAAzC,SACE,sBAAMwK,cAAY,OAAlB,sBALG,K,4CCHE,SAASC,GAAUvL,GAAQ,MAAD,EACVC,oBAAS,GADC,mBAChCuL,EADgC,KACzBC,EADyB,KAGvC,OACE,eAACC,GAAA,EAAD,CAAOxL,QAAUsL,EAAQG,OAAS,IAAIF,GAAaD,GAAShL,UAAWR,EAAMQ,UAA7E,UACE,cAACoL,GAAA,EAAD,oBACA,cAACC,GAAA,EAAD,UACI7L,EAAM6C,WAEV,cAACiJ,GAAA,EAAD,UACE,cAACT,GAAA,EAAD,CAAQhL,MAAM,UAAU0L,OAAK,EAACjL,QAAU,IAAM2K,GAAaD,GAA3D,wB,wGCPR,MAAMQ,GAAe,CAACC,EAAGpH,KACvB,IAAIqH,EAAM,UAkCV,OAhCID,EAAEnG,WAAWqG,OAGXF,EAAEnG,WAAWqG,KAAKC,SAAS,cAAgBH,EAAEnG,WAAWqG,KAAKC,SAAS,YAAcH,EAAEnG,WAAWqG,KAAKC,SAAS,cACjHF,EAAM,UAGGD,EAAEnG,WAAWqG,KAAKC,SAAS,cAAgBH,EAAEnG,WAAWqG,KAAKC,SAAS,WAC/EF,EAAM,UAGGD,EAAEnG,WAAWqG,KAAKC,SAAS,YAAcH,EAAEnG,WAAWqG,KAAKC,SAAS,cAC7EF,EAAM,UAGGD,EAAEnG,WAAWqG,KAAKC,SAAS,cAAgBH,EAAEnG,WAAWqG,KAAKC,SAAS,cAC/EF,EAAM,UAGGD,EAAEnG,WAAWqG,KAAKC,SAAS,aACpCF,EAAM,UAGGD,EAAEnG,WAAWqG,KAAKC,SAAS,WACpCF,EAAM,UAGGD,EAAEnG,WAAWqG,KAAKC,SAAS,gBACpCF,EAAM,YAIH,IAAIG,KAAEC,aAAazH,EAAG,CAC3B0H,OAAQ,EACRC,OAAQ,EACRnM,MAAO,OACPoM,QAAS,GACTC,UAAWR,EACXS,YAAa,KAIXC,GAAgB,CAACC,EAASC,KAC9B,MAAMC,EAAOC,OAAOrK,SAASsK,SAASC,QAAQ,YAAa,IAC3DJ,EAAMK,UAAU,kBAAWN,EAAQ/G,WAAWZ,KAA9B,cACZ2H,EAAQ/G,WAAWC,WAAa,8BAAgC8G,EAAQ/G,WAAWC,WAAa,UAAW,KAC3G8G,EAAQ/G,WAAWqG,KAAnB,6CAAgEU,EAAQ/G,WAAWqG,KAAnF,WAAmG,IAFvF,yBAGKY,EAHL,mBAGoBF,EAAQ/G,WAAW7B,GAHvC,0BAG2D4I,EAAQ/G,WAAW7B,GAH9E,SAKhB6I,EAAMM,GAAG,aAAa,WAAaN,EAAMO,gBAG5B,SAASC,GAAYtN,GAElC,OACE,cAAC,IAAMsG,SAAP,UACItG,EAAMuN,aAAe,cAACC,GAAA,EAAD,CACrBC,MAAOzN,EAAMyN,MAEb3G,KAAO9G,EAAMuN,YACbvB,aAAeA,GACfY,cAAgBA,IAHVc,KAAK1N,EAAMuN,gBCjElB,MAAMI,GAAS,CACpB,CACE,KAAQ,uBACR,IAAO,iIACP,KAAQ,yCAEV,CACE,KAAQ,sCACR,IAAO,uJACP,KAAQ,0CAICC,GAAe,CAC1B,2CACA,0CACA,4CACA,4CACA,4CACA,4CACA,qCACA,sCACA,yCACA,yCACA,yCACA,+CACA,+CACA,wCACA,uCACA,uCACA,uCACA,wCACA,2CACA,2CACA,2CACA,2CACA,oCACA,mCACA,uCACA,yCACA,+CACA,qCACA,qCACA,4CACA,4CACA,uCACA,uCACA,uCACA,sCACA,sCACA,sCACA,sCACA,2CACA,2CACA,uCACA,uCACA,wCACA,wCACA,+CACA,qCACA,qCACA,qCACA,gDACA,wCACA,wCACA,4CACA,4CACA,4CACA,4CACA,4CACA,4CACA,gEACA,gEACA,iEACA,iEACA,gEACA,4DACA,sCACA,uCACA,uCACA,wCACA,wCACA,wCACA,wCACA,wCACA,0CACA,0CACA,0CACA,yCACA,0CACA,wCACA,wCACA,wCACA,wCACA,wCACA,wCACA,yCACA,yCACA,wCACA,wCACA,yCACA,yCACA,yCACA,gDACA,yCACA,sCACA,oCACA,uCACA,uCACA,wCACA,yCACA,yCACA,yCACA,yCACA,yCACA,wCACA,+CACA,uCACA,uCACA,sCACA,uCACA,uCACA,sCACA,sCACA,sCACA,uCACA,oDACA,oDACA,qDACA,gDACA,2CACA,8CACA,8CA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A,gCAEA,kBACA,oBACA,qBACA,mBACA,oBACA,oBACA,mBACA,mBACA,mBACA,mBAEA,yBACA,0BACA,4BAEA,oBACA,sBACA,4BACA,2BACA,sBACA,uBACA,wBAEA,mBACA,mBACA,uBACA,qBACA,qBACA,qBACA,4BAEA,sBACA,wBACA,8BACA,4BACA,2BACA,6BACA,+BACA,gCACA,mCACA,kCACA,wBACA,+BAEA,wBACA,8BACA,6BACA,0BACA,iCACA,0BAEA,wBACA,iCACA,gCACA,4BACA,wBACA,0BACA,0BACA,2BACA,2BACA,8BACA,oCACA,kCACA,mCACA,qCACA,kCACA,mCACA,8BACA,6BACA,gCACA,8BACA,0BACA,yBACA,+BACA,kCACA,mCACA,kCACA,6BACA,oCACA,kCACA,2BACA,2BACA,4BACA,4BACA,8BACA,+BACA,mCACA,+BACA,+BACA,gCACA,6BACA,iCACA,+BACA,6BACA,iCACA,8BACA,oCACA,qCACA,gCACA,mCACA,4BACA,gCACA,gCACA,8BACA,8BACA,+BACA,sCACA,8BACA,8BACA,6BACA,4BACA,mCACA,oCACA,gCACA,iCACA,gCACA,4BACA,iCACA,6BACA,iCACA,+BACA,+BACA,qCACA,gCACA,4BACA,wBACA,iCACA,6BACA,8BACA,gCACA,8BAEA,wBACA,0BAEA,oBACA,sBACA,sBACA,4BACA,kCACA,kCACA,4BACA,2BACA,4BACA,kCACA,qBACA,0BACA,0BC9OR,MAAMyS,WAAgB/R,YAEpBiN,YAAYxS,GACVyS,MAAMzS,GACNyF,KAAKiN,MAAQ,CACX6E,WAAW,GAIfC,YAAY3R,GACVJ,KAAK8N,SAAS,CACZgE,WAAY9R,KAAKiN,MAAM6E,YAI3B/R,SACE,MAAMsR,EAAUrR,KAAKzF,MAAM8W,QAAUrR,KAAKzF,MAAM8W,QAAUW,GAAIC,MAAMjS,KAAKzF,MAAM0Q,IACzEA,EAAKjL,KAAKzF,MAAM0Q,GAChB/M,IAAO8B,KAAKzF,MAAM2D,MAAO,sBAAMnD,UAAU,UAAhB,SAA2BiF,KAAKzF,MAAM2D,OAErE,IAAIgU,EAAY,C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","file":"static/js/main.76efd111.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\nimport { NavLink, Navbar, Nav, NavItem, NavbarBrand, NavbarToggler, Collapse } from 'reactstrap';\nimport { Link, NavLink as RRNavLink } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport default function FixedNavbar(props) {\n\n  const [isOpen, toggleOpen] = useState(false);\n\n  return (\n        <div>\n          <Navbar color=\"dark\" dark expand=\"md\" className=\"fixed-top\">\n            <NavbarBrand to=\"/\" tag={Link}>PAThs</NavbarBrand>\n            <NavbarToggler onClick={()=>{ toggleOpen(!isOpen) }} />\n            <Collapse isOpen={ isOpen } navbar>\n              <Nav navbar>\n                <NavItem>\n                  <NavLink style={{ backgroundColor: '#cc545a', color: '#fff'}} to=\"/map/saved/all_ms_places\" tag={RRNavLink}>\n                    <FontAwesomeIcon icon=\"map\" /> Atlas\n                  </NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink to=\"/places\" tag={RRNavLink}>Places</NavLink>\n                </NavItem>\n\n                <NavItem>\n                  <NavLink to=\"/manuscripts\" tag={RRNavLink}>Manuscripts</NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink to=\"/works\" tag={RRNavLink}>Works</NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink to=\"/authors\" tag={RRNavLink}>Authors</NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink to=\"/titles\" tag={RRNavLink}>Titles</NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink to=\"/colophons\" tag={RRNavLink}>Colophons</NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink to=\"/persons\" tag={RRNavLink}>Persons</NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink to=\"/collections\" tag={RRNavLink}>Collections</NavLink>\n                </NavItem>\n              </Nav>\n\n              <Nav className=\"ml-auto\" navbar>\n                <NavItem>\n                  <NavLink href=\"http://paths.uniroma1.it\">Website</NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink to=\"/cite\" tag={RRNavLink}>How to cite PAThs</NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink to=\"/api\" tag={RRNavLink}>API</NavLink>\n                </NavItem>\n              </Nav>\n            </Collapse>\n          </Navbar>\n        </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/erc.6935dc7b.jpg\";","export default __webpack_public_path__ + \"static/media/sapienza.acddf492.jpg\";","import React from 'react';\nimport { Row, Col } from 'reactstrap';\n\nimport packageJson from '../../../package.json';\n\nimport Erc from './img/erc.jpg';\nimport Sapienza from './img/sapienza.jpg';\n\nexport default function Footer () {\n\n  return (\n    <footer className=\"mt-5 bg-dark text-white p-3\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col\">\n            <p>Tracking Papyrus and Parchment Paths<br />\n            <span  className=\"lead\" style={{ color: '#ffab00'}}>An Archaeological Atlas of Coptic Literature</span><br />\n            <small>Literary Texts in their Geographical Context:<br />\n            Production, Copying, Usage, Dissemination and Preservation</small></p>\n          </div>\n          <div className=\"col text-right\">\n            <p>An <a href=\"https://erc.europa.eu/\" target=\"_blank\" rel=\"noopener noreferrer\" title=\"European Research Council\">ERC</a> funded project hosted at the <a href=\"https://www.uniroma1.it\" target=\"_blank\" rel=\"noopener noreferrer\" title=\"Sapienza University of Rome\">Sapienza University of Rome</a></p>\n            <p>Principal Investigator <a href=\"http://www.lettere.uniroma1.it/users/paola-buzi\" title=\"Paola Buzi\" target=\"_blank\" rel=\"noopener noreferrer\">Paola Buzi</a> [<a href=\"mailto:paola.buzi@uniroma1.it\" title=\"Email to Paola Buzi\">paola.buzi(at)uniroma1.it</a>]</p>\n            <p>\n              <a href=\"http://paths.uniroma1.it/\" target=\"_blank\" rel=\"noopener noreferrer\" title=\"PAThs web site\">\n                paths.uniroma1.it\n              </a>\n            </p>\n          </div>\n        </div>\n\n        <Row className=\"my-3\">\n          <Col xs={{ size: 6 }} md={{size: 3, offset: 3}}><img src={Sapienza} alt=\"Sapienza Universit di Roma\" className=\"img-fluid\" /></Col>\n          <Col xs={{ size: 6 }} md={{size: 3}}><img src={Erc} alt=\"European Research Council\" className=\"img-fluid\" /></Col>\n        </Row>\n\n        <div className=\"text-center\">\n          <p className=\"\">\n            Copyright  PAThs team, Sapienza Universit di Roma.<br />\n            <small>\n              <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc-sa/4.0/\">\n                Use, sharing and remixing permitted under terms of the<br />\n                Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License<br />\n                <img alt=\"Creative Commons License\" style={{borderWidth:0}}\n                      src=\"https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png\" />\n              </a>\n            </small>\n          </p>\n\n          <p>\n            Version { packageJson.version }<br />\n            <a href=\"https://github.com/paths-erc/atlas/commits/master\" target=\"_blank\" rel=\"noopener noreferrer\">Changelog</a>\n          </p>\n\n        </div>\n\n      </div>\n    </footer>\n  );\n}\n","import React from \"react\";\nimport ScrollToTop from \"react-scroll-up\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Header from \"./Header\"\nimport Footer from \"./Footer\"\nimport './MainTemplate.css';\n\nexport default function MainTemplate (props){\n  return (\n    <div>\n      <Header location={ props.location } />\n        <main role=\"main\" className=\"maxHeight\">\n          { props.children }\n        </main>\n      <Footer />\n      <ScrollToTop showUnder={160}>\n      <FontAwesomeIcon icon=\"arrow-circle-up\" size=\"3x\" />\n      </ScrollToTop>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/paths-logo.98acd17b.png\";","export default __webpack_public_path__ + \"static/media/Ripple-1.7s-200px.ec9bf62a.svg\";","import React from 'react';\nimport Ripple from './Ripple-1.7s-200px.svg';\n\n\n\nexport default function Loading(props) {\n\n  const style = {\n    width: props.width ? props.width : '100px'\n  };\n  return (\n    <span>\n      <img src={Ripple} style={style} alt=\"Loading...\"/>\n      {\n        props.children !== '' ? props.children : <span>Loading...</span>\n      }\n    </span>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport ReactMarkdown from 'react-markdown/with-html';\n\n\nimport Loading from '../Loading/Loading';\n\n\n\n\nexport default function ReactMarkdownPath(props){\n\n  const [mdText, setMdtext] = useState();\n\n  useEffect( () => {\n    async function getMd(path){\n      await fetch(path).then((response) => response.text()).then((text) => {\n        setMdtext(text);\n      });\n    }\n    getMd(props.path);\n  }, [props.path]);\n\n  if (mdText){\n    return <ReactMarkdown source={mdText} escapeHtml={false} />;\n  } else {\n    return <Loading />\n  }\n}\n","export default __webpack_public_path__ + \"static/media/IntroMd.ed4eaa26.md\";","export default __webpack_public_path__ + \"static/media/Latest.9196c954.md\";","export default __webpack_public_path__ + \"static/media/LogoMd.0bd1fd06.md\";","export default __webpack_public_path__ + \"static/media/MissionStatementMd.4db2c7d3.md\";","export default __webpack_public_path__ + \"static/media/lod.0d10f3ba.md\";","export default __webpack_public_path__ + \"static/media/license.19b9a123.md\";","import React from \"react\";\n\nimport imgPathsLogo from './paths-logo.png';\n\nimport ReactMarkdownPath from '../ReactMarkdownPath/ReactMarkdownPath';\nimport intro from './IntroMd.md';\nimport latest from './Latest.md';\nimport logo from './LogoMd.md';\nimport missionstatement from './MissionStatementMd.md';\nimport lod from './lod.md';\nimport license from './license.md';\n\nexport default function Home(){\n   const titles = [\n     {\n       id    : 'latest',\n       title : \"PAThs scientific results recently achieved\",\n       path  : latest,\n       style : {\n         color: '#42429b',\n         fontSize: '.9rem',\n         backgroundColor: '#f7f7ff',\n         padding: '2rem'\n       }\n     },\n     {\n       id    : 'intro',\n       title : \"Introduction\",\n       path  : intro\n     },\n     {\n       id    : 'logo',\n       title : \"Logo\",\n       path  : logo\n     },\n     {\n       id    : 'missionstatement',\n       title : \"Mission Statement\",\n       path  : missionstatement\n     },\n     {\n       id    : 'lod',\n       title : \"Linked Open Data\",\n       path  : lod\n     },\n     {\n       id    : 'license',\n       title : \"Copyright and license\",\n       path  : license\n     }\n   ];\n\n\n   const showContentAndToc = function(){\n     return (\n       <div>\n         <div className=\"border p-3 d-inline-block bg-light float-right ml-5 mb-5 shadow\">\n           <h4>Table of contents</h4>\n           <ul className=\"p-0 m-0\">\n             {titles.map( (k, i) =>{\n               return (\n                 <li key={i} style={{ listStyle: 'none' }}>\n                   <a href={ '#' + k.id }>{ k.title }</a>\n                 </li>\n               );\n             })}\n           </ul>\n         </div>\n         { titles.map( (k, i) =>{\n           return (\n             <div key={i} className=\"text-justify\" style={k.style}>\n               <h1 id={ k.id } className=\"mt-5\">{ k.title }</h1>\n               <ReactMarkdownPath path={k.path} />\n             </div>\n           );\n         })}\n       </div>\n     );\n   }\n\n   return (\n     <div>\n       <div className=\"jumbotron\">\n         <div className=\"container text-center\">\n           <img className=\"img-fluid shadow-lg\" src={ imgPathsLogo } alt=\"Tracking Papyrus and Parchment Paths. An Archaeological Atlas of Coptic Literature. Literary Texts in their Geographical Context: Production, Copying, Usage, Dissemination and Preservation\" />\n         </div>\n       </div>\n       <div className=\"container\">\n         <div className=\"my-5 px-5\">\n           { showContentAndToc() }\n         </div>\n       </div>\n     </div>\n   );\n} // end of function\n","import React from \"react\";\n\nimport imgPathsLogo from './paths-logo.png';\n\nexport default function BrowserNotSupported(props) {\n\n  const compatibility = props.compatibility;\n  const browser       = props.browser;\n\n\n  return (\n    <div className=\"container text-center\">\n      <div className=\"my-5 py-5\">\n        <h1>Sorry, it seems that your browser is not supported!</h1>\n        <p>You are running <code>{ browser.name }</code>, version <code>{ browser.version }</code> on <code>{ browser.os }</code>.</p>\n        <p>Please upgrade your browser or use a modern one to work with PAThs Atlas.</p>\n\n        <div>\n          <h4>Compatibility list</h4>\n          <pre>\n          {\n            Object.keys(compatibility).map((i, k)=>{\n              return (\n                <div key={k}>\n                  {\n                    (compatibility[i] !== 10000 ? i + ' >= ' + compatibility[i] : '' )\n                  }\n              </div>\n              );\n            })\n          }\n          </pre>\n        </div>\n\n        <div className=\"border-top pt-5 mt-5\">\n          <img className=\"img-fluid shadow-lg\" src={ imgPathsLogo } alt=\"Tracking Papyrus and Parchment Paths. An Archaeological Atlas of Coptic Literature. Literary Texts in their Geographical Context: Production, Copying, Usage, Dissemination and Preservation\" />\n        </div>\n      </div>\n\n    </div>\n  );\n}\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Badge } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport default class ListPlaces extends Component {\n\n  render() {\n\n    if (!this.props.places || !this.props.places.features) {\n      return null;\n    }\n    return (\n      <div className=\"mt-3\">\n        <h5>Found { this.props.places.features.length } places</h5>\n        <ol>\n          {\n            this.props.places.features.map( (e, i)=>{\n\n              return <li key={i} className=\"border-bottom border-info mb-3 pb-1\">\n                <strong>{ e.properties.name }</strong>\n                <br /><small><span className=\"coptic\">{e.properties.copticname}</span></small>\n                {\n                  ['greekname', 'egyptianname'].map( (ee, ii)=>{\n                    if (e[ee]){\n                      return (<div key={ii}><small>{e.properties[ee]}</small></div>);\n                    } else {\n                      return null;\n                    }\n                  } )\n                }\n\n                {\n                  e.properties['tot_ms'] && e.properties['tot_ms'] !== '0' ?  <div className=\"text-right\"><Badge color=\"secondary\">{ e.properties['tot_ms'] } manuscripts related</Badge></div>  : null\n                }\n\n                <div><small><FontAwesomeIcon icon=\"id-badge\" /> <Link to={ '/places/' + e.properties.id }>paths.places.{e.properties.id}</Link></small></div>\n              </li>\n            } )\n          }\n        </ol>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Link } from 'react-router-dom';\n\n\nexport default function UrlFilterButton (props) {\n\n  if (props.urlFilter) {\n    return (\n      <div>\n        <Link to=\"/map\" className=\"btn btn-warning btn-block mt-1 mb-3\">\n          <FontAwesomeIcon icon=\"filter\" /> Filter active. Click to disable\n        </Link>\n      </div>\n\n    );\n  } else {\n    return null;\n  }\n\n}\n","import React, { Component } from 'react';\n\nexport default class Legend extends Component {\n\n  render() {\n\n    return (\n      <React.Fragment>\n\n        <h5>Map legend</h5>\n        <ul style={{ listStyle: 'none', margin: 0, padding: 0}}>\n          <li className=\"p-1 m-1\">\n            <span className=\"legend-item rounded-circle\" style={{ background: '#f64747'}}></span>\n            Production places of manuscripts\n          </li>\n          <li className=\"p-1 m-1\">\n            <span className=\"legend-item rounded-circle\" style={{ background: '#d47500'}}></span>\n            Storage places of manuscripts\n          </li>\n          <li className=\"p-1 m-1\">\n            <span className=\"legend-item rounded-circle\" style={{ background: '#aa8f00'}}></span>\n            Discovery places of manuscripts\n          </li>\n          <li className=\"p-1 m-1\">\n            <span className=\"legend-item rounded-circle\" style={{ background: '#b381b3'}}></span>\n            Discovery and production places of manuscripts\n          </li>\n          <li className=\"p-1 m-1\">\n            <span className=\"legend-item rounded-circle\" style={{ background: '#009fd4'}}></span>\n            Storage and production places of manuscripts\n          </li>\n          <li className=\"p-1 m-1\">\n            <span className=\"legend-item rounded-circle\" style={{ background: '#00aa55'}}></span>\n            Discovery and storage places of manuscripts\n          </li>\n          <li className=\"p-1 m-1\">\n            <span className=\"legend-item rounded-circle\" style={{ background: '#939393'}}></span>\n            Discovery, storage and production places of manuscripts\n          </li>\n        </ul>\n\n        <hr />\n        <h5>Available basemaps</h5>\n        <ul style={{ listStyle: 'none', margin: 0, padding: 0}}>\n          <li className=\"p-1 m-1\">\n            <a href=\"http://pelagios.org/maps/greco-roman/\" target=\"_blank\" rel=\"noopener noreferrer\">Imperium, Pelagios</a>\n          </li>\n          <li className=\"p-1 m-1\">\n            <a href=\"https://dh.gu.se/dare/\" target=\"_blank\" rel=\"noopener noreferrer\">Imperium, Digital Atlas of Ancient World (DARE)</a>\n          </li>\n          <li className=\"p-1 m-1\">\n            <a href=\"http://awmc.unc.edu/wordpress/\" target=\"_blank\" rel=\"noopener noreferrer\">Ancient World Mapping Center</a>\n          </li>\n          <li className=\"p-1 m-1\">\n            <a href=\"https://www.openstreetmap.org\" target=\"_blank\" rel=\"noopener noreferrer\">Open Street Map</a>\n          </li>\n        </ul>\n\n        <hr />\n        <h5>Other vector data</h5>\n        <p>Other vector themes are being made available by PAThs. These data are produced by other parallel projects and reworked by PAThs\n          or newly created by sub-projects. Data, metadata and credits are freely \n          published at <a href=\"https://docs.paths-erc.eu/gis/vectors\" target=\"_blank\" rel=\"noopener noreferrer\">https://docs.paths-erc.eu/gis/vectors</a>\n        </p>\n      </React.Fragment>\n    );\n  }\n}\n","/*jshint esversion: 6 */\n\nconst makeShortSql = arr => {\n  return `?verb=search&shortsql=${arr.join('~')}`;\n};\n\nexport default {\n  places: {\n    discovery_places: {\n      id: 'discovery_places',\n      title: 'Discovery places of Coptic literary manuscripts',\n      url: makeShortSql([\n          '@places',\n          `?id|IN|{@m_msplaces~[place~?table_link|=|paths__manuscripts||and|type|=|discovery}`,\n        ]),\n      data: {}\n    },\n    storage_places: {\n      id: 'storage_places',\n      title: 'Storage places of Coptic literary manuscripts',\n      url: makeShortSql([\n          '@places',\n          `?id|IN|{@m_msplaces~[place~?table_link|=|paths__manuscripts||and|type|=|storage}`\n        ]),\n      data: {}\n    },\n    production_places: {\n      id: 'production_places',\n      title: 'Production places of Coptic literary manuscripts',\n      url: makeShortSql([\n          '@places',\n          `?id|IN|{@m_msplaces~[place~?table_link|=|paths__manuscripts||and|type|=|production}`,\n        ]),\n      data: {}\n    },\n    episcopal_sees: {\n      id: \"episcopal_sees\",\n      title: \"Episcopal sees\",\n      url: makeShortSql([\n        '@places',\n        `?episcopalsee|=|1`,\n      ]),\n      data: {}\n    },\n    ms_in_graves: {\n      id: \"ms_in_graves\",\n      title: \"Places where manuscrips used in funerary contexts have been found\",\n      url: makeShortSql([\n        '@places',\n        `?id|IN|(24, 27, 28, 74, 83, 178, 274)`,\n      ]),\n      data: {}\n    },\n    cemeteries: {\n      id: \"cemeteries\",\n      title: \"Catacombs, cemeteries tombs or necropoleis\",\n      url: makeShortSql([\n        '@places',\n        `?typology|=|catacomb, cemetery, necropolis||or|typology|=|tomb`,\n      ]),\n      data: {}\n    },\n    hermitages: {\n      id: \"hermitages\",\n      title: \"Hermitage units (mainly referred to the area of Western Thebes)\",\n      url: makeShortSql([\n        '@places',\n        `?typology|=|hermitage unit(s)`,\n      ]),\n      data: {}\n    },\n    mines: {\n      id: \"mines\",\n      title: \"Mines or quarries\",\n      url: makeShortSql([\n        '@places',\n        `?typology|=|mine, quarry`,\n      ]),\n      data: {}\n    },\n    monasteries: {\n      id: \"monasteries\",\n      title: \"Monasteries\",\n      url: makeShortSql([\n        '@places',\n        `?typology|=|monastery`,\n      ]),\n      data: {}\n    },\n    settlements: {\n      id: \"settlements\",\n      title: \"Settlement\",\n      url: makeShortSql([\n        '@places',\n        `?typology|=|settlement`,\n      ]),\n      data: {}\n    },\n  },\n  titles: {\n    final: {\n      id: \"final\",\n      title: \"Final titles\",\n      url: makeShortSql([\n        '@titles',\n        `?type|=|final`,\n      ]),\n      data: {}\n    },\n    section_headings: {\n      id: \"section_headings\",\n      title: \"Section headings\",\n      url: makeShortSql([\n        '@titles',\n        `?type|=|section heading`,\n      ]),\n      data: {}\n    }\n  },\n  authors: {\n    bishops: {\n      id: \"bishops\",\n      title: \"Authors-(arch)bishops\",\n      url: makeShortSql([\n        '@authors',\n        `?title|LIKE|%bishop`,\n      ]),\n      data: {}\n    }\n  },\n  manuscripts: {\n    palimpsest_ms: {\n      id: \"palimpsest_ms\",\n      title: \"Palimpsests\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?palimpsest|=|1`,\n      ]),\n      data: {}\n    },\n    wandering_ms: {\n      id: \"wandering_ms\",\n      title: \"Wandering manuscripts (for instance manufactured in a place but stored in another palace, etc.)\",\n      url: makeShortSql([\n        '@manuscripts',\n        `[paths__manuscripts.*,{@m_msplaces~[m_msplaces.place|count_distinct~?table_link|=|paths__manuscripts||and|id_link|=|^paths__manuscripts.id}:pl_ms`,\n        `?pl_ms|<|1`,\n      ]),\n      data: {}\n    },\n    ms_has_bindings: {\n      id: \"ms_has_bindings\",\n      title: \"Manuscripts with ancient bookbindings\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?bindings|=|1`,\n      ]),\n      data: {}\n    },\n    detached_bindings: {\n      id: \"detached_bindings\",\n      title: \"Bookbindings detached from original manuscripts\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?isbookbinding|=|1`,\n      ]),\n      data: {}\n    },\n    horizontal_rolls : {\n      id: \"horizontal_rolls\",\n      title: \"Horizontal rolls\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?bookform|=|horizontal roll`,\n      ]),\n      data: {}\n    },\n    vertical_rolls : {\n      id: \"vertical_rolls\",\n      title: \"Vertical rolls\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?bookform|=|vertical roll`,\n      ]),\n      data: {}\n    },\n    minor_dialects : {\n      id: \"minor_dialects\",\n      title: \"Minor dialects\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?dialect|not like|%F;%||and|dialect|not like|%S;%||and|dialect|not like|%B;%||and|dialect|not like|%F||and|dialect|not like|%B`,\n      ]),\n      data: {}\n    },\n    miniature_codices : {\n      id: \"miniature_codices\",\n      title: \"Miniature codices\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?bookform|=|codex||and|leafw|>|0||and|leafw|<|101`,\n      ]),\n      data: {}\n    },\n    square_codices : {\n      id: \"square_codices\",\n      title: \"Square format codices\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?bookform|=|codex||and|prophw|>|.84||and|prophw|<|1.16`,\n      ]),\n      data: {}\n    },\n    oblong_codices : {\n      id: \"oblong_codices\",\n      title: \"Oblong format codices\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?bookform|=|codex||and|prophw|>|.84`,\n      ]),\n      data: {}\n    },\n    early_bohairic: {\n      id: \"early_bohairic\",\n      title: \"Early Bohairic manuscripts (up to 7th cent.)\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?dialect|like|%B%||and|chronoto|<|701`,\n      ]),\n      data: {}\n    },\n    fayyumic: {\n      id: \"fayyumic\",\n      title: \"Fayyumic dialect manuscripts\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?dialect|like|%F%`,\n      ]),\n      data: {}\n    },\n    ms_third_c: {\n      id: \"ms_third_c\",\n      title: \"Manuscripts up to the 3rd Century\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?chronofrom|<|301`,\n      ]),\n      data: {}\n    },\n    ms_forth_c: {\n      id: \"ms_forth_c\",\n      title: \"Manuscripts of the 4th Century\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?chronofrom|>|299||and|chronofrom|<|400`,\n      ]),\n      data: {}\n    },\n    ms_fifth_c: {\n      id: \"ms_fifth_c\",\n      title: \"Manuscripts of the 5th Century\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?chronofrom|>|399||and|chronofrom|<|500`,\n      ]),\n      data: {}\n    },\n    ms_sixth_c: {\n      id: \"ms_sixth_c\",\n      title: \"Manuscripts of the 6th Century\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?chronofrom|>|499||and|chronofrom|<|600`,\n      ]),\n      data: {}\n    },\n    ms_seventh_c: {\n      id: \"ms_seventh_c\",\n      title: \"Manuscripts of the 7th Century\",\n      url: makeShortSql([\n        '@manuscripts',\n        `?chronofrom|>|599||and|chronofrom|<|700`,\n      ]),\n      data: {}\n    },\n    \n  },\n  works: {\n    // translations_biblical_sahidic: {\n    //   id: \"translations_biblical_sahidic\",\n    //   title: \"Translations of biblical works into Sahidic - first phase (3rd-4th cent.)\",\n    //   url: makeShortSql([\n    //     '@works',\n    //     `?litperiod|=|Translations of biblical works into Sahidic - first phase (3rd-4th cent.)`,\n    //   ]),\n    //   data: {}\n    // },\n    // translations_biblical_bohairic: {\n    //   id: \"translations_biblical_bohairic\",\n    //   title: \"Translations of biblical works into Bohairic - first phase (4th cent.)\",\n    //   url: makeShortSql([\n    //     '@works',\n    //     `?litperiod|=|Translations of biblical works into Bohairic - first phase (4th cent.)`,\n    //   ]),\n    //   data: {}\n    // },\n    // early_translations_other: {\n    //   id: \"early_translations_other\",\n    //   title: \"Translations of biblical works into, Akhmimic, Lykopolitan, Oxyrhyrinchite, Fayyumic, etc. (4th cent.)\",\n    //   url: makeShortSql([\n    //     '@works',\n    //     `?litperiod|=|Translations of biblical works into, Akhmimic, Lykopolitan, Oxyrhyrinchite, Fayyumic, etc. (4th cent.)`,\n    //   ]),\n    //   data: {}\n    // },\n    translations_apocryphal: {\n      id: \"translations_apocryphal\",\n      title: \"Early translations of apocryphal works  first phase (4th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Tarly translations of apocryphal works  first phase (4th cent.)`,\n      ]),\n      data: {}\n    },\n    translations_gnostic: {\n      id: \"translations_gnostic\",\n      title: \"Translation and (eventual) re-elaboration of a Gnostic corpus (3rd-4th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Translation and (eventual) re-elaboration of a Gnostic corpus (3rd-4th cent.)`,\n      ]),\n      data: {}\n    },\n    translations_manichaean: {\n      id: \"translations_manichaean\",\n      title: \"Translation and (eventual) re-elaboration of a Manichaean corpus (3th-5th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Translation and (eventual) re-elaboration of a Manichaean corpus (3th-5th cent.)`,\n      ]),\n      data: {}\n    },\n    translations_patristic: {\n      id: \"translations_patristic\",\n      title: \"Early translation of patristic works  first phase (3th-5th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Early translation of patristic works  first phase (3th-5th cent.)`,\n      ]),\n      data: {}\n    },\n    pachomius: {\n      id: \"pachomius\",\n      title: \"Pachomius and the early Pachomian milieu (4th-5th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Pachomius and the early Pachomian milieu (4th-5th cent.)`,\n      ]),\n      data: {}\n    },\n    shenoute: {\n      id: \"shenoute\",\n      title: \"Early original literary production: Shenoute and the Shenoutean milieu (4th-5th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Early original literary production: Shenoute and the Shenoutean milieu (4th-5th cent.)`,\n      ]),\n      data: {}\n    },\n    // standard_translations: {\n    //   id: \"standard_translations\",\n    //   title: \"Standard translations of biblical works into Sahidic (5th cent.)\",\n    //   url: makeShortSql([\n    //     '@works',\n    //     `?litperiod|=|Standard translations of biblical works into Sahidic (5th cent.)`,\n    //   ]),\n    //   data: {}\n    // },\n    translations_apocryphal_second: {\n      id: \"translations_apocryphal_second\",\n      title: \"Translations of apocryphal texts  second phase (4th-5th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Translations of apocryphal texts  second phase (4th-5th cent.)`,\n      ]),\n      data: {}\n    },\n    translations_hagiographical: {\n      id: \"translations_hagiographical\",\n      title: \"Translations of hagiographical works  first phase (4th-6th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Translations of hagiographical works  first phase (4th-6th cent.)`,\n      ]),\n      data: {}\n    },\n    classsical_translations_homilies: {\n      id: \"classsical_translations_homilies\",\n      title: \"Classical translations - homilies (end of 4th-6th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Classical translations - homilies (end of 4th-6th cent.)`,\n      ]),\n      data: {}\n    },\n    classsical_translations_historiae: {\n      id: \"classsical_translations_historiae\",\n      title: \"Classical translations  historiae monachorum (end of 4th-6th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Classical translations  historiae monachorum (end of 4th-6th cent.)`,\n      ]),\n      data: {}\n    },\n    classical_translations_acts: {\n      id: \"classical_translations_acts\",\n      title: \"Classical translations  acts of councils and Canones (end of 4th-6th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Classical translations  acts of councils and Canones (end of 4th-6th cent.)`,\n      ]),\n      data: {}\n    },\n    classical_translations_monastic: {\n      id: \"classical_translations_monastic\",\n      title: \"Classical translations  monastic works (end of 4th-6th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Classical translations  monastic works (end of 4th-6th cent.)`,\n      ]),\n      data: {}\n    },\n    post_chalcedonian: {\n      id: \"post_chalcedonian\",\n      title: \"Post-Chalcedonian opposition literature: the plerophories and other works (5th-6th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Post-Chalcedonian opposition literature: the plerophories and other works (5th-6th cent.)`,\n      ]),\n      data: {}\n    },\n    historiographic: {\n      id: \"historiographic\",\n      title: \"Historiographic Production (6th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Historiographic Production (6th cent.)`,\n      ]),\n      data: {}\n    },\n    orig_lit_formation: {\n      id: \"orig_lit_formation\",\n      title: \"Original Literature: Formation of the earlier hagiographic cycles (6 cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Original Literature: Formation of the earlier hagiographic cycles (6 cent.)`,\n      ]),\n      data: {}\n    },\n    orig_lit_damian_hag: {\n      id: \"orig_lit_damian_hag\",\n      title: \"Original Literature: The period of Damian and his cultural circle (6th-7th cent.): Hagiographies\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Original Literature: The period of Damian and his cultural circle (6th-7th cent.): Hagiographies`,\n      ]),\n      data: {}\n    },\n    orig_lit_damian_hom: {\n      id: \"orig_lit_damian_hom\",\n      title: \"Original Literature: The period of Damian and his cultural circle (6th-7th cent.): Homilies\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Original Literature: The period of Damian and his cultural circle (6th-7th cent.): Homilies`,\n      ]),\n      data: {}\n    },\n    poetry: {\n      id: \"poetry\",\n      title: \"Poetic production (7th-8th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Poetic production (7th-8th cent.)`,\n      ]),\n      data: {}\n    },\n    orig_lit_hom: {\n      id: \"orig_lit_hom\",\n      title: \"Original Literature: Homilies with apocryphal insertions (6th -8th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Original Literature: Homilies with apocryphal insertions (6th -8th cent.)`,\n      ]),\n      data: {}\n    },\n    original_lit_early_islamic: {\n      id: \"original_lit_early_islamic\",\n      title: \"Original Literature: Literary production of the early Islamic period (7th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Original Literature: Literary production of the early Islamic period (7th cent.)`,\n      ]),\n      data: {}\n    },\n    // standard_translations_in_bohairic: {\n    //   id: \"standard_translations_in_bohairic\",\n    //   title: \"Standard translations of biblical works into Bohairic (7th-8th cent.)\",\n    //   url: makeShortSql([\n    //     '@works',\n    //     `?litperiod|=|Standard translations of biblical works into Bohairic (7th-8th cent.)`,\n    //   ]),\n    //   data: {}\n    // },\n    original_lit_later_hag: {\n      id: \"original_lit_later_hag\",\n      title: \"Original Literature: Formation of the later (pseudo-epigraphical) hagiographic cycles and re-arrangement of homiletic production (7th-8th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Original Literature: Formation of the later (pseudo-epigraphical) hagiographic cycles and re-arrangement of homiletic production (7th-8th cent.)`,\n      ]),\n      data: {}\n    },\n    // synaxarial: {\n    //   id: \"synaxarial\",\n    //   title: \"Synaxarial arrangement (9th-10th cent.)\",\n    //   url: makeShortSql([\n    //     '@works',\n    //     `?litperiod|=|Synaxarial arrangement (9th-10th cent.)`,\n    //   ]),\n    //   data: {}\n    // },\n    late_liturgical: {\n      id: \"late_liturgical\",\n      title: \"Late liturgical production (10th-14th cent.)\",\n      url: makeShortSql([\n        '@works',\n        `?litperiod|=|Late liturgical production (10th-14th cent.)`,\n      ]),\n      data: {}\n    },\n  },\n  colophons: {\n    cryptography: {\n      id: 'cryptography',\n      title: \"Colophons with cryptography\",\n      url: makeShortSql([\n        '@colophons',\n        `?cryptography|=|1`,\n      ]),\n      data: {}\n    },\n    greek_minuscule: {\n      id: 'greek_minuscule',\n      title: \"Colophons with Greek minuscule\",\n      url: makeShortSql([\n        '@colophons',\n        `?minusculegreek|=|1`,\n      ]),\n      data: {}\n    },\n    coptic_minuscule: {\n      id: 'coptic_minuscule',\n      title: \"Colophons with Coptic minuscule\",\n      url: makeShortSql([\n        '@colophons',\n        `?minusminusculecopitcculegreek|=|1`,\n      ]),\n      data: {}\n    }\n  },\n  persons: {\n    donors: {\n      id: 'donors',\n      title: 'Donors',\n      url: makeShortSql([\n        '@persons',\n        `?type|=|donor`,\n      ]),\n      data: {}\n    },\n    copyists: {\n      id: 'copyists',\n      title: 'Copyists',\n      url: makeShortSql([\n        '@persons',\n        `?type|=|copyist`,\n      ]),\n      data: {}\n    }\n  },\n  map: {\n    discovery_places: {\n      id: 'discovery_places',\n      title: 'Discovery places of Coptic literary manuscripts',\n      url: makeShortSql([\n        '@places',\n        '[geodata.geometry,places.id,places.name,places.pleiades,places.typology,{!@m_msplaces~[id|count~?place|=|^places.id}:tot_ms',\n        '?places.id|in|{@m_msplaces~[place~?table_link|=|paths__manuscripts||and|type|=|discovery}',\n        '-500:0'\n      ]) + '&geojson=1',\n      data: {}\n    },\n    storage_places: {\n      id: 'storage_places',\n      title: 'Storage places of Coptic literary manuscripts',\n      url: makeShortSql([\n        '@places',\n        '[geodata.geometry,places.id,places.name,places.pleiades,places.typology,{!@m_msplaces~[id|count~?place|=|^places.id}:tot_ms',\n        '?places.id|in|{@m_msplaces~[place~?table_link|=|paths__manuscripts||and|type|=|storage}',\n        '-500:0'\n      ]) + '&geojson=1',\n      data: {}\n    },\n    production_places: {\n      id: 'production_places',\n      title: 'Production places of Coptic literary manuscripts',\n      url: makeShortSql([\n        '@places',\n        '[geodata.geometry,places.id,places.name,places.pleiades,places.typology,{!@m_msplaces~[id|count~?place|=|^places.id}:tot_ms',\n        '?places.id|in|{@m_msplaces~[place~?table_link|=|paths__manuscripts||and|type|=|production}',\n        '-500:0'\n      ]) + '&geojson=1',\n      data: {}\n    },\n    all_ms_places: {\n      id: 'all_ms_places',\n      title: 'All places connected to manuscripts',\n      url: makeShortSql([\n        '@places',\n        '[geodata.geometry,places.id,places.name,places.pleiades,places.typology,{!@m_msplaces~[id|count~?place|=|^places.id}:tot_ms',\n        '-500:0',\n        '?tot_ms|>|^0'\n      ]) + '&geojson=1',\n      data: {}\n    },\n    bishoprics: {\n      id: 'bishoprics',\n      title: 'Bishoprics',\n      url: makeShortSql([\n        '@places',\n        '[geodata.geometry,places.id,places.name,places.pleiades,places.typology',\n        '?episcopalsee|=|1',\n        '-500:0'\n      ]) + '&geojson=1',\n      data: {}\n    },\n  }\n};\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport SavedQueries from '../../Services/SavedQueries';\n\nexport default class MapSavedQueries extends Component {\n\n  render() {\n    return (\n      <ul style={{ listStyle: 'none', margin: 0, padding: 0}}>\n        { Object.values(SavedQueries.map).map( (e, i) => {\n          return <li key={i}  className=\"mb-3\">\n            <Link to={ '/map/saved/' + e.id }>\n              <FontAwesomeIcon icon=\"arrow-circle-right\" /> { e.title }\n            </Link>\n          </li>\n        }) }\n      </ul>\n    );\n  }\n}\n","import React from 'react';\nimport { InputGroupAddon, Button } from 'reactstrap';\n\nexport default function ClearButton (props) {\n\n    if (!props.show){\n      return null;\n    }\n    return (\n      <InputGroupAddon addonType=\"append\">\n        <Button color=\"danger\" onClick = { props.onClick }>\n          <span aria-hidden=\"true\">&times;</span>\n        </Button>\n      </InputGroupAddon>\n    );\n}\n","import React, {useState} from \"react\";\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nexport default function ShowError(props) {\n  const [modal, toggleModal] = useState(false);\n\n  return (\n    <Modal isOpen={ !modal } toggle={ ()=>toggleModal(!modal) } className={props.className}>\n      <ModalHeader>Error</ModalHeader>\n      <ModalBody>\n        { props.children }\n      </ModalBody>\n      <ModalFooter>\n        <Button color=\"success\" block onClick={ () => toggleModal(!modal) }>Close</Button>\n      </ModalFooter>\n    </Modal>\n  );\n};\n","import React from 'react';\nimport { GeoJSON } from 'react-leaflet';\nimport L from 'leaflet';\nimport hash from 'object-hash';\n\n\nconst pointToLayer = (t, i) => {\n  let col = '#0f4880'; // 15, 72, 128\n\n  if (t.properties.type){\n\n    // discovery && storage && production\n    if (t.properties.type.includes('discovery') && t.properties.type.includes('storage') && t.properties.type.includes('production')) {\n      col = '#939393'; //147, 147, 147\n\n    // dicovery && storage\n    } else if (t.properties.type.includes('discovery') && t.properties.type.includes('storage')) {\n      col = '#00aa55'; // rgb 0,170,85\n\n    // storage && production\n    } else if (t.properties.type.includes('storage') && t.properties.type.includes('production')) {\n      col = '#009fd4'; // 0, 159, 212\n\n    // dicovery && production\n    } else if (t.properties.type.includes('discovery') && t.properties.type.includes('production')) {\n      col = '#b381b3'; // 179, 129, 179\n\n    // discovery\n    } else if (t.properties.type.includes('discovery')){\n      col = '#aa8f00'; // 170, 143, 0\n\n    // storage\n    } else if (t.properties.type.includes('storage')) {\n      col = '#d47500'; // 212, 117, 0\n\n    // production\n    } else if (t.properties.type.includes('production')) {\n      col = '#f64747'; // 246, 71, 71\n    }\n  }\n\n  return new L.CircleMarker(i, {\n    radius: 5,\n    weight: 1,\n    color: \"#fff\",\n    opacity: 0.9,\n    fillColor: col,\n    fillOpacity: 1\n  })\n};\n\nconst onEachFeature = (feature, layer) => {\n  const base = window.location.pathname.replace(/\\/map(.*)/, '');\n  layer.bindPopup(`<strong>${feature.properties.name}</strong>` +\n     (feature.properties.copticname ? '<br /><span class=\"coptic\">' + feature.properties.copticname + '</span>': '') +\n     (feature.properties.type ? `<br /><span class=\"text-secondary\">${feature.properties.type}</span>` : '') +\n     `<br /><a href=\"${base}/places/${feature.properties.id}\">paths/places/${feature.properties.id}</a>`\n  );\n  layer.on('mouseover', function() { layer.openPopup(); });\n};\n\nexport default function PathsPlaces(props){\n\n  return(\n    <React.Fragment>\n      { props.shownPlaces && <GeoJSON\n        onAdd={props.onAdd}\n        key={ hash(props.shownPlaces) }\n        data={ props.shownPlaces }\n        pointToLayer={ pointToLayer }\n        onEachFeature={ onEachFeature }\n        /> }\n    </React.Fragment>\n  );\n}\n","/* jshint esversion: 6 */\n\nexport const Themes = [\n  {\n    \"name\": \"Holy family in Egypt\",\n    \"url\": \"https://raw.githubusercontent.com/paths-erc/docs/master/raw-data/gis/sacra-famiglia-in-egitto/sacra-famiglia-in-egitto.geojson\",\n    \"info\": \"https://docs.paths-erc.eu/gis/vectors\"\n  },\n  {\n    \"name\": \"Coptic monasteries with coordinates\",\n    \"url\": \"https://raw.githubusercontent.com/paths-erc/docs/master/raw-data/gis/coptic-monasteries-with-coordinates/coptic-monasteries-with-coordinates.geojson\",\n    \"info\": \"https://docs.paths-erc.eu/gis/vectors\"\n  }\n];\n\nexport const SiteMapsList = [\n  \"paths.places.16-Elephantine/BGQ6JNX2-186\",\n  \"paths.places.16-Elephantine/BGQ6JNX2-77\",\n  \"paths.places.19-Luxor-complex/BGQ6JNX2-68\",\n  \"paths.places.19-Luxor-complex/BGQ6JNX2-69\",\n  \"paths.places.19-Luxor-complex/BGQ6JNX2-70\",\n  \"paths.places.19-Luxor-complex/BGQ6JNX2-71\",\n  \"paths.places.20-Koptos/BGQ6JNX2-64\",\n  \"paths.places.21-Dendera/BGQ6JNX2-63\",\n  \"paths.places.24-Panopolis/BGQ6JNX2-159\",\n  \"paths.places.24-Panopolis/BGQ6JNX2-161\",\n  \"paths.places.24-Panopolis/BGQ6JNX2-160\",\n  \"paths.places.28-Hermopolis-Magna/BGQ6JNX2-58\",\n  \"paths.places.28-Hermopolis-Magna/BGQ6JNX2-59\",\n  \"paths.places.36-Pelusium/BGQ6JNX2-189\",\n  \"paths.places.36-Pelusium/BGQ6JNX2-88\",\n  \"paths.places.36-Pelusium/BGQ6JNX2-89\",\n  \"paths.places.36-Pelusium/BGQ6JNX2-90\",\n  \"paths.places.38-Alexandria/BGQ6JNX2-1\",\n  \"paths.places.53-Antinoupolis/BGQ6JNX2-52\",\n  \"paths.places.53-Antinoupolis/BGQ6JNX2-53\",\n  \"paths.places.53-Antinoupolis/BGQ6JNX2-54\",\n  \"paths.places.53-Antinoupolis/BGQ6JNX2-55\",\n  \"paths.places.58-Esna/BGQ6JNX2-169\",\n  \"paths.places.58-Esna/BGQ6JNX2-76\",\n  \"paths.places.68-Pbou/paths.places.68\",\n  \"paths.places.70-Hermonthis/BGQ6JNX2-74\",\n  \"paths.places.72-Deir-Ambra-Adra/BGQ6JNX2-177\",\n  \"paths.places.73-Bawit/BGQ6JNX2-142\",\n  \"paths.places.73-Bawit/BGQ6JNX2-143\",\n  \"paths.places.75-Apa-Jeremiah/BGQ6JNX2-126\",\n  \"paths.places.75-Apa-Jeremiah/BGQ6JNX2-127\",\n  \"paths.places.74-Naqlun/BGQ6JNX2-131b\",\n  \"paths.places.74-Naqlun/BGQ6JNX2-131a\",\n  \"paths.places.74-Naqlun/BGQ6JNX2-131c\",\n  \"paths.places.78-Kellia/BGQ6JNX2-114\",\n  \"paths.places.78-Kellia/BGQ6JNX2-115\",\n  \"paths.places.78-Kellia/BGQ6JNX2-116\",\n  \"paths.places.78-Kellia/BGQ6JNX2-117\",\n  \"paths.places.87-Medinet-Habu/BGQ6JNX2-72\",\n  \"paths.places.87-Medinet-Habu/BGQ6JNX2-73\",\n  \"paths.places.88-Petemout/BGQ6JNX2-66\",\n  \"paths.places.88-Petemout/BGQ6JNX2-67\",\n  \"paths.places.89-Ostrakine/BGQ6JNX2-92\",\n  \"paths.places.89-Ostrakine/BGQ6JNX2-93\",\n  \"paths.places.92-Deir-el-Balaiza/BGQ6JNX2-148\",\n  \"paths.places.96-Philae/BGQ6JNX2-78\",\n  \"paths.places.96-Philae/BGQ6JNX2-79\",\n  \"paths.places.96-Philae/BGQ6JNX2-80\",\n  \"paths.places.97-Deir-el-Kubaniya/BGQ6JNX2-174\",\n  \"paths.places.101-Tebtynis/BGQ6JNX2-47\",\n  \"paths.places.106-Karanis/BGQ6JNX2-191\",\n  \"paths.places.104-Medinet-Madi/BGQ6JNX2-39\",\n  \"paths.places.104-Medinet-Madi/BGQ6JNX2-40\",\n  \"paths.places.104-Medinet-Madi/BGQ6JNX2-41\",\n  \"paths.places.104-Medinet-Madi/BGQ6JNX2-42\",\n  \"paths.places.104-Medinet-Madi/BGQ6JNX2-43\",\n  \"paths.places.104-Medinet-Madi/BGQ6JNX2-44\",\n  \"paths.places.112-Monastery-of-Shenoute-at-Atripe/BGQ6JNX2-150\",\n  \"paths.places.112-Monastery-of-Shenoute-at-Atripe/BGQ6JNX2-151\",\n  \"paths.places.112-Monastery-of-Shenoute-at-Atripe/BGQ6JNX2-152a\",\n  \"paths.places.112-Monastery-of-Shenoute-at-Atripe/BGQ6JNX2-152b\",\n  \"paths.places.112-Monastery-of-Shenoute-at-Atripe/BGQ6JNX2-154\",\n  \"paths.places.113-Red-Monastery-at-Atripe/paths.places.113\",\n  \"paths.places.114-Kellis/BGQ6JNX2-85\",\n  \"paths.places.115-Bagawat/BGQ6JNX2-86\",\n  \"paths.places.115-Bagawat/BGQ6JNX2-87\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-16\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-17\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-18\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-19\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-20\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-21a1\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-21a2\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-21a3\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-21b\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-21b1\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-22\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-23\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-24\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-25\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-26\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-27\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-28a\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-28b\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-30\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-31\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-103\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-104\",\n  \"paths.places.116-Abu-Mina/BGQ6JNX2-105\",\n  \"paths.places.117-Marina-el-Alamein/BGQ6JNX2-8\",\n  \"paths.places.119-Dionysias/BGQ6JNX2-46\",\n  \"paths.places.122-Hawara/BGQ6JNX2-49\",\n  \"paths.places.143-Marea/BGQ6JNX2-9\",\n  \"paths.places.144-Babylon/BGQ6JNX2-33\",\n  \"paths.places.144-Babylon/BGQ6JNX2-34\",\n  \"paths.places.144-Babylon/BGQ6JNX2-122\",\n  \"paths.places.144-Babylon/BGQ6JNX2-123a\",\n  \"paths.places.144-Babylon/BGQ6JNX2-123b\",\n  \"paths.places.169-Manqabad/BGQ6JNX2-144\",\n  \"paths.places.169-Manqabad/BGQ6JNX2-145\",\n  \"paths.places.169-Manqabad/BGQ6JNX2-146\",\n  \"paths.places.173-Dakhleh/BGQ6JNX2-181\",\n  \"paths.places.176-Deir-abu-Matta/BGQ6JNX2-180\",\n  \"paths.places.182-Karnak/BGQ6JNX2-166\",\n  \"paths.places.182-Karnak/BGQ6JNX2-167\",\n  \"paths.places.188-Pharan/BGQ6JNX2-95\",\n  \"paths.places.188-Pharan/BGQ6JNX2-96a\",\n  \"paths.places.188-Pharan/BGQ6JNX2-96b\",\n  \"paths.places.188-Pharan/BGQ6JNX2-97\",\n  \"paths.places.188-Pharan/BGQ6JNX2-98\",\n  \"paths.places.188-Pharan/BGQ6JNX2-99\",\n  \"paths.places.188-Pharan/BGQ6JNX2-100\",\n  \"paths.places.205-Wadi-Natrun-Baramus/BGQ6JNX2-118\",\n  \"paths.places.206-Wadi-Natrun-Syrians/BGQ6JNX2-119\",\n  \"paths.places.208-Wadi-Natrun-Macarius/BGQ6JNX2-121\",\n  \"paths.places.215-Deir-Abu-Hennes/BGQ6JNX2-141\",\n  \"paths.places.217-Deir-al-Dik/BGQ6JNX2-51\",\n  \"paths.places.338-Taposiris-Magna/BGQ6JNX2-3\",\n  \"paths.places.338-Taposiris-Magna/BGQ6JNX2-4\",\n  \"paths.places.338-Taposiris-Magna/BGQ6JNX2-5\",\n  \"paths.places.338-Taposiris-Magna/BGQ6JNX2-185\",\n  \"paths.places.367-Deir-Mar-Tumas/BGQ6JNX2-158\",\n  \"paths.places.368-Upper-Ansina/BGQ6JNX2-137\",\n  \"paths.places.368-Upper-Ansina/BGQ6JNX2-138\",\n  \"paths.places.368-Upper-Ansina/BGQ6JNX2-139\",\n  \"paths.places.368-Upper-Ansina/BGQ6JNX2-56\",\n  \"paths.places.370-Hilwan/BGQ6JNX2-35\",\n  \"paths.places.370-Hilwan/BGQ6JNX2-36\",\n  \"paths.places.370-Hilwan/BGQ6JNX2-37\",\n  \"paths.places.370-Hilwan/BGQ6JNX2-38\",\n  \"paths.places.374-Deir-el-Matmar/BGQ6JNX2-168\",\n  \"paths.places.380-Deir-Mar-Buqtur/BGQ6JNX2-164\",\n  \"paths.places.380-Deir-Mar-Buqtur/BGQ6JNX2-165a\",\n  \"paths.places.380-Deir-Mar-Buqtur/BGQ6JNX2-165b\",\n  \"paths.places.415-Abu-Fana/BGQ6JNX2-134\",\n  \"paths.places.415-Abu-Fana/BGQ6JNX2-135\",\n  \"paths.places.415-Abu-Fana/BGQ6JNX2-136\",\n  \"paths.places.416-Deir-al-Fakhuri/BGQ6JNX2-171\",\n  \"paths.places.416-Deir-al-Fakhuri/BGQ6JNX2-172\",\n  \"paths.places.417-Abu-Shaar/BGQ6JNX2-187\",\n  \"paths.places.419-Ain-el-Hayz/BGQ6JNX2-83\",\n  \"paths.places.420-Gezira-el-Faraun/BGQ6JNX2-101\",\n  \"paths.places.421-Hawwariya/BGQ6JNX2-11\",\n  \"paths.places.421-Hawwariya/BGQ6JNX2-12\",\n  \"paths.places.422-Kalabasa/BGQ6JNX2-82\",\n  \"paths.places.423-Kom-Namrud/BGQ6JNX2-132\",\n  \"paths.places.423-Kom-Namrud/BGQ6JNX2-133\",\n  \"paths.places.424-El-Tor/BGQ6JNX2-188\",\n  \"paths.places.425-Tuphium/BGQ6JNX2-75\",\n];\n","/* jshint esversion: 6 */\n\nexport default \"AIzaSyCLRylxZwGnCbbDE7pH-oUURTZHOre7h5o\";","/* jshint esversion: 6 */\n\nimport L from 'leaflet';\n\nexport const pointToLayer = (t, i, col) => {\n  return new L.CircleMarker(i, {\n    radius: 5,\n    weight: 1,\n    color: col ? col : false\n  });\n};\n\n\nexport const onEachFeature = (feature, layer, info) => {\n  const html = Object.entries(feature.properties).map(e => {\n    if (!e[1]){\n      return false;\n    }\n    return `<strong>${e[0]}</strong>: ${e[1]}`;\n  });\n\n  layer.bindPopup(\n    html.filter(Boolean).join('<br>') +\n    `<hr><strong>${info.name}</strong><br>\n    <a href=\"${info.info}\" title=\"More information\">${info.info}</a>\n    `);\n};\n","import React, { useState, useEffect } from 'react';\nimport { TileLayer, LayersControl, GeoJSON } from 'react-leaflet';\nimport { GoogleLayer } from 'react-leaflet-google-v2';\nimport axios from 'axios';\n\nimport PathsPlaces from './PathsPlaces';\nimport { Themes as GisThemes} from '../../Services/Cfg/remoteGisSources';\nimport GoogleApiKey from '../../Services/Cfg/GoogleApiKey';\nimport { pointToLayer, onEachFeature } from './Defaults';\n\nconst { BaseLayer, Overlay } = LayersControl;\n\n\nexport default function Layers(props){\n\n  const [remotes, setRemotes] = useState();\n\n  useEffect( ()=>{\n    let remotesArr = [];\n    const axiosArray = GisThemes.map( e => {\n      \n      remotesArr.push({\n        name: e.name,\n        url: e.url,\n        info: e.info\n      });\n      return axios({\n        method: 'get',\n        url: e.url\n      });\n    });\n    axios.all(axiosArray).then(respArr => {\n      respArr.map((geojson, k) => {\n        remotesArr[k].geojson = geojson.data;\n        return true;\n      });\n      setRemotes(remotesArr);\n    });\n  }, []);\n\n  return (\n    <LayersControl position=\"topright\">\n\n      {\n      // <BaseLayer name=\"Imperium (Pelagios)\">\n      //   <TileLayer url=\"http://pelagios.org/tilesets/imperium/{z}/{x}/{y}.png\" />\n      // </BaseLayer>\n      }\n\n      <BaseLayer name=\"AWMC\">\n        <TileLayer url=\"http://{s}.tiles.mapbox.com/v3/isawnyu.map-knmctlkh/{z}/{x}/{y}.png\" />\n      </BaseLayer>\n\n      <BaseLayer name=\"Imperium (DARE)\" checked=\"true\">\n        <TileLayer url=\"https://dh.gu.se/tiles/imperium/{z}/{x}/{y}.png\" />\n      </BaseLayer>\n\n      <BaseLayer name=\"OpenStreetMap\">\n        <TileLayer url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\" />\n      </BaseLayer>\n\n      <BaseLayer name=\"Google Maps\">\n        <GoogleLayer googlekey={GoogleApiKey}  maptype=\"ROADMAP\" />\n      </BaseLayer>\n\n      <BaseLayer name=\"Google Satellite\">\n        <GoogleLayer googlekey={GoogleApiKey}  maptype=\"SATELLITE\" />\n      </BaseLayer>\n\n      <BaseLayer name=\"Composite: A Map of Lower Egypt from Various Surveys by A. Arrowsmith (1807)\">\n        <TileLayer\n            attribution='&copy; <a href=\"https://paths.uniroma1.it/\">PAThs: Archaeological Atlas of Coptic Literature</a>'\n            url=\"https://swift.cloud.garr.it/swift/v1/arrowsmith-1807/{z}/{x}/{y}.png\"\n            maxZoom={15}\n            />\n      </BaseLayer>\n      \n      <BaseLayer name=\"Carte geographique de l'Egypte et des pays environnans by Pierre Jacotin (1818, 1828)\">\n        <TileLayer\n          attribution='&copy; <a href=\"https://paths.uniroma1.it/\">PAThs: Archaeological Atlas of Coptic Literature</a>'\n          url=\"https://swift.cloud.garr.it/swift/v1/jacotin-1827/{z}/{x}/{y}.png\"\n          maxZoom={15}\n          />\n      </BaseLayer>\n\n      <BaseLayer name=\"Series 4085 - GB &amp; USA (1941)\">\n        <TileLayer\n          attribution='&copy; <a href=\"https://paths.uniroma1.it/\">PAThs: Archaeological Atlas of Coptic Literature</a>'\n          url=\"https://swift.cloud.garr.it/swift/v1/series-4085-gb-usa-1941/{z}/{x}/{y}.png\"\n          maxZoom={15}\n          />\n      </BaseLayer>\n\n      <BaseLayer name=\"Series P502 - USA (1954)\">\n        <TileLayer\n          attribution='&copy; <a href=\"https://paths.uniroma1.it/\">PAThs: Archaeological Atlas of Coptic Literature</a>'\n          url=\"https://swift.cloud.garr.it/swift/v1/series-p502-usa-1954/{z}/{x}/{y}.png\"\n          maxZoom={14}\n          />\n      </BaseLayer>\n      \n      <BaseLayer name=\"Series 1404, Great Britain War Office and Air Ministry, 1958-\">\n        <TileLayer\n          attribution='&copy; <a href=\"https://paths.uniroma1.it/\">PAThs: Archaeological Atlas of Coptic Literature</a>'\n          url=\"https://swift.cloud.garr.it/swift/v1/imw-1m-1960/{z}/{x}/{y}.png\"\n          maxZoom={13}\n          />\n      </BaseLayer>\n      \n      <BaseLayer name=\"International Map of the World (1960)\">\n        <TileLayer\n          attribution='&copy; <a href=\"https://paths.uniroma1.it/\">PAThs: Archaeological Atlas of Coptic Literature</a>'\n          url=\"https://swift.cloud.garr.it/swift/v1/imw-1m-1960/{z}/{x}/{y}.png\"\n          maxZoom={12}\n          />\n      </BaseLayer>\n      \n      <BaseLayer name=\"Tactical Pilotage Chart Series - World (1979)\">\n        <TileLayer\n          attribution='&copy; <a href=\"https://paths.uniroma1.it/\">PAThs: Archaeological Atlas of Coptic Literature</a>'\n          url=\"https://swift.cloud.garr.it/swift/v1/tpc-500k-1979/{z}/{x}/{y}.png\"\n          maxZoom={14}\n          />\n      </BaseLayer>\n      <BaseLayer name=\"Ministry of Finance, Egypt - Atlas of Egypt: Lower and Upper Egypt (1914)\">\n        <TileLayer\n          attribution='&copy; <a href=\"https://paths.uniroma1.it/\">PAThs: Archaeological Atlas of Coptic Literature</a>'\n          url=\"https://swift.cloud.garr.it/swift/v1/min-fin-1914/{z}/{x}/{y}.png\"\n          maxZoom={17}\n          />\n      </BaseLayer>\n      \n      { \n      props.shownPlaces &&\n        <PathsPlaces shownPlaces={ props.shownPlaces } onAdd={ props.onAdd } />\n      }\n      {\n        remotes && remotes.map( (r, i) => {\n          \n          const col = '#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6);\n          return (<Overlay name={r.name} key={i}>\n            <GeoJSON\n              data={r.geojson}\n              pointToLayer={ (t, i) => pointToLayer(t, i, col) }\n              onEachFeature={ (feature, layer) => onEachFeature(feature, layer, r) }\n              />\n          </Overlay>)\n        })\n      }\n    </LayersControl>\n  );\n\n}\n","import axios from 'axios';\nimport SavedQueries from '../SavedQueries';\n\n\nlet baseUrl = 'https://bdus.cloud/db/';\n\nif (window.location.hostname === 'localhost'){\n  baseUrl = 'http://bdus.localhost/';\n}\n\nbaseUrl += 'api/paths/';\n\nexport default class Database {\n\n  static getData(url, params, callback) {\n\n    url = baseUrl + url;\n\n    axios({\n      method: 'post',\n      url: url,\n      params: params,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    })\n    .then(res => {\n      if (res.data.type && res.data.type === 'error'){\n        console.log(`API error: ${res.data.text}`);\n        return false;\n      }\n      callback(res.data);\n    })\n    .catch( res => {\n      if(res instanceof Error) {\n        console.log(res.message);\n      } else {\n        console.log(res.data);\n      }\n    });\n  }\n\n  static getBaseUrl(){\n    return baseUrl;\n  }\n\n  static getUniqueVal(tb, fld, string, cb) {\n    this.getData('./' + tb, {\n      verb: 'getUniqueVal',\n      tb: tb.replace('paths__', ''),\n      fld: fld,\n      s: string\n    }, d => { cb(d); }, true);\n\n  }\n\n  static getSaved(grp, q, page, cb) {\n    if (typeof SavedQueries[grp][q] === 'undefined') {\n      cb({\n        status: 'error',\n        text: `No saved query found for id: ${grp}.${q}`\n      });\n      return;\n    } else {\n      SavedQueries[grp][q].data.page = page;\n      this.getData(SavedQueries[grp][q].url, SavedQueries[grp][q].data, d => {\n        cb(d, SavedQueries[grp][q].title);\n      });\n    }\n  }\n\n  static getSimple(tb, fld, val, strict, page, cb){\n    const data = {\n      verb: 'search',\n      shortsql: `@${tb}~?${fld.replace(':', '.')}|${ strict ? '=' : 'LIKE' }|${ strict ? val : `%${val}%`}`,\n      page: page\n    };\n    this.getData('', data, d => { cb(d); }, true);\n  }\n\n  /**\n   * Executes an advanced query on the database\n   * @param  {String}   tb   Table to be queried, no prefix\n   * @param  {Object}   data Object of query data: {a:{f:'fieldname', v:'value', o: 'operator'}, a2:{f:'fieldname', v:'value', o: 'operator', c: 'connector'}}\n   * @param  {Integer}   page Page number\n   * @param  {Function} cb   Callback function\n   */\n  static getAdv(tb, data, page, cb) {\n    let where = [];\n    Object.entries(data).forEach(([k, v]) => {\n      let wp = [];\n      switch(v.o){\n        case 'LIKE':\n          v.v = `%${v.v}%`;\n          break;\n        case 'starts_with':\n          v.o = 'LIKE';\n          v.v = `${v.v}%`;\n          break;\n        case 'ends_with':\n          v.o = 'LIKE';\n          v.v = `%${v.v}`;\n          break;\n        case 'is_empty':\n          v.o = 'is';\n          v.v = '^null';\n          v.c = 'or'\n          where.push(`${v.f.replace(':', '.')}|=|^`);\n          break;\n        case 'is_not_empty':\n          v.o = 'is not';\n          v.v = '^null';\n          v.c = 'or'\n          where.push(`${v.f.replace(':', '.')}|!=|^`)\n          break;\n      }\n      if (v.c) {\n        wp.push(v.c);\n      }\n      wp.push(v.f.replace(':', '.'));\n      wp.push(v.o);\n      wp.push(v.v);\n      where.push(wp.join('|'));\n    });\n\n    this.getData('', {\n        verb: 'search',\n        shortsql: `@${tb}~?${where.join('||')}`,\n        page: page\n      }, d => { cb(d); }\n    );\n  }\n\n  static getStr(tb, string, page, cb) {\n    this.getData(tb, {\n      verb: 'search',\n      type: 'fast',\n      string: string,\n      page: page\n    }, d => { cb(d, 'Search [' + string + '] in ' + d.head.table_label); }, true);\n  }\n\n  static getAll(tb, page, cb) {\n    this.getData('', {\n      verb : 'search',\n      shortsql: `@${tb}`,\n      page: page\n    }, d => { cb(d); });\n  }\n\n  static getOne(tb, id, cb) {\n    this.getData('', {\n      tb: tb,\n      verb : 'read',\n      id : id\n    }, d => { cb(d); });\n  }\n\n  static inspect(tb, cb) {\n    this.getData('' , {\n      tb: tb,\n      'verb':'inspect'\n    }, d => { cb(d); });\n  }\n\n  static getChart(id, cb) {\n    this.getData('' + id, {\n      id: id,\n      'verb':'getChart'\n    }, d => { cb(d); });\n  }\n\n  static getPlaces(shortsql, cb) {\n    let where = '1';\n    if (shortsql){\n      let where_arr = shortsql.split('?');\n      where_arr.shift();\n      where = encodeURIComponent(where_arr.join('?'));\n    }\n\n    this.getData('?verb=search&geojson=true&shortsql='+\n      [\n        '@places',\n        '[geodata.geometry,id,name,pleiades,typology,{@m_toponyms~[toponym|group_concat~?table_link|=|paths__places||and|id_link|=|^places.id}:toponyms',\n        `?${where}`,\n        '-500:0'\n      ].join('~'),\n      {},\n      d => { cb( d ); }\n    );\n  }\n\n  static getMsPlaces(ms_where, cb) {\n    // Where is set only if a valid filter is provided.\n    let where = '';\n    if(ms_where !== '@manuscripts'){\n      where = `~?${ms_where}`;\n    }\n    this.getData('', {\n      verb: 'search',\n      geojson: 1,\n      shortsql: [\n        '@places',\n        ']m_msplaces||paths__places.id|=|^m_msplaces.place',\n        `?m_msplaces.table_link|=|paths__manuscripts||and|m_msplaces.id_link|in|{@manuscripts~[id${where}}~*places.id,places.name,places.pleiades,places.typology,geodata.geometry`\n      ].join('~')\n    }, d => cb(d) );\n  }\n\n}\n","import React, { Component } from 'react';\nimport { Map } from 'react-leaflet';\nimport { InputGroup, InputGroupAddon, Input } from 'reactstrap';\nimport qs from 'qs';\nimport { Sidebar, Tab } from 'react-leaflet-sidebarv2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nimport Header from \"../mainLayout/Header\"\nimport ListPlaces from './ListPlaces';\nimport UrlFilterButton from './UrlFilterButton';\nimport Legend from './Tabs/Legend';\nimport MapSavedQueries from './Tabs/MapSavedQueries';\nimport ClearButton from './ClearButton';\nimport Loading from '../Loading/Loading';\nimport ShowError from '../ShowError/ShowError';\n\nimport Layers from './Map/Layers';\n\nimport Database from '../Services/Database/Database';\n\nimport './PathsMap.css';\n\n\n\nexport default class PathsMap extends Component {\n\n  constructor(props) {\n\n    super(props);\n    this.state = {\n      places: null,\n      shownPlaces: null,\n      urlFilter: false,\n      sidebarCollapsed: false,\n      selected: 'home',\n      manualFilter: '',\n      error: false,\n      mapBounds: false,\n      zoom: false,\n      geoJsonBounds: false\n    };\n    this.placesLayerRef = React.createRef();\n    this.mapRef = React.createRef();\n  }\n\n  onSidebarClose() {\n    this.setState({\n      sidebarCollapsed: true\n    });\n  }\n\n  onSidebarOpen(id) {\n    this.setState({\n      sidebarCollapsed: false,\n      selected: id,\n    })\n  }\n\n  filterPlaces(e) {\n    const str =  e.target.value;\n    let fgj = {};\n    if (str === ''){\n      fgj = this.state.places;\n    } else {\n      fgj = {\n        \"type\": \"FeatureCollection\",\n        \"features\": []\n      };\n      for (const val of Object.values(this.state.places.features)) {\n        if (Object.values(val.properties).join('|').toLowerCase().includes(str.toLowerCase())){\n          fgj.features.push(val);\n        }\n      }\n    }\n\n    this.setState({\n      manualFilter: str,\n      shownPlaces: fgj\n    });\n    this.fitMapToBounds();\n  }\n\n  clearFiltered(){\n    this.setState({\n      manualFilter: '',\n      shownPlaces: this.state.places\n    });\n    this.fitMapToBounds();\n  }\n\n  fitMapToBounds(){\n    let bounds = [ [19.700194, 16.570227], [35.4737, 32.869317] ];\n    if (this.state.geoJsonBounds && bounds._northEast && bounds._southWest){\n      bounds = this.state.geoJsonBounds;\n      if(bounds._northEast.lat === bounds._southWest.lat && bounds._northEast.lng === bounds._southWest.lng){\n        bounds.pad();\n      }\n    }\n    this.mapRef.current.leafletElement.fitBounds(bounds);\n  }\n\n\n  fetchData(savedQ, locationSearch){\n    if (savedQ) {\n      Database.getSaved('map', savedQ, null, data => {\n        this.setState({\n          places: data,\n          shownPlaces: data,\n          urlFilter: true\n        });\n        this.fitMapToBounds()\n      });\n    } else if (locationSearch) {\n      const qstring = qs.parse(this.props.location.search, {ignoreQueryPrefix: true})\n      if (qstring.tb === 'manuscripts') {\n        Database.getMsPlaces(qstring.shortsql, data => {\n          this.setState({\n            places: data,\n            shownPlaces: data,\n            urlFilter: qstring.shortsql\n          });\n          this.fitMapToBounds()\n        });\n      } else if (qstring.tb === 'places') {\n        Database.getPlaces(qstring.shortsql, data => {\n          this.setState({\n            places: data,\n            shownPlaces: data,\n            urlFilter: qstring.shortsql\n          });\n          this.fitMapToBounds()\n        });\n      } else {\n        return false;\n      }\n\n    } else {\n      Database.getPlaces(null, data => {\n        if (data.type && data.type === 'error') {\n          this.setState({\n            error: <div>Sorry. There was an error in getting the data from database. Please report this error to <a href=\"mailto:julian.bogdani@uniroma1.it\">julian.bogdani@uniroma1.it</a> and be sure to copy and paste the following lines:<br /><div className=\"border p-3 mt-3\"><code>{window.location.href}</code><pre>{data.text}</pre></div></div>\n          });\n          return;\n        }\n        this.setState({\n          places: data,\n          shownPlaces: data,\n        });\n        this.fitMapToBounds();\n      });\n    }\n  }\n\n  onViewportChanged(e){\n    const mapBounds = this.mapRef.current.leafletElement.getBounds();\n    const zoom = e.zoom;\n    this.setState({\n      mapBounds: mapBounds,\n      zoom: zoom\n    });\n  }\n\n\n\n  UNSAFE_componentWillReceiveProps(nextProps){\n    if(nextProps !== this.props ){\n      this.setState({\n        places: null,\n        urlFilter: null\n      });\n      this.fetchData(nextProps.match.params.data, null);\n    }\n  }\n\n\n  componentDidMount(){\n    this.fetchData(this.props.match.params.data, this.props.location.search);\n  }\n\n  showGeoJson(){\n    if (!this.state.shownPlaces){\n      return <div style={{ textAlign: 'center', zIndex: 999, marginTop: '5rem'}}>\n          <Loading>Loading map data...</Loading>\n        </div>\n    }\n  }\n  onAddgeoJson(e){\n    this.setState({\n      geoJsonBounds: e.target.getBounds()\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"maxHeight\">\n        <Header location={this.props.location} />\n          <main role=\"main\" className=\"maxHeight\">\n\n          <Sidebar id=\"sidebar\" collapsed={this.state.sidebarCollapsed} selected={this.state.selected}\n                   onOpen={this.onSidebarOpen.bind(this)} onClose={this.onSidebarClose.bind(this)}\n                   closeIcon={<FontAwesomeIcon icon=\"caret-left\" />}>\n            <Tab id=\"home\" header=\"Home\" icon={<FontAwesomeIcon icon=\"home\" />}>\n\n              <div className=\"sidebarSearch\">\n                <InputGroup className=\"my-2\">\n                  <InputGroupAddon addonType=\"prepend\">\n                    Search:\n                  </InputGroupAddon>\n                  <Input type=\"search\" value={this.state.manualFilter} onChange={this.filterPlaces.bind(this)} placeholder=\"start typing to filter places...\" />\n                    <ClearButton show={this.state.manualFilter} onClick={ this.clearFiltered.bind(this) } />\n                </InputGroup>\n              </div>\n\n              <div className=\"mt-2\">\n                <UrlFilterButton urlFilter={ this.state.urlFilter } filter={ this.state.filter }/>\n                <ListPlaces places={ this.state.shownPlaces } />\n              </div>\n            </Tab>\n\n            <Tab id=\"savedQueries\" header=\"Saved queries\" icon={<FontAwesomeIcon icon=\"save\" />}>\n              <div className=\"mt-5\">\n                <MapSavedQueries />\n              </div>\n            </Tab>\n\n            <Tab id=\"legend\" header=\"Legend\" icon={<FontAwesomeIcon icon=\"info\" />}>\n              <div className=\"mt-5\">\n                <Legend />\n              </div>\n            </Tab>\n          </Sidebar>\n\n          {this.state.error && <ShowError>{this.state.error}</ShowError>}\n\n          { !this.state.shownPlaces && <div style={{ position: 'absolute', top: '5rem', textAlign: 'center', zIndex: 999, width: '100%'}}>\n                <Loading>Loading map data...</Loading>\n              </div>\n          }\n\n          <Map\n              className=\"sidebar-map maxHeight\"\n              zoomControl={true}\n              ref={this.mapRef}\n              onViewportChanged={ this.onViewportChanged.bind(this) }\n              maxZoom=\"25\"\n              >\n\n          <Layers\n              shownPlaces={ this.state.shownPlaces }\n              onAdd={this.onAddgeoJson.bind(this) }\n              mapBounds={this.state.mapBounds}\n              zoom={this.state.zoom}\n            />\n          </Map>\n        </main>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Card, CardTitle, CardBody, ListGroup, ListGroupItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { Link } from 'react-router-dom';\n\nimport SavedQueries from '../Services/SavedQueries';\n\nexport default class SavedQueriesList extends Component {\n\n  render(){\n    const tblabel = this.props.tblabel;\n    const tb = this.props.tb;\n\n    return (\n      <div>\n        <Card className=\"mt-5 mb-5\" color=\"light\">\n          <div className=\"text-right\">\n            <button type=\"button\" className=\"close mr-2 mt-2\" aria-label=\"Close\" onClick={this.props.closeFn}>\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n        <CardBody>\n          <CardTitle>Saved queries for {tblabel}</CardTitle>\n            <ListGroup>\n              { Object.values(SavedQueries[tb]).map( (e, i) => {\n                return <ListGroupItem key={i}  onClick={this.props.closeFn} className=\"mb-3\" tag={Link} to={ `/search/${tb}/saved?q=${e.id}`} color=\"secondary\">\n                    <FontAwesomeIcon icon=\"arrow-circle-right\" /> { e.title }\n                </ListGroupItem>\n              }) }\n            </ListGroup>\n        </CardBody>\n      </Card>\n      </div>\n    );\n  }\n}\n","/*jshint esversion: 6 */\n\n\nexport default {\n    \"coptic\": [\n      \"authors.copticname\",\n      \"titles.text\",\n      \"colophons.text\"\n    ],\n    \"greek\": [\n      \"authors.greekname\"\n    ],\n    \"hidden\": [\n      \"manuscripts.creator\",\n      \"collections.creator\",\n      \"collections.cmclname\",\n      \"works.id\",\n      \"works.creator\",\n      \"works.shelfmarks\",\n      \"works.period\",\n      \"works.problems\",\n      \"titles.creator\",\n      \"titles.taggedtext\",\n      \"colophons.creator\",\n      \"authors.id\",\n      \"authors.creator\",\n      \"authors.cmclname\",\n      \"editors.cmclname\",\n      \"places.creator\",\n      \"places.hasplans\",\n      \"places.hasphotos\",\n      \"persons.id\",\n      \"persons.creator\",\n      \"biblio.creator\",\n      \"biblio.editors\",\n      \"m_quires.id\",\n      \"m_hands.id\",\n      \"m_placephase.id\",\n      \"m_msplaces.id\"\n    ],\n    \"id_fld\": {\n      \"manuscripts\": \"id\",\n      \"collections\": \"fullname\",\n      \"works\": \"cmcl\",\n      \"titles\": \"cc\",\n      \"colophons\": \"id\",\n      \"authors\": \"name\",\n      \"places\": \"name\",\n      \"persons\": \"name\"\n    },\n    \"searchDefault\": {\n      \"manuscripts\": \"id\",\n      \"collections\": \"fullname\",\n      \"works\": \"cmcl\",\n      \"titles\": \"cc\",\n      \"colophons\": \"id\",\n      \"authors\": \"name\",\n      \"places\": \"paths__m_toponyms:toponym\",\n      \"persons\": \"name\"\n    },\n    \"preview\": {\n      \"manuscripts\":  [ \"id\", \"cmclid\", \"tm\", \"ldab\", \"bookform\", \"writingsupport\" ],\n      \"collections\":  [ \"id\", \"fullname\", \"cmclname\", \"country\", \"town\", \"institution\", \"name\", \"notes\" ],\n      \"works\":        [ \"id\", \"cmcl\", \"title\", \"cpg\" ],\n      \"titles\":       [ \"cc\", \"type\", \"workcc\", \"msid\" ],\n      \"colophons\":    [ \"id\", \"msid\", \"dialect\", \"chronofrom\", \"chronoto\", \"datingcriteria\" ],\n      \"authors\":      [ \"name\", \"title\", \"copticname\", \"greekname\", \"cmclname\" ],\n      \"places\":       [ \"id\", \"name\", \"tmgeo\", \"pleiades\", \"region\", \"area\", \"episcopalsee\" ],\n      \"persons\":      [ \"id\", \"name\", \"type\", \"profession\", \"patronymic\" ]\n    },\n    \"label\": {\n      \"manuscripts\": \"Manuscripts\",\n      \"collections\": \"Collections\",\n      \"works\": \"Works\",\n      \"titles\": \"Titles\",\n      \"colophons\": \"Colophons\",\n      \"authors\": \"Authors\",\n      \"places\": \"Places\",\n      \"persons\": \"Persons attested in colophons\"\n    },\n\n    \"fld_whitelist\": [\n        \"paths__places:id\",\n        \"paths__places:name\",\n        \"paths__places:tmgeo\",\n        \"paths__places:pleiades\",\n        \"paths__places:region\",\n        \"paths__places:area\",\n        \"paths__places:meris\",\n        \"paths__places:nomos\",\n        \"paths__places:province\",\n        \"paths__places:episcopalsee\",\n        \"paths__places:typology\",\n        \"paths__places:description\",\n        \"paths__places:hasmonastery\",\n        \"paths__places:isnomoscapital\",\n        \"paths__places:status\",\n\n        \"paths__m_toponyms:toponym\",\n        \"paths__m_placephase:fperiod\",\n        \"paths__m_placephase:ftypology\",\n\n        \"paths__works:id\",\n        \"paths__works:cmcl\",\n        \"paths__works:title\",\n        \"paths__works:cpg\",\n        \"paths__works:cant\",\n        \"paths__works:cavt\",\n        \"paths__works:bho\",\n        \"paths__works:bhg\",\n        \"paths__works:bhl\",\n        \"paths__works:cae\",\n\n        \"paths__works:litperiod\",\n        \"paths__m_wkauthors:type\",\n        \"paths__m_wkauthors:author\",\n\n        \"paths__authors:id\",\n        \"paths__authors:name\",\n        \"paths__authors:copticname\",\n        \"paths__authors:greekname\",\n        \"paths__authors:viaf\",\n        \"paths__authors:title\",\n        \"paths__authors:status\",\n\n        \"paths__titles:id\",\n        \"paths__titles:cc\",\n        \"paths__titles:workcc\",\n        \"paths__titles:msid\",\n        \"paths__titles:type\",\n        \"paths__titles:text\",\n        \"paths__titles:translation\",\n\n        \"paths__colophons:id\",\n        \"paths__colophons:msid\",\n        \"paths__colophons:chronofrom\",\n        \"paths__colophons:chronoto\",\n        \"paths__colophons:dialect\",\n        \"paths__colophons:greektext\",\n        \"paths__colophons:writingaxis\",\n        \"paths__colophons:cryptography\",\n        \"paths__colophons:minusculecopitc\",\n        \"paths__colophons:minusculegreek\",\n        \"paths__colophons:text\",\n        \"paths__colophons:translation\",\n\n        \"paths__collections:id\",\n        \"paths__collections:fullname\",\n        \"paths__collections:country\",\n        \"paths__collections:town\",\n        \"paths__collections:institution\",\n        \"paths__collections:name\",\n\n        \"paths__manuscripts:id\",\n        \"paths__m_shelfmarks:collection\",\n        \"paths__m_shelfmarks:shelfmark\",\n        \"paths__manuscripts:cmclid\",\n        \"paths__manuscripts:tm\",\n        \"paths__manuscripts:ldab\",\n        \"paths__manuscripts:lcbm\",\n        \"paths__manuscripts:dbmnt\",\n        \"paths__manuscripts:alias\",\n        \"paths__manuscripts:bookform\",\n        \"paths__manuscripts:writingsupport\",\n        \"paths__manuscripts:issinglefrag\",\n        \"paths__manuscripts:isbookbinding\",\n        \"paths__manuscripts:reusedinbinding\",\n        \"paths__manuscripts:stratigraphy\",\n        \"paths__manuscripts:modernhistory\",\n        \"paths__manuscripts:contents\",\n        \"paths__manuscripts:dialect\",\n        \"paths__manuscripts:chronofrom\",\n        \"paths__manuscripts:chronoto\",\n        \"paths__m_msplaces:place\",\n        \"paths__m_msplaces:type\",\n        \"paths__m_msplaces:sourceinfo\",\n        \"paths__manuscripts:datingsource\",\n        \"paths__manuscripts:leaftotextant\",\n        \"paths__manuscripts:quiresextant\",\n        \"paths__manuscripts:columns\",\n        \"paths__manuscripts:linespercolumn\",\n        \"paths__manuscripts:charsperline\",\n        \"paths__manuscripts:leafw\",\n        \"paths__manuscripts:leafh\",\n        \"paths__manuscripts:prophw\",\n        \"paths__manuscripts:propwt\",\n        \"paths__manuscripts:quiresig\",\n        \"paths__manuscripts:quiretype\",\n        \"paths__manuscripts:quireposition\",\n        \"paths__m_quires:quirepaptype\",\n        \"paths__m_quires:quirepartype\",\n        \"paths__manuscripts:pagination\",\n        \"paths__manuscripts:pagtype\",\n        \"paths__manuscripts:pagposition\",\n        \"paths__manuscripts:foliation\",\n        \"paths__manuscripts:foltype\",\n        \"paths__manuscripts:folposition\",\n        \"paths__manuscripts:folnotes\",\n        \"paths__manuscripts:lectionalsigns\",\n        \"paths__manuscripts:structuralsigns\",\n        \"paths__manuscripts:signsnotes\",\n        \"paths__manuscripts:abbreviations\",\n        \"paths__manuscripts:ruling\",\n        \"paths__manuscripts:rulingtype\",\n        \"paths__manuscripts:rulingtool\",\n        \"paths__manuscripts:pricking\",\n        \"paths__manuscripts:leaftabs\",\n        \"paths__manuscripts:kolleseis\",\n        \"paths__manuscripts:kolleseseisdescr\",\n        \"paths__manuscripts:bindings\",\n        \"paths__manuscripts:boardmat\",\n        \"paths__manuscripts:sewings\",\n        \"paths__manuscripts:covers\",\n        \"paths__manuscripts:marginalnotes\",\n        \"paths__manuscripts:greekminuscule\",\n        \"paths__manuscripts:palimpsest\",\n        \"paths__manuscripts:restancient\",\n        \"paths__manuscripts:restmodern\",\n        \"paths__manuscripts:pgmcol\",\n        \"paths__manuscripts:pgmlocation\",\n        \"paths__manuscripts:blktype\",\n        \"paths__manuscripts:blklocation\",\n        \"paths__manuscripts:decortype\",\n        \"paths__manuscripts:decorsubj\",\n        \"paths__manuscripts:decorationdescr\",\n        \"paths__manuscripts:sourceinfo\",\n        \"paths__manuscripts:status\",\n        \"paths__m_hands:handno\",\n        \"paths__m_hands:modulartypology\",\n        \"paths__m_hands:writingaxis\",\n        \"paths__m_hands:thickandthin\",\n        \"paths__m_hands:identification\",\n        \"paths__m_hands:writingnotes\",\n\n        \"paths__m_biblio:short\",\n        \"paths__m_biblio:details\",\n\n        \"paths__persons:id\",\n        \"paths__persons:name\",\n        \"paths__persons:type\",\n        \"paths__persons:profession\",\n        \"paths__persons:patronymiccarnal\",\n        \"paths__persons:patronymicspirit\",\n        \"paths__persons:hasbrother\",\n        \"paths__persons:hasfather\",\n        \"paths__persons:placebirth\",\n        \"paths__persons:placeaffiliation\",\n        \"paths__persons:sex\",\n        \"paths__persons:datefrom\",\n        \"paths__persons:dateto\",\n\n      ]\n};\n","import React, { Component } from 'react';\nimport { Jumbotron, Navbar, NavbarBrand, Nav, NavItem, NavLink } from 'reactstrap';\nimport { Link } from 'react-router-dom';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport SavedQueriesList from './SavedQueriesList';\nimport SavedQueries from '../Services/SavedQueries';\nimport Cfg from '../Services/Cfg/Cfg';\n\n\nclass SubHead extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showSaved: false\n    };\n  }\n\n  toggleSaved(e){\n    this.setState({\n      showSaved: !this.state.showSaved\n    });\n  }\n\n  render(){\n    const tblabel = this.props.tblabel ? this.props.tblabel : Cfg.label[this.props.tb];\n    const tb = this.props.tb;\n    const text = this.props.text ? <span className=\"subText\">{this.props.text}</span> : false;\n\n    let menuItems = [\n      {\n        to: '/search/' + tb + '/all',\n        icon: 'list-ul',\n        text: 'Show all'\n      },\n      {\n        to: '/search/' + tb ,\n        icon: 'search',\n        text: 'Search'\n      },\n      {\n        to: '/search/' + tb + '/adv',\n        icon: 'search-plus',\n        text: 'Advanced search'\n      }\n    ];\n\n    return (\n      <div>\n        <Jumbotron className=\"p-4\">\n\n        <div className=\"container\">\n          <h2>{text}</h2>\n          <Navbar color=\"light\" light expand=\"xs\" className=\"ml-auto\">\n            <NavbarBrand>\n              <h3><small>{ tblabel }</small></h3>\n            </NavbarBrand>\n            <Nav className=\"ml-auto\" navbar>\n              {\n                menuItems.map( (e, k) => {\n                  return (\n                    <NavItem key={k}>\n                      <NavLink to={e.to} tag={Link}>\n                        <FontAwesomeIcon icon={e.icon} /> <span className=\"d-none d-md-inline\">{e.text}</span>\n                      </NavLink>\n                    </NavItem>\n                  );\n                })\n              }\n              { SavedQueries[tb] && (<NavItem><NavLink onClick={this.toggleSaved.bind(this)} style={{cursor: 'pointer'}}><FontAwesomeIcon icon=\"save\" /><span className=\"d-none d-md-inline\"> Saved queries</span></NavLink></NavItem>)}\n            </Nav>\n          </Navbar>\n\n          {this.state.showSaved && <SavedQueriesList  tb={tb} tblabel={tblabel} closeFn={this.toggleSaved.bind(this)}/>}\n        </div>\n      </Jumbotron>\n      </div>\n    );\n  }\n}\n\nexport default SubHead;\n","import React from 'react';\nimport qs from 'qs';\nimport { Pagination, PaginationItem, PaginationLink } from 'reactstrap';\nimport { Link } from 'react-router-dom';\n\n\nfunction build_object(path, queryString, tot_rows, curr_page = 1) {\n\n  const rpp = 30;\n\n  let tot_pages = Math.ceil(tot_rows / rpp);\n  let result = [];\n\n  curr_page = parseInt(curr_page, 10);\n\n  let qString = qs.parse(queryString, {ignoreQueryPrefix: true});\n\n  if (curr_page - 2 > 0 ) {\n    qString.page = 1;\n    result.push({\n      to :  path + '?' + qs.stringify(qString),\n      text : 1\n    });\n  }\n\n  if (curr_page - 3 > 0 ) {\n    result.push({\n      to : '#',\n      disabled : true,\n      text : '...'\n    });\n  }\n\n\n  // -1 page\n  if (curr_page - 1 > 0 ) {\n    qString.page = (curr_page - 1);\n    result.push({\n      to : path + '?' + qs.stringify(qString),\n      text : qString.page\n    });\n  }\n\n  // current page\n  qString.page = curr_page;\n  result.push({\n    to : path + '?' + qs.stringify(qString),\n    active : true,\n    text : curr_page\n  });\n\n  // +1 page\n  if (curr_page + 1 < tot_pages ) {\n    qString.page = (curr_page + 1);\n    result.push({\n      to : path + '?' + qs.stringify(qString),\n      text : qString.page\n    });\n  }\n\n    // +3 page\n  if (curr_page + 2 < tot_pages ) {\n    result.push({\n      to : '#',\n      disabled : true,\n      text : '...'\n    });\n  }\n\n  if (curr_page !== tot_pages ) {\n    qString.page = (tot_pages);\n    result.push({\n      to : path + '?' + qs.stringify(qString),\n      text : qString.page\n    });\n  }\n\n  return result;\n}\n\nexport default function PaginateResult (props) {\n\n\n    const result = build_object(\n      props.path,\n      props.search,\n      props.totalRows,\n      props.page\n    );\n\n    return (\n      <Pagination>\n        <PaginationItem>\n          <PaginationLink>Pages: </PaginationLink>\n        </PaginationItem>\n        { result.map( (r, i) => {\n          const props = {\n            disabled: r.disabled,\n            active: r.active\n          };\n         return <PaginationItem {...props} key={i}>\n           <PaginationLink tag={Link} to= { r.to }>\n              { r.text }\n           </PaginationLink>\n         </PaginationItem>\n        }) }\n\n      </Pagination>\n    );\n}","import React from 'react';\n\n\nexport default function PaginateResultSummary (props) {\n\n    const curr_page =  props.page ? props.page : 1;\n    const start_at = curr_page * 30 - 30 + 1;\n    const up_to = (curr_page * 30) < props.totalRows ? curr_page * 30 : props.totalRows;\n\n    return (\n      <div className=\"mb-3\">\n        Showing records <span className=\"badge badge-primary\">\n        { start_at }   { up_to } </span> of <span className=\"badge badge-success\">\n        { props.totalRows }</span> records found\n      </div>\n    );\n}","import React, { Component } from 'react';\nimport { Row, Col, Table, Card, CardBody, CardHeader, ButtonGroup, Button } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Link } from 'react-router-dom';\n\nclass ItemPreviewWrapper extends Component {\n\n  render() {\n    return (\n      <Row>{ this.props.children }</Row>\n    );\n  }\n}\n\nclass ItemPreview extends Component {\n\n  render() {\n    /**\n     * Object containing data, key (column name): value \n     */\n    const el = this.props.record;\n    /**\n     * Full field name: table_name:fld_name\n     */\n    const flds = this.props.fields;\n\n    /**\n     * Current table name, with no prefix\n     */\n    const tb = this.props.tb;\n    /**\n     * Array of preview fields, no table, no prefix\n     */\n    const preview_flds = this.props.previewFlds;\n    /**\n     * Id field for tabel, no table, no prefix\n     */\n    const id_field = this.props.idField;\n\n    return (\n      <Col sm=\"4\">\n      \t<Card className=\"mt-3\" outline color=\"dark\">\n          <CardHeader tag=\"h4\">{ el[id_field] }</CardHeader>\n          <CardBody id={ el.id }>\n\n            <Table hover size=\"sm\">\n              <tbody>\n                {\n                  preview_flds.map( (e, k) => {\n                    return <tr key={k}>\n                      <th>{ flds[e] }</th>\n                      <td>{ el[e] }</td>\n                    </tr>\n                  } )\n                }\n              </tbody>\n            </Table>\n\n            <div className=\"clearfix\">\n              <div className=\"btn-group float-right\" role=\"group\">\n                <ButtonGroup>\n                  <Button size=\"sm\" color=\"info\" tag={Link} to={ '/' + [tb, el.id].join('/') }>\n                    <FontAwesomeIcon icon=\"eye\" /> View\n                  </Button>\n                </ButtonGroup>\n              </div>\n            </div>\n\n          </CardBody>\n    \t  </Card>\n      </Col>\n    );\n  }\n}\n\nexport {ItemPreview, ItemPreviewWrapper};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport default function OpenInMap(props) {\n\n  const tb = props.tb;\n  const shortsql = props.shortsql;\n\n  if (['manuscripts', 'places'].indexOf(tb) < 0){\n    return null;\n  }\n  return (\n    <div className=\"float-right mt-2\">\n      <Link to={'/map?tb=' + tb + '&shortsql=' + encodeURI(shortsql) } className=\"btn btn-warning\">\n        <FontAwesomeIcon icon=\"map-marker-alt\" /> View on Map\n      </Link>\n    </div>\n  );\n}\n\n","import React, { Component } from 'react';\nimport { Alert } from 'reactstrap';\nimport qs from 'qs';\nimport {withRouter} from 'react-router';\n\nimport Database from '../Services/Database/Database';\nimport PaginateResult from '../PaginateResult/PaginateResult';\nimport PaginateResultSummary from '../PaginateResult/PaginateResultSummary';\nimport { ItemPreview, ItemPreviewWrapper } from './ItemPreview';\nimport OpenInMap from '../Manuscripts/OpenInMap';\nimport Loading from '../Loading/Loading';\nimport Cfg from '../Services/Cfg/Cfg';\n\n\n\nclass Results extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      result: false\n    };\n  }\n\n  _fetchData(){\n    switch (this.props.type) {\n      case 'simple':\n        Database.getSimple(this.props.tb, this.props.fld, this.props.val, this.props.strict, this.props.page, d => {\n          this.setState({\n            result: d\n          });\n        });\n        break;\n\n        case 'adv':\n          Database.getAdv(this.props.tb, this.props.data, this.props.page, d => {\n            this.setState({\n              result: d\n            });\n          });\n          break;\n\n        case 'all':\n          Database.getAll(this.props.tb, this.props.page, d => {\n            this.setState({\n              result: d\n            });\n          });\n          break;\n\n        case 'saved':\n          Database.getSaved(this.props.tb, this.props.query, this.props.page, d => {\n            this.setState({\n              result: d\n            });\n          });\n          break;\n\n        case 'shortsql':\n          Database.getData('', {\n            verb: 'search',\n            shortsql: this.props.q,\n            page: this.props.page\n          }, d => {\n            this.setState({\n              result: d\n            });\n          });\n          break;\n\n        default:\n          console.log(`Unknown verb ${this.props.type}`);\n          return null;\n    }\n\n  }\n\n\n  componentDidUpdate(prevProps) {\n    if (\n      this.props.page !== prevProps.page\n      || this.props.fld !== prevProps.fld\n      || this.props.val !== prevProps.val\n      || this.props.strict !== prevProps.strict\n      || this.props.query !== prevProps.query\n    ) {\n      this._fetchData();\n    }\n  }\n\n  componentDidMount(){\n    this._fetchData();\n  }\n\n  render() {\n    if (!this.state.result) {\n      return <div className=\"container\"><Loading /></div>;\n    }\n\n    if(this.state.result.type === 'error') {\n      return (\n        <div>\n          <div className=\"container\">\n            <Alert color=\"danger\" className=\"mt-5\">\n                <h4 className=\"alert-heading\">We are so sorry!</h4>\n                <p>Something went terribly wrong. Please report this error to <a href=\"https://github.com/paths-erc/atlas/issues\">our public repository</a> in order to get it fixes as soon as possible.</p>\n            </Alert>\n            <div>\n              <p>Please file the current URL:</p>\n\n              <Alert color=\"info\" className=\"border p-3 m-2 ml-4\">{ window.location.href }</Alert>\n              <Alert color=\"info\" className=\"border p-3 m-2 ml-4\">{ decodeURIComponent(window.location.href) }</Alert>\n              <p>and the following error message</p>\n              <Alert color=\"info\" className=\"border p-3 m-2 ml-4\">\n                <pre>\n                {this.state.result.text}\n                </pre>\n              </Alert>\n              <p>Full error trace</p>\n              <Alert color=\"info\" className=\"border p-3 m-2 ml-4\">\n                <pre>\n                {this.state.result.trace}\n                </pre>\n              </Alert>\n            </div>\n          </div>\n        </div>\n      )\n    }\n\n    if(this.state.result.head.total_rows === 0) {\n      return (\n        <div>\n\n            <div className=\"container\">\n              <Alert color=\"warning\" className=\"mt-5\">\n                  <h4 className=\"alert-heading\">Ooops!</h4>\n                  No result found. Please reformulate the query.\n              </Alert>\n            </div>\n        </div>\n      )\n    }\n\n    return (\n    \t<div>\n\n        <div className=\"container\">\n\n          <div className=\"clearfix\">\n\n            <OpenInMap\n                tb={this.state.result.head.stripped_table}\n                shortsql={this.state.result.head.shortsql}\n                />\n\n            <PaginateResultSummary\n              totalRows={this.state.result.head.total_rows}\n              page={this.state.result.head.page}\n              query={this.state.result.head.query_arrived}\n              />\n\n            <PaginateResult\n                path={this.props.location.pathname}\n                search={ this.props.location.search }\n                totalRows={this.state.result.head.total_rows}\n                page={this.state.result.head.page}\n              />\n          </div>\n\n\n\n          <ItemPreviewWrapper>\n          {\n             this.state.result.records.map( (e, i) => {\n              return <ItemPreview\n                  idField = { Cfg.id_fld[this.props.match.params.table] }\n                  previewFlds = { Cfg.preview[this.props.match.params.table] }\n                  tb={this.props.match.params.table}\n                  record={e}\n                  fields={this.state.result.head.fields}\n                  key={i} />\n            })\n          }\n          </ItemPreviewWrapper>\n\n          <div className=\"pt-3\">\n            <PaginateResult\n                path={this.props.location.pathname}\n                search={ this.props.location.search }\n                totalRows={this.state.result.head.total_rows}\n                page={this.state.result.head.page}\n              />\n          </div>\n\n        </div>\n\n\t\t  </div>\n    );\n  }\n}\nexport default withRouter(Results);\n","import React, { Component } from 'react';\nimport { Alert } from 'reactstrap';\nimport qs from 'qs';\n\nimport SubHead from '../SubHead/SubHead';\nimport Results from './Results';\nimport SavedQueries from '../Services/SavedQueries';\n\n\n\n\nexport default class SearchSaved extends Component {\n\n  constructor(props) {\n    super(props);\n\n    const qstring = qs.parse(props.location.search, {ignoreQueryPrefix: true});\n    this.state = {\n      saved: qstring.q,\n      page: qstring.page\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    const old_qstring = qs.parse(prevProps.location.search, {ignoreQueryPrefix: true});\n    const new_qstring = qs.parse(this.props.location.search, {ignoreQueryPrefix: true});\n\n    if(old_qstring.page !== new_qstring.page){\n      this.setState({\n        page: new_qstring.page\n      });\n    }\n    if(old_qstring.q !== new_qstring.q){\n      this.setState({\n        saved: new_qstring.q\n      });\n    }\n  }\n\n  render() {\n    if (typeof SavedQueries[this.props.match.params.table][this.state.saved] === 'undefined'){\n      return (\n        <div className=\"container\">\n          <Alert color=\"warning\" className=\"mt-5\">\n              <h4 className=\"alert-heading\">Ooops!</h4>\n              No saved query <code>{this.state.saved}</code> found.\n          </Alert>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <SubHead tb={ this.props.match.params.table } text={SavedQueries[this.props.match.params.table][this.state.saved].title} />\n      \t<Results\n            tb={this.props.match.params.table}\n            query={this.state.saved}\n            type=\"saved\"\n            page={this.state.page}\n            />\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Select from 'react-select';\n\nimport Database from '../Services/Database/Database';\nimport Cfg from '../Services/Cfg/Cfg';\n\n\nexport default class FldSelect extends Component {\n\n  constructor(props) {\n    super();\n    this.state = {\n      fields: false,\n      fld: false\n    };\n  }\n\n  _setState(fldList, selected){\n    fldList = Cfg.fld_whitelist.map(id => {\n      if(fldList[id]){\n        return { value: id, label: fldList[id].label };\n      } else {\n        return false;\n      }\n    }).filter( i => { return i; } );\n\n    let selObj;\n    if (selected){\n      selObj= fldList.filter( e => {\n        return e.value === selected;\n      })[0];\n    } else {\n      if (Cfg.searchDefault[this.props.tb]){\n        const v = Cfg.searchDefault[this.props.tb].includes('paths') ? Cfg.searchDefault[this.props.tb] : `paths__${this.props.tb}:${Cfg.searchDefault[this.props.tb]}`;\n\n        selObj = fldList.filter( e => {\n          return e.value === v;\n        })[0];\n      } else {\n        selObj = fldList[0];\n      }\n      this.props.onChange(selObj);\n    }\n\n    this.setState({\n      fields: fldList,\n      fld: selObj\n    });\n  }\n\n\n  componentDidMount(){\n    Database.inspect(this.props.tb, data => {\n      this._setState(data.fields, this.props.fld);\n    });\n  }\n\n  render() {\n    if (!this.state.fields){\n      return null;\n    }\n\n    return (\n        <Select\n          defaultValue={ this.state.fld }\n          options={ this.state.fields }\n          onChange={ this.props.onChange }\n          />\n    );\n  }\n}\n","import React, {useState, useCallback} from 'react';\nimport { AsyncTypeahead } from 'react-bootstrap-typeahead';\n\nimport Database from '../Services/Database/Database';\n\nexport default function ValueInput (props) {\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [options, setOptions] = useState([]);\n\n  const handleSearch = useCallback((string) => {\n    setIsLoading(true);\n    const [tb, fld] = props.fld.split(':');\n    Database.getUniqueVal(tb, fld, string, d => {\n      setOptions(d);\n      setIsLoading(false)\n    });\n  }, [props.fld]);\n\n  const defSelected = props.val && props.val.customOption ? props.val.customOption.label :\n    ( props.val ? [props.val] : [] );\n\n  return (\n    \n    <AsyncTypeahead\n      id=\"get-value-from-db\"\n      isLoading={ isLoading }\n      minLength={1}\n      options={ options }\n      multiple={ false }\n      placeholder=\"Add a value\"\n      onSearch={handleSearch}\n      onChange={props.onChange}\n      onInputChange={props.onChange}\n      defaultSelected={ defSelected }\n      />\n  );\n}\n","import React, { Component } from 'react';\n\nimport { FormGroup, Input, Button, Col, Label } from 'reactstrap';\n\nimport FldSelect from './FldSelect';\nimport ValueInput from './ValueInput';\n\n\n\nexport default class CustomSearchForm extends Component {\n\n  constructor(props) {\n    super();\n    this.state = {\n      fld: props.fld,\n      val: props.val,\n      strict: props.strict === true\n    }\n\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this._changeField = this._changeField.bind(this);\n    this._changeVal = this._changeVal.bind(this);\n    this._changeStrict = this._changeStrict.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps !== this.props){\n      this.setState({\n        fld: this.props.fld,\n        val: this.props.val,\n        strict: this.props.strict ? true : false\n      });\n    }\n  }\n\n  _changeField(v){\n    this.setState({\n      fld: v.constructor === Object && v.value ? v.value : v\n    });\n  }\n  _changeVal(v){\n    this.setState({\n      val: v.constructor === Array ? v[0] : v\n    });\n  }\n  _changeStrict(e){\n    this.setState({\n      strict: e.target.checked\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    if (!this.state.val){\n      alert('Insert a value to continue');\n      return;\n    }\n    this.props.onSubmit(this.state.fld, this.state.val, this.state.strict);\n  }\n\n  render() {\n    return (\n      <div className=\"my-5\">\n        <form onSubmit={this.handleSubmit} className=\"form\">\n\n          <FormGroup row>\n\n            <Col sm={4}>\n              <FldSelect\n                  tb={ this.props.tb }\n                  fld={this.state.fld}\n                  onChange={ this._changeField }\n                  />\n            </Col>\n\n            <Col sm={5}>\n              <ValueInput\n                fld={ this.state.fld }\n                val={this.state.val}\n                onChange={this._changeVal}\n               />\n            </Col>\n\n            <Col sm={1}>\n              <Label check>\n                <Input\n                    name=\"strict\"\n                    type=\"checkbox\"\n                    checked={this.state.strict }\n                    onChange={this._changeStrict}\n                  /> Strict\n              </Label>\n            </Col>\n\n            <Col sm={2}> <Button type=\"submit\" color=\"success\" block>Search!</Button> </Col>\n          </FormGroup>\n\n        </form>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport qs from 'qs';\n\nimport SubHead from '../SubHead/SubHead';\nimport CustomSearchForm from './CustomSearchForm';\nimport Results from './Results';\n\n\n\nexport default class SearchSimple extends Component {\n\n  constructor(props) {\n    super();\n\n    const qstring = qs.parse(props.location.search, {ignoreQueryPrefix: true});\n    this.state = {\n      fld: qstring.f,\n      val: qstring.v,\n      strict: (qstring.s && qstring.s !== 'false' && qstring.s !== 'undefined'),\n      page: qstring.page\n    };\n\n    this._onFormSubmit = this._onFormSubmit.bind(this);\n  }\n\n  _onFormSubmit(fld, val, strict){\n    const s = `f=${encodeURIComponent(fld)}${ (strict ? \"&s=1\" : '') }&v=${encodeURIComponent(val)}`;\n\n    this.setState({\n      fld: fld,\n      val: val,\n      strict: strict\n    });\n\n    this.props.history.push(`/search/${this.props.match.params.table}?${s}`);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const qstring = qs.parse(this.props.location.search, {ignoreQueryPrefix: true});\n    if(this.state.page !== qstring.page){\n      this.setState({\n        page: qstring.page\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <SubHead tb={ this.props.match.params.table } text='Simple search' />\n\n      \t<div className=\"mt-3 p-1 container\">\n          <CustomSearchForm\n              tb={ this.props.match.params.table }\n              onSubmit={this._onFormSubmit}\n              fld={this.state.fld}\n              val={this.state.val}\n              strict={this.state.strict}\n             />\n          <hr />\n  \t\t  </div>\n\n        { this.state.fld && this.state.val && <Results\n            tb={this.props.match.params.table}\n            type=\"simple\"\n            fld={this.state.fld}\n            val={this.state.val}\n            strict={this.state.strict}\n            page={this.state.page}\n            />}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport {Input} from 'reactstrap';\n\n\nexport default class OperatorSelect extends Component {\n\n  render() {\n\n    const operators = [\n      {\n        'k': 'LIKE',\n        'v': 'Contains'\n      },\n      {\n        'k': '=',\n        'v': 'Is exactly'},\n      {\n        'k': 'NOT LIKE',\n        'v': 'Does not contain'},\n      {\n        'k': 'starts_with',\n        'v': 'Starts with'},\n      {\n        'k': 'ends_with',\n        'v': 'Ends with'},\n      {\n        'k': 'is_empty',\n        'v': 'Is empty'},\n      {\n        'k': 'is_not_empty',\n        'v': 'Is not empty'},\n      {\n        'k': '>',\n        'v': 'Is bigger than'},\n      {\n        'k': '<',\n        'v': 'Is smaller than'}\n    ];\n\n    return (\n      <div>\n        <Input type=\"select\" placeholder=\"select\" {...this.props}>\n          {operators.map( (f, i) => {\n            return (<option key={i} value={f.k}>{ f.v }</option>);\n          } ) }\n        </Input>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport {Input} from 'reactstrap';\n\n\nexport default function ConnectorSelect (props) {\n\n  return (\n    <div>\n      <Input type=\"select\" {...props}>\n        <option value=\"AND\">AND</option>\n        <option value=\"OR\">OR</option>\n      </Input>\n    </div>\n  );\n}\n","import React, { Component } from 'react';\nimport { Row, Col, Button } from 'reactstrap';\nimport qs from 'qs';\n\nimport SubHead from '../SubHead/SubHead';\nimport Results from './Results';\nimport FldSelect from './FldSelect';\nimport ValueInput from './ValueInput';\nimport OperatorSelect from './OperatorSelect';\nimport ConnectorSelect from './ConnectorSelect';\n\n\nexport default class AdvSearchForm extends Component {\n\n  constructor(props) {\n    super(props);\n\n    const qstring = qs.parse(props.location.search, {ignoreQueryPrefix: true});\n\n    let rows;\n    let show = false;\n\n    if(Object.getOwnPropertyNames(qstring).length === 0){\n      rows = {\n        'a': {\n          f: '',\n          o: 'LIKE',\n          v: ''\n        }\n      };\n    } else {\n      rows = qstring;\n      show = true;\n    }\n\n    this.state = {\n      rows: rows,\n      showResults: show,\n      page: false\n    };\n\n    this._changeOperator = this._changeOperator.bind(this);\n    this._changeConnector = this._changeConnector.bind(this);\n    this._addRow = this._addRow.bind(this);\n    this._removeRow = this._removeRow.bind(this);\n\n  }\n\n\n  _removeRow(e){\n    let rows = this.state.rows;\n    const delKey = e.target.name;\n    delete rows[delKey];\n    this.setState({\n      rows: rows,\n      showResults: false\n    });\n  }\n\n  _addRow(){\n    let rows = this.state.rows;\n    const uid = 'a' + Math.random().toString(36).substr(2, 9);\n    rows[uid] = { f: '', o: 'LIKE', v: '', c: 'AND'}\n    this.setState({\n      rows: rows,\n      showResults: false\n    });\n  }\n\n  _changeField(index, val){\n    let rows = this.state.rows;\n    rows[index].f = val.constructor === Object && val.value ? val.value : val;\n    this.setState({\n      rows: rows,\n      showResults: false\n    });\n  }\n\n  _changeVal(index, val){\n    let rows = this.state.rows;\n    rows[index].v = val.constructor === Array ? val[0] : val;\n    this.setState({\n      rows: rows,\n      showResults: false\n    });\n  }\n\n  _changeOperator(e){\n    let rows = this.state.rows;\n    rows[e.target.name].o = e.target.value;\n    this.setState({\n      rows: rows,\n      showResults: false\n    });\n  }\n\n  _changeConnector(e){\n    let rows = this.state.rows;\n    rows[e.target.name].c = e.target.value;\n    this.setState({\n      rows: rows,\n      showResults: false\n    });\n  }\n\n  _handleSubmit(e){\n    e.preventDefault();\n    this.setState({\n      showResults: true\n    });\n    const s = qs.stringify(this.state.rows)\n    this.props.history.push(`/search/${this.props.match.params.table}/adv?${s}`);\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    const qstring = qs.parse(this.props.location.search, {ignoreQueryPrefix: true});\n    if(this.state.page !== qstring.page){\n      this.setState({\n        page: qstring.page\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <SubHead tb={ this.props.match.params.table } text='Advanced search' />\n\n        <div className=\"mt-3 p-1 container\">\n          <form onSubmit={this._handleSubmit.bind(this)} className=\"form\">\n            {\n              Object.entries(this.state.rows).map((e, i)=>{\n                const k = e[0];\n                const v = e[1];\n\n                return <div key={i} className=\"my-3\">\n                  <Row>\n                    <Col xs={1}>\n                      { i > 0 && <ConnectorSelect\n                          defaultValue={v.c}\n                          onChange={this._changeConnector}\n                          name={k}\n                        />}\n                    </Col>\n                    <Col xs={4}>\n                      <FldSelect\n                        tb={ this.props.match.params.table }\n                        fld={v.f}\n                        onChange={ this._changeField.bind(this, k) }\n                        />\n                    </Col>\n                    <Col xs={2}>\n                      <OperatorSelect\n                        defaultValue={v.o}\n                        name={k}\n                        onChange={ this._changeOperator }\n                        />\n                    </Col>\n                    <Col xs={3}>\n                      <ValueInput\n                        fld={ v.f }\n                        val={v.v}\n                        onChange={this._changeVal.bind(this, k)}\n                        />\n                    </Col>\n\n                    <Col xs={1}>\n                      { i+1 === Object.keys(this.state.rows).length && <Button type=\"button\" color=\"info\" block onClick={ this._addRow }>+</Button>}\n                    </Col>\n                    <Col xs={1}>\n                      { i > 0 && <Button type=\"button\" color=\"danger\" block name={k} onClick={ this._removeRow }>-</Button>}\n                    </Col>\n                  </Row>\n                </div>\n              })\n            }\n\n            <Button type=\"submit\" color=\"success\" block>Search!</Button>\n          </form>\n          <hr />\n        </div>\n\n        { this.state.showResults && <Results\n            tb={this.props.match.params.table}\n            type=\"adv\"\n            data={this.state.rows}\n            page={this.state.page}\n            />}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport qs from 'qs';\n\nimport SubHead from '../SubHead/SubHead';\n  import Results from './Results';\n\n\n\nexport default class SearchShortSQL extends Component {\n\n\n  render() {\n    const qstring = qs.parse(this.props.location.search, {ignoreQueryPrefix: true});\n\n    return (\n      <div>\n        <SubHead tb={ this.props.match.params.table } text='Custom query' />\n        <Results\n            tb={this.props.match.params.table}\n            type=\"shortsql\"\n            q={qstring.q}\n            page={qstring.page}\n            />\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport qs from 'qs';\n\nimport SubHead from '../SubHead/SubHead';\nimport Results from './Results';\n\n\n\nexport default class SearchAll extends Component {\n\n  constructor(props) {\n    super(props);\n\n    const qstring = qs.parse(props.location.search, {ignoreQueryPrefix: true});\n    this.state = {\n      page: qstring.page\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    const qstring = qs.parse(this.props.location.search, {ignoreQueryPrefix: true});\n    if(this.state.page !== qstring.page){\n      this.setState({\n        page: qstring.page\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <SubHead tb={ this.props.match.params.table } text='View all' />\n\n      \t<Results\n            tb={this.props.match.params.table}\n            type=\"all\"\n            page={this.state.page}\n            />\n      </div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/places.2f644bcf.md\";","export default __webpack_public_path__ + \"static/media/places.52b49a3a.jpg\";","export default __webpack_public_path__ + \"static/media/manuscripts.8f62d77a.md\";","export default __webpack_public_path__ + \"static/media/manuscripts.a1357b19.jpg\";","export default __webpack_public_path__ + \"static/media/works.1287edb2.md\";","export default __webpack_public_path__ + \"static/media/works-without-clavis.ae6b2fca.md\";","export default __webpack_public_path__ + \"static/media/works.c6227c93.jpg\";","export default __webpack_public_path__ + \"static/media/titles.f28094cc.md\";","export default __webpack_public_path__ + \"static/media/titles.950ffc96.jpg\";","export default __webpack_public_path__ + \"static/media/authors.00655ea7.md\";","export default __webpack_public_path__ + \"static/media/authors.71b42f83.jpg\";","export default __webpack_public_path__ + \"static/media/colophons.92373147.md\";","export default __webpack_public_path__ + \"static/media/colophons.7e23657b.jpg\";","export default __webpack_public_path__ + \"static/media/persons.13c81941.md\";","export default __webpack_public_path__ + \"static/media/persons.3f31b3fa.jpg\";","export default __webpack_public_path__ + \"static/media/collections.c3d31f1d.md\";","export default __webpack_public_path__ + \"static/media/collections.a80c397a.jpg\";","/* jshint esversion: 6 */\nimport React from \"react\";\nimport ReactMarkdownPath from '../ReactMarkdownPath/ReactMarkdownPath';\n\nimport SubHead from '../SubHead/SubHead';\n\nimport PlacesMd from './places/places.md';\nimport PlacesImg from './places/places.jpg';\n\nimport ManuscriptsMd from './manuscripts/manuscripts.md';\nimport ManuscriptsImg from './manuscripts/manuscripts.jpg';\n\nimport WorksMd from './works/works.md';\nimport WorksWithoutClavisMd from './works/works-without-clavis.md';\nimport WorksImg from './works/works.jpg';\n\nimport TitlesMd from './titles/titles.md';\nimport TitlesImg from './titles/titles.jpg';\n\nimport AuthorsMd from './authors/authors.md';\nimport AuthorsImg from './authors/authors.jpg';\n\nimport ColophonsMd from './colophons/colophons.md';\nimport ColophonsImg from './colophons/colophons.jpg';\n\nimport PersonsMd from './persons/persons.md';\nimport PersonsImg from './persons/persons.jpg';\n\nimport CollectionsMd from './collections/collections.md';\nimport CollectionsImg from './collections/collections.jpg';\n\nimport './Intro.css';\n\nexport default function Intro(props){\n\n  const tb = props.match.params.table;\n\n  const dataMap = {\n    places: {\n      label: \"Places\",\n      img: PlacesImg,\n      data: [{\n        title: false,\n        mdPath: PlacesMd\n      }]\n    },\n    manuscripts: {\n      label: \"Manuscripts\",\n      img: ManuscriptsImg,\n      data: [{\n        title: false,\n        mdPath: ManuscriptsMd\n      }]\n    },\n    works: {\n      label: \"Works\",\n      img: WorksImg,\n      data: [{\n        title: false,\n        mdPath: WorksMd\n      }, {\n        title: \"Literary works currently without a Clavis Coptica entry\",\n        mdPath: WorksWithoutClavisMd\n      }]\n    },\n    titles: {\n      label: \"Titles\",\n      img: TitlesImg,\n      data: [{\n        title: false,\n        mdPath: TitlesMd\n      }]\n    },\n    authors: {\n      label: \"Authors\",\n      img: AuthorsImg,\n      data: [{\n        title: false,\n        mdPath: AuthorsMd\n      }]\n    },\n    colophons: {\n      label: \"Colophons\",\n      img: ColophonsImg,\n      data: [{\n        title: false,\n        mdPath: ColophonsMd\n      }]\n    },\n    persons: {\n      label: \"Persons\",\n      img: PersonsImg,\n      data: [{\n        title: false,\n        mdPath: PersonsMd\n      }]\n    },\n    collections: {\n      label: \"Collections\",\n      img: CollectionsImg,\n      data: [{\n        title: false,\n        mdPath: CollectionsMd\n      }]\n    }\n  };\n\n\n  if (!dataMap.hasOwnProperty(tb)) {\n    return (<div className=\"container m-5 p-5 text-center text-danger\">\n      Error: invalid table name\n      <code>{ tb }</code>\n    </div>);\n  }\n\n  const d = dataMap[tb];\n\n  let styles = {};\n\n  if(d.img){\n    styles = {\n      width: '100%',\n      height: '300px',\n      backgroundImage: 'url(' + d.img +')',\n      backgroundSize: 'cover',\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: '50% 50%'\n    };\n  }\n\n  return <div>\n    <div style={ styles }></div>\n\n    <SubHead tblabel={d.label} tb={tb} text=\"Introduction\" />\n    <div className=\"container\">\n      { d.data.map( (i, k) => {\n        return (<div key={ k } className={`intro-level-${k} mt-5 border-top pt-5`}>\n          { i.title && <h1>{ i.title }</h1> }\n          <div className=\"my-3 px-md-5 double-column text-justify\">\n            <ReactMarkdownPath path={i.mdPath} />\n          </div>\n        </div>)\n      } )}\n\n    </div>\n  </div>\n}\n","import React, { Component } from 'react';\nimport { Row, Col } from 'reactstrap';\nimport Matrix from 'quirematrix';\n\nclass QuireMatrixView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uid : Math.random().toString(36).substr(2, 5)\n    };\n  }\n\n  componentDidMount(){\n    if(this.props.string !== null){\n      const m = new Matrix('canvas'  + this.state.uid);\n      m.parseString(this.props.string, 'secondHalf' + this.state.uid);\n    }\n  }\n\n  render() {\n    let height = false;\n    if(this.props.string !== null){\n      height = 100 + this.props.string.length / 3 * 20;\n    }\n    return (\n      <div className=\"mt-2 mb-4\">\n        <Row>\n          <Col id=\"firstHalf\">{ this.props.string }</Col>\n          <Col id={ 'secondHalf' + this.state.uid }></Col>\n        </Row>\n        { height && <canvas width=\"400\" height={ height } id={ 'canvas'+ this.state.uid }></canvas> }\n      </div>\n    );\n  }\n}\n\n\nexport default QuireMatrixView;\n","/**\n * Transforms @tb.id or @tb.id[label] parts to active links to records\n * @param  {String} text Text to parse\n * @return {String}      Replaces text\n */\nexport default function internalLinks(text : String) {\n  return text.replace(\n    /@([a-z]+)\\.([a-z0-9/]+)(\\[([^\\]]+)\\])?/gi,\n    function(match, p1, p2, p3, p4, offset, string){\n      return `<a href=\"/${p1}/${p2}\">\n        ${ p3 && p4 ? p4 : `paths.${p1}.${p2}` }\n      </a>`;\n    });\n};\n","import React, { useState } from 'react';\nimport { Button } from 'reactstrap';\nimport nl2br from 'react-nl2br';\nimport relaxedSplit from '../Utils/relaxedSplit.jsx';\nimport internalLinks from '../Utils/internalLinks.jsx';\n\n\nconst parseText = (text) => {\n  const nltext = nl2br(text);\n  const linktext = nltext.map( (t, i) => {\n    if (typeof t === 'string'){\n      return <span className=\"internal-link\" key={i} dangerouslySetInnerHTML={{ __html: internalLinks(t) }}></span>;\n    } else {\n      return t;\n    }\n  });\n  return linktext;\n}\n\nconst getExternalLink = (service, val) => {\n  const map = {\n    \"tm\": `https://www.trismegistos.org/text/${ val.trim() }`,\n    \"tmgeo\": `https://www.trismegistos.org/place/${ val.trim() }`,\n    \"pleiades\": `https://pleiades.stoa.org/places/${ val.trim() }`,\n    \"ldab\": `https://www.trismegistos.org/ldab/text.php?quick=${ val.trim() }`,\n    \"coptot\": `http://coptot.manuscriptroom.com/manuscript-catalog/?gaNum=${ encodeURIComponent(val.trim()) }`,\n    \"colophons\": `https://github.com/paths-erc/coptic-texts/blob/master/colophons/paths.colophons.${val.trim()}.xml`,\n    \"dbmnt\": `http://www.dbmnt.uw.edu.pl/${val.trim()}`\n  };\n\n  if (typeof map[service] !== undefined){\n    return map[service];\n  } else {\n    return false;\n  }\n};\n\n\nexport default function PreviewText(props) {\n\n  const text = props.text;\n  const separator = props.separator;\n  const fld = props.fld;\n  \n  const [display, setDisplay] = useState('none');\n\n  const linkedText = text.split(',').map( (t, key) => {\n    const link = getExternalLink(fld, t);\n    if (link){\n      return <a href={ link } key={ key } target=\"_blank\" rel=\"noopener noreferrer\">\n        {t};\n      </a>\n    } else {\n      return false;\n    }\n  }).filter( el => el );\n  if (linkedText.length > 0){\n    return linkedText;\n  }\n\n\n  const toggleDisplay = () => {\n    setDisplay( display === 'none' ? 'inline' : 'none' );\n  }\n\n  const textParts = relaxedSplit(text, 200, separator);\n  if (!textParts[1]){\n    return parseText(textParts[0]);\n  }\n\n  return (\n    <span>{ parseText(textParts[0]) }\n      <span style={{ display: display }}>{ parseText(textParts[1]) }</span>\n      { display === 'none' ? '\\u2026' : '' }\n      <Button color=\"info\" size=\"sm\" className=\"ml-3\" onClick={ toggleDisplay }>\n        { display === 'none' ? '+' : '-'}\n      </Button>\n    </span>\n  );\n}\n","/**\n * Returns an array of two elements of the input string\n * @param  {String} str         The original string\n * @param  {Int} offset         The offet to cut at\n * @param  {String} [until='.'] The charactet to cut at\n * @return {Array}             Array of two elements containing the splitted string\n */\n\nexport default function relaxedSplit (str : String, offset : Number, until = '.') {\n\n  // String is empty or shorter than offset.\n  if (!str || str.length <= offset){\n    return [str, false];\n  }\n  // str1 is cut at offset.\n  const str1 = str.substr(0, offset);\n\n  // If last char is until, return str1.\n  if (str1.substr(str1.length - 1) === until){\n    return [str1, false];\n  }\n\n  // first part is original string truncated at until\n  const start = str1 + '' + str.replace(str1, '').split(until)[0];\n  // second part is original string - ( first part + unitil )\n  const cont = str.replace(start + '' + until, '');\n\n  // return (start + until) and cont\n  return [\n    start + until,\n    cont === start ? false : cont\n  ];\n}\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Loading from '../Loading/Loading';\nimport './ColophonText.css';\n\nconst formatColophon = (xml) => {\n\n  let text = xml.match(/<body>(.*)<\\/body>/si)[1];\n  \n  // Remove 2+ white spaces\n  text = text.replace(/\\s{2,}/gmi, ' ').replace(/\\|/gmi, '\\n');\n  \n  // Remove line numbers\n  text = text.replace(/\\([0-9]{1,2}\\)/gmi, '');\n\n  // Remove PAThs tags\n  text = text.replace(/<\\/?\\b(?:roleName|p|date|gap|org|quote|rs)\\b[^>]*>/gmi, '');\n\n  // Trim text\n  text = text.replace(/^\\s+|\\s+$/g, '');\n\n  // Convert tags to link\n  text = text.replace(/<\\s*(?:place|pers)Name[^>]*ref=\"([^\"]+)\"[^>]*>(.*?)<\\s*\\/\\s*(?:place|pers)Name>/gi, (match, ref, content) => {\n    const ref_parts = ref.split('.');\n    if (!ref_parts[1] || !ref_parts[2]){\n        return content;\n    }\n    return `<a href=\"/${ref_parts[1]}/${ref_parts[2]}\">${content}</a>`;\n    // return <a onClick={()=>{ history.push(`/${ref_parts[1]}/${ref_parts[2]}`)} } href=\"#\" target=\"_blank\" rel=\"noreferrer noopener\">{content}</a>;\n  });\n\n  return text;\n}\n\n\nexport default function ColophonText(props) {\n\n  const clph = props.colophon;\n\n  const [clphText, setClphText] = useState();\n\n\n  useEffect( () => {\n    axios\n      .get(`https://raw.githubusercontent.com/paths-erc/coptic-texts/master/colophons/paths.colophons.${clph}.xml`)\n      .then( xml => {\n        const parsedtext = formatColophon(xml.data);\n        setClphText(parsedtext);\n      })\n      .catch( e => {\n        setClphText(`Error in getting marked text of colophon #${clph}`)\n        console.log(e);\n      })\n  }, [clph]);\n\n\n  \n  if (!clphText){\n    return <Loading>Loading the marked text of the colophon #{clph}</Loading>;\n  }\n\n  return (\n    <div>\n      <ol className=\"colophons\">\n      { clphText.split('\\n').map( (line, key) => {\n        return <li key={key} dangerouslySetInnerHTML={{ __html: line.trim() }} />\n      } ) }\n      </ol>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Row, Col } from 'reactstrap';\nimport QuireMatrixView from './QuireMatrixView';\nimport PreviewText from './PreviewText';\nimport ColophonText from './ColophonText';\n\n\nexport default function RecordCell(props) {\n\n  const val = props.val;\n  const label = props.label;\n  const isCoptic = props.coptic;\n  const isGreek = props.greek;\n  const fld = props.name;\n  const colophonId = props.colophonId;\n\n\n  if (!val || val === '') {\n    return null;\n  }\n\n  let className = [];\n  if(isCoptic){\n    className.push('coptic');\n  }\n  if(isGreek){\n    className.push('greek');\n  }\n\n  return (\n    <Row className={\"border-bottom mt-2 mb-2 pb-1\" + (val !== null ? '' : ' d-none') }>\n      <Col sm=\"4\" md=\"3\">\n        <label className=\"font-weight-bold\">{label}</label>\n      </Col>\n      <Col>\n        <div className={ className.join(' ') }>\n          {  \n            label === 'Quire layout' ? \n              <QuireMatrixView string={val} />\n              :\n                colophonId ? \n                  <ColophonText colophon={colophonId} /> \n                  : \n                  <PreviewText text={val} fld={fld} separator={isCoptic ? '\\u2027' : '.'} />\n              \n          }\n        </div>\n      </Col>\n    </Row>\n  );\n}\n","import React, { Component } from 'react';\nimport { Card, CardHeader, CardBody } from 'reactstrap';\n\nfunction showLink(zotero, short){\n  if (zotero){\n    return (<a href={'https://www.zotero.org/groups/2189557/erc-paths/items/itemKey/' + zotero} target=\"_blank\" rel=\"noopener noreferrer\">{short}</a>)\n  } else {\n    return short;\n  }\n}\n\nexport default class PluginBiblio extends Component {\n\n  render() {\n\n    const data = this.props.data.data;\n    const metadata = this.props.data.metadata;\n\n    return (\n      <div className=\"plugins\">\n\n        <Card className=\"mt-2\">\n          <CardHeader><h5>{ metadata.tb_label }</h5></CardHeader>\n          <CardBody>\n          {\n            Object.values(data).map( (d, di) =>{\n              return (\n                <span key={di} className=\"mr-3\">\n                  { showLink(d.zotero.val, d.short.val_label) }\n                  { d.details.val ? (', ' + d.details.val) : ''}\n                  { d.images.val ? (` [${d.images.val}];`) : ';'}\n                </span>\n              )\n            })\n          }\n          </CardBody>\n        </Card>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport { Card, CardHeader, CardBody, Button, Modal, ModalHeader, ModalBody } from 'reactstrap';\n\n\n\nexport default class PluginShelfmarks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false,\n\n    };\n    this.toggle = this.toggle.bind(this);\n  }\n  getHtmlModalBody(d){\n    return (\n      <dl>\n        <dt>Country:        </dt><dd>{d.country.val}</dd>\n        <dt>Town:           </dt><dd>{d.town.val}</dd>\n        <dt>Institution:    </dt><dd>{d.institution.val}</dd>\n        <dt>Collection name:</dt><dd>{d.name.val}</dd>\n        <dt>CMCL full name: </dt><dd>{d.fullsegnat.val}</dd>\n        <dt>URN:            </dt><dd><code>paths.shelfmarks.{d.id.val}</code></dd>\n      </dl>\n    );\n  }\n\n  toggle(d) {\n    if (d.id){\n      this.setState({\n        title: d.fullname.val,\n        body: this.getHtmlModalBody(d)\n      });\n    } else {\n\n    }\n    this.setState({\n      modal: !this.state.modal\n    });\n  }\n\n\n\n  render() {\n    return (\n      <div className=\"plugins\">\n\n        <Card className=\"mt-2\">\n          <CardHeader><h5>{ this.props.data.metadata.tb_label }</h5></CardHeader>\n          <CardBody>\n            <ul>\n            {\n              Object.values(this.props.data.data).map( (d, di) =>{\n                return (\n                  <li key={di}>\n                    <Button style={{margin: '0 0 4px 0', padding: 0}} color=\"link\" onClick={ () => this.toggle(d) }>\n                      {d.fullname.val}\n                    </Button>\n                    { d.shelfmark.val ? ', ' + d.shelfmark.val : ''}\n                    { d.pp.val ? ', ' + d.pp.val : ''}\n                  </li>\n                )\n              })\n            }\n          </ul>\n          </CardBody>\n        </Card>\n\n        <Modal isOpen={this.state.modal} toggle={this.toggle}>\n          <ModalHeader toggle={this.toggle}>{ this.state.title }</ModalHeader>\n          <ModalBody>{ this.state.body }</ModalBody>\n        </Modal>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport { Card, CardHeader, CardBody, Row, Col, Button } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass ToggleText extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      display : 'none'\n    };\n    this.toggleDisplay = this.toggleDisplay.bind(this);\n  }\n\n\n  toggleDisplay(){\n    this.setState({\n      display: this.state.display === 'none' ? 'inline' : 'none'\n    });\n  }\n\n  render() {\n    return (\n      <span>\n        <span style={{ display: this.state.display }} className=\"ml-3 bg-light text-muted p-2\">{ this.props.text }</span>\n        <Button color=\"info\" size=\"sm\" className=\"ml-3\" onClick={ this.toggleDisplay }>\n          {this.state.display === 'none' ? <FontAwesomeIcon icon=\"info\" /> : '<'}\n        </Button>\n      </span>\n    )\n  }\n}\n\nclass TopoCell extends Component{\n\n  render(){\n    const tot = this.props.data.length;\n    return (<div>\n      {this.props.data.map( (d, di) =>{\n        return <span className={'mr-2 pr-2' + (tot === di+1 ? '' : ' border-right border-warning')} key={di}>\n          <span className={ d.language.val ? d.language.val.toLowerCase() : '' } title={d.notes.val}>\n            { d.toponym.val }{'\\u0020'}\n          </span>\n          { d.transcription.val ? <span className=\"text-muted ml-2\">[{d.transcription.val}]</span> : ''}\n          { d.notes.val ? <ToggleText text={ d.notes.val } /> : ''}\n        </span>\n      })}\n    </div>);\n  }\n};\n\nexport default class PluginToponyms extends Component {\n\n  parseNames(rows){\n    let obj = {};\n\n    rows.forEach( (d, di) =>{\n      if (!obj[d.language.val]){\n        obj[d.language.val] = []\n      }\n      obj[d.language.val].push(d);\n    });\n\n    return Object.keys(obj).map((l, i) => {\n      return <Row className={\"border-bottom mt-2 mb-2 pb-1\" } key={i}>\n        <Col sm=\"4\" md=\"3\">\n          <label className=\"font-weight-bold\">{l}</label>\n        </Col>\n        <Col>\n          <div>\n            <TopoCell data={obj[l]} />\n          </div>\n        </Col>\n\t    </Row>\n    });\n  }\n\n  render() {\n\n    return (\n      <div className=\"plugins\">\n        <Card className=\"mt-2\">\n          <CardHeader><h5>{ this.props.data.metadata.tb_label }</h5></CardHeader>\n          <CardBody>\n            { this.parseNames(this.props.data.data) }\n          </CardBody>\n        </Card>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport { Card, CardHeader, CardBody } from 'reactstrap';\n\nimport Cfg from '../Services/Cfg/Cfg';\nimport RecordCell from './RecordCell';\nimport PluginBiblio from './PluginBiblio';\nimport PluginShelfmarks from './PluginShelfmarks';\nimport PluginToponyms from './PluginToponyms';\n\n\n\nclass Plugin extends Component {\n\n  render() {\n\n    if (this.props.data.data.length < 1) {\n      return null;\n    }\n\n    if(this.props.data.metadata.tb_id === 'paths__m_biblio'){\n      return <PluginBiblio data={ this.props.data } />\n    }\n    if(this.props.data.metadata.tb_id === 'paths__m_shelfmarks'){\n      return <PluginShelfmarks data={ this.props.data } />\n    }\n    if(this.props.data.metadata.tb_id === 'paths__m_toponyms'){\n      return <PluginToponyms data={ this.props.data } />\n    }\n\n    return (\n      <div className=\"plugins\">\n\n        <Card className=\"mt-2\">\n          <CardHeader><h5>{ this.props.data.metadata.tb_label }</h5></CardHeader>\n          {\n            Object.values(this.props.data.data).map ( (d, di) =>{\n              return (<CardBody key={di} className=\"border border-info mb-2\">{\n                /**\n                 * Fields listed in Cfg.hidden and sort fields are not shown\n                 */\n                  Object.keys(d).map( (f, fi) => {\n                    if (\n                      Cfg.hidden.indexOf(this.props.data.metadata.tb_stripped + '.' + f) > -1\n                      ||\n                      f === 'sort'\n                      ||\n                      f === 'table_link'\n                      ||\n                      f === 'id_link'\n                      ){\n                      return null;\n                    }\n                    \n                    if (d[f].label){\n                      return <RecordCell \n                        coptic= { Cfg.coptic.indexOf(this.props.data.metadata.tb_stripped + '.' + f) > -1}\n                        greek= { Cfg.greek.indexOf(this.props.data.metadata.tb_stripped + '.' + f) > -1}\n                        val={ d[f].val_label ? d[f].val_label : d[f].val } \n                        label={ d[f].label } \n                        key={fi} />\n                    } else {\n                      return null;\n                    }\n                  })\n                }<hr /></CardBody>)\n            } )\n          }\n        </Card>\n      </div>\n    );\n  }\n}\n\nexport default Plugin;\n","import React from 'react';\nimport { Row, Col } from 'reactstrap';\nimport QuireMatrixView from './QuireMatrixView';\nimport PreviewText from './PreviewText';\n\n/**\n * Receives complete data from (api) props\n * @param       {[type]} props [description]\n * @constructor\n */\nexport default function RecordCellDb(props){\n\n  const val = props.data.val_label ? props.data.val_label : props.data.val;\n  const label = props.data.label;\n  const fld = props.data.name;\n  const isCoptic = props.data.coptic;\n  const isGreek = props.data.greek;\n\n  if (!val || val === '') {\n    return null;\n  }\n\n  let className = [];\n  if(isCoptic){\n    className.push('coptic');\n  }\n  if(isGreek){\n    className.push('greek');\n  }\n\n  return (\n    <Row className={\"border-bottom mt-2 mb-2 pb-1\" + (val !== null ? '' : ' d-none') }>\n      <Col sm=\"4\" md=\"3\">\n        <label className=\"font-weight-bold\">{label}</label>\n      </Col>\n      <Col>\n        <div className={ className.join(' ') }>\n          {  ( label === 'Quire layout' ) ? (<QuireMatrixView string={val} />) : <PreviewText text={val} fld={ fld } separator={isCoptic ? '\\u2027' : '.'} /> }\n        </div>\n      </Col>\n    </Row>\n  );\n}\n","import React, { Component } from 'react';\n\nimport RecordCellDb from '../RecordCellDb';\n\nexport default class FieldSet extends Component {\n\n  render() {\n    const fields = this.props.fields;\n    const legend = this.props.legend;\n    let show = false;\n    fields.forEach( f => {\n      if (typeof f.val !== 'undefined' && f.val && f.val !== ''){\n        show = true;\n      }\n    });\n\n    if (!show){\n      return false;\n    }\n\n    return (\n        <fieldset className=\"p-3 border border-warning mt-3\">\n          { legend && <legend className=\"border border-warning shadow-sm text-muted px-3 py-1\" style={{ fontSize: '1.1rem', 'fontWeight': 'bold' }}>{ legend }</legend> }\n          {\n            fields.map((f,k) => {\n              return (<RecordCellDb key={k} data={ f } />)\n            })\n          }\n        </fieldset>\n\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport RecordCellDb from '../RecordCellDb';\nimport FieldSet from './FieldSet';\nimport Plugin from '../Plugin';\n\n\nexport default class ManuscriptBody extends Component {\n\n  render() {\n    const rec = this.props.rec;\n\n    return (\n      <div>\n        <FieldSet legend=\"Manuscript identifiers\" fields={[\n            rec.core.id,\n            rec.core.cmclid,\n            rec.core.tm,\n            rec.core.ldab,\n            rec.core.lcbm,\n            rec.core.dbmnt,\n            rec.core.alias,\n            rec.core.issinglefrag,\n            rec.core.reusedinbinding,\n            rec.core.stratigraphy,\n            rec.core.modernhistory,\n            rec.core.contents\n          ]} />\n\n        { rec.plugins['paths__m_shelfmarks'] && <Plugin data={rec.plugins['paths__m_shelfmarks']} /> }\n\n        <FieldSet legend=\"Dialects\" fields={[\n          rec.core.dialect,\n          rec.core.dialectnotes\n        ]} />\n\n        <FieldSet legend=\"Dating\" fields={[\n          rec.core.datingsource,\n          rec.core.chronofrom,\n          rec.core.chronoto,\n          rec.core.datingcriteria\n        ]} />\n\n        { rec.plugins['paths__m_msplaces'] && <Plugin data={rec.plugins['paths__m_msplaces']} /> }\n\n        <FieldSet legend=\"Book form\" fields={[\n          rec.core.bookform,\n          rec.core.writingsupport\n        ]} />\n\n        <FieldSet legend=\"General description\" fields={[\n          rec.core.leaftotextant,\n          rec.core.fragtot,\n          rec.core.fragdim,\n          rec.core.leaftotestimated,\n          rec.core.quiresextant,\n          rec.core.gennotes\n        ]} />\n\n        <FieldSet legend=\"Page description\" fields={[\n          rec.core.columns,\n          rec.core.colnotes,\n          rec.core.linespercolumn,\n          rec.core.charsperline,\n          rec.core.alignment,\n          rec.core.alignmentnotes\n        ]} />\n\n        <FieldSet legend=\"Dimensions (mm) and proportions\" fields={[\n          rec.core.leafw,\n          rec.core.leafh,\n          rec.core.framew,\n          rec.core.frameh,\n          rec.core.intercolumnium,\n          rec.core.marginup,\n          rec.core.marginlow,\n          rec.core.marginin,\n          rec.core.marginout,\n          rec.core.marginleft,\n          rec.core.marginright,\n          rec.core.heighttenlines,\n          rec.core.prophw,\n          rec.core.propwt,\n          rec.core.dimnotes\n        ]} />\n\n        { rec.plugins['paths__m_quires'] && <Plugin data={rec.plugins['paths__m_quires']} /> }\n\n        <FieldSet fields={[ rec.core.quirenotes ]} />\n\n        <FieldSet legend=\"Quire signature\" fields={[\n          rec.core.quiresig,\n          rec.core.quiretype,\n          rec.core.quireposition,\n          rec.core.quirenrnotes\n        ]} />\n\n        <FieldSet legend=\"Pagination\" fields={[\n          rec.core.pagination,\n          rec.core.pagtype,\n          rec.core.pagposition,\n          rec.core.pagnote\n        ]} />\n\n        <FieldSet legend=\"Foliation (ancient and modern)\" fields={[\n          rec.core.foliation,\n          rec.core.foltype,\n          rec.core.folposition,\n          rec.core.folnotes\n        ]} />\n\n        <RecordCellDb data={ rec.core.handstot } />\n\n        { rec.plugins['paths__m_hands'] && <Plugin data={rec.plugins['paths__m_hands']} /> }\n\n        <FieldSet legend=\"Diacritical signs\" fields={[\n          rec.core.lectionalsigns,\n          rec.core.structuralsigns,\n          rec.core.signsnotes\n        ]} />\n\n        <FieldSet legend=\"Abbreviations\" fields={[\n          rec.core.abbreviations,\n          rec.core.abbrnotes\n        ]} />\n\n        <FieldSet legend=\"Ruling and pricking\" fields={[\n          rec.core.ruling,\n          rec.core.rulingtype,\n          rec.core.rulingtool,\n          rec.core.pricking,\n          rec.core.rulingnotes\n        ]} />\n\n        <FieldSet legend=\"\" fields={[\n          rec.core.leaftabs,\n          rec.core.leaftabsnotes\n        ]} />\n\n        <FieldSet legend=\"Manufacture of the rolls\" fields={[\n          rec.core.kolleseis,\n          rec.core.kolleseseisdescr,\n          rec.core.tracesnotes,\n          rec.core.kollno,\n          rec.core.kolldim\n        ]} />\n\n        <FieldSet legend=\"Binding\" fields={[\n          rec.core.bindings,\n          rec.core.covers,\n          rec.core.coversnotes,\n          rec.core.sewings,\n          rec.core.sewingtype,\n          rec.core.holesno,\n          rec.core.holesarrangement,\n          rec.core.holesnotes\n        ]} />\n\n\n      <FieldSet legend=\"Coloured pigments\" fields={[\n          rec.core.pgmcol,\n          rec.core.pgmlocation,\n          rec.core.pgmnotes\n        ]} />\n\n      <FieldSet legend=\"Black inks\" fields={[\n          rec.core.blktype,\n          rec.core.blklocation,\n          rec.core.blknotes\n        ]} />\n\n        <FieldSet legend=\"Additional information\" fields={[\n          rec.core.marginalnotes,\n          rec.core.greekminuscule,\n          rec.core.greekminusculenotes,\n          rec.core.palimpsest,\n          rec.core.palimpsestnotes,\n          rec.core.decortype,\n          rec.core.decorsubj,\n          rec.core.decorationdescr,\n          rec.core.enlargedinitials,\n          rec.core.restancient,\n          rec.core.restmodern\n        ]} />\n\n      { rec.plugins['paths__m_biblio'] && <Plugin data={rec.plugins['paths__m_biblio']} /> }\n\n\n        <FieldSet legend=\"Metadata\" fields={[\n          rec.core.sourceinfo,\n          rec.core.editors,\n          rec.core.status,\n          rec.core.lastmodified\n        ]} />\n\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport Cfg from '../../Services/Cfg/Cfg';\nimport RecordCell from '../RecordCell';\nimport Plugin from '../Plugin';\nimport Loading from '../../Loading/Loading';\nimport ManuscriptsBody from './ManuscriptsBody';\n\n\n\n\nexport default class ViewOne extends Component {\n\n  renderTemplate(rec) {\n\n    switch (rec.metadata.tb_stripped) {\n      case 'manuscripts':\n        return (<ManuscriptsBody rec={ rec } /> )\n      default:\n        return(\n          <div>\n            {\n              Object.values(rec.core).map( (i, k) => {\n                if (Cfg.hidden.indexOf(rec.metadata.tb_stripped + '.' + i.name) > -1){\n                  return null;\n                }\n                \n                return <RecordCell\n                    coptic= { Cfg.coptic.indexOf(rec.metadata.tb_stripped + '.' + i.name) > -1}\n                    greek= { Cfg.greek.indexOf(rec.metadata.tb_stripped + '.' + i.name) > -1}\n                    label={ i.label }\n                    name={ i.name }\n                    val={ i.val_label ? i.val_label : i.val }\n                    key={k} \n                    colophonId={ (rec.metadata.tb_stripped === 'colophons' && i.name === 'text') ? rec.core.id.val : false}\n                    />\n              })\n            }\n            {\n              Object.keys(rec.plugins).map( (t, k) => {\n                return  <Plugin key={k} data={rec.plugins[t]} />\n              })\n            }\n          </div>\n        )\n    }\n  }\n\n  render() {\n    if (!this.props.rec) {\n      return <div className=\"m-5 p-5\"><Loading /></div>;\n    }\n\n    return (\n      <div className=\"mb-5\">\n        { this.renderTemplate(this.props.rec) }\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Card, CardHeader, CardBody, ListGroup, ListGroupItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Link } from 'react-router-dom';\n\n\nclass RecordLinks extends Component {\n\n  makeHref(table, query){\n    const strippedTb = table.replace('paths__', '');\n    let url = [\n      '/',\n      'search',\n      '/',\n      strippedTb,\n      '/',\n      'shortsql',\n      `?q=@${table}~?${query}`\n    ];\n\n    return url.join('');\n  }\n\n  renderLinks(links){\n\n     return Object.entries(links).map(\n      ([tb, info], i) => {\n        if (info.tot < 1) {\n          return null;\n        }\n        return <ListGroupItem key={i} tag={Link} to={ this.makeHref(tb, info.where) }>\n          <FontAwesomeIcon icon=\"external-link-square-alt\" /> {info.tot + ' referenced item' + (info.tot > 1 ? 's': '') + ' in ' + info.tb_label}\n        </ListGroupItem>\n      }\n    )\n  }\n\n  renderBackLinks(backlinks){\n    if (typeof backlinks === 'undefined' || backlinks.length < 1){\n      return false;\n    }\n\n    return Object.entries(backlinks).map(\n      ([tb, arr], i) => {\n        if (arr.tot < 1){\n          return false;\n        }\n\n        return <ListGroupItem key={i} tag={Link} to={ this.makeHref(tb, arr.where) }>\n          <FontAwesomeIcon icon=\"external-link-square-alt\" /> {arr.tot + ' referenced item' + (arr.tot > 1 ? 's': '') + ' in ' + arr.tb_label}\n        </ListGroupItem>\n      }\n    )\n  }\n\n  render() {\n    if( (!this.props.links && !this.props.backlinks) || (this.props.links.length < 1 && this.props.backlinks.length < 1) ){\n      return null;\n    }\n    return (\n      <Card className=\"mt-2\">\n        <CardHeader>\n          <FontAwesomeIcon icon=\"link\" /> Links\n        </CardHeader>\n        <CardBody>\n          <ListGroup>\n            { this.renderLinks(this.props.links) }\n            { this.renderBackLinks(this.props.backlinks) }\n    \t    </ListGroup>\n        </CardBody>\n      </Card>\n    );\n  }\n}\n\nexport default RecordLinks;\n","import React, { Component } from 'react';\nimport { Card, CardHeader, CardBody, ListGroup, ListGroupItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Link } from 'react-router-dom';\n\n\nclass UserLinks extends Component {\n\n  makeHref(table, id){\n    const strippedTb = table.replace('paths__', '');\n    let url = [\n      '/',\n      strippedTb,\n      '/',\n      id\n    ];\n\n    return url.join('');\n  }\n\n  render() {\n    const links = this.props.links || [];\n\n    if (typeof links === 'undefined' || links.length < 1) {\n      return null;\n    }\n\n    return (\n      <Card className=\"mt-2\">\n        <CardHeader>\n          <FontAwesomeIcon icon=\"link\" /> Manually entered links\n        </CardHeader>\n        <CardBody>\n          <ListGroup>\n            {\n              Object.values(links).map(\n                (l, i) => {\n                  return <ListGroupItem key={i} tag={Link} to={ this.makeHref(l.tb_stripped, l.ref_id) }>\n                    <FontAwesomeIcon icon=\"external-link-square-alt\" />  { l.tb_label } #{ l.ref_label ? l.ref_label : l.ref_id }\n                  </ListGroupItem>\n                }\n              )\n            }\n    \t    </ListGroup>\n        </CardBody>\n      </Card>\n    );\n  }\n}\n\nexport default UserLinks;\n","import React, { Component } from 'react';\n\nimport { CardBody } from 'reactstrap';\n\nexport default class Caption extends Component {\n  render(){\n    if (!this.props.text){\n      return null;\n    }\n    return (<CardBody className=\"text-secondary\" style={{ fontSize: '.9rem', fontStyle: 'italic'}}>{this.props.text}</CardBody>);\n  }\n}\n","import React, { Component } from 'react';\nimport { Card, CardImg, Modal, ModalFooter, ModalBody } from 'reactstrap';\n\nimport Caption from './Caption';\n\n\nexport default class PreviewModal extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false\n    };\n\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState({\n      modal: !this.state.modal\n    });\n  }\n\n\n\n  render(){\n\n    return (\n      <div>\n        <Card className=\"mt-1\">\n          <CardImg top\n              width=\"100%\"\n              src={this.props.file}\n              onClick={this.toggle} />\n            <Caption text={this.props.description} />\n        </Card>\n\n        <Modal isOpen={this.state.modal} toggle={this.toggle} className={this.props.className} size=\"lg\">\n          <ModalBody>\n            <div>\n              <img style={ { width: \"100%\" } }\n                  src={this.props.file}\n                  alt={ this.props.description } />\n            </div>\n          </ModalBody>\n          <ModalFooter><Caption text={this.props.description} /></ModalFooter>\n\n        </Modal>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Button } from 'reactstrap';\n\nimport PreviewModal from './PreviewModal';\n\nexport default class MoreImages extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shown: false,\n      buttonText: 'Show more images'\n    };\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState({\n      shown: !this.state.shown,\n      buttonText : this.state.buttonText === 'Show more images' ? 'Hide' : 'Show more'\n    });\n  }\n\n  render(){\n    if (!this.props.files || this.props.files.length < 1){\n      return null;\n    }\n    return (\n      <div>\n        <div style={{ display: this.state.shown ? 'block' : 'none' }}>\n        {\n          this.props.files.map( (f, id) => {\n            return <PreviewModal key={id}\n              file={this.props.baseUrl.replace('/api/', '/projects/') + 'files/' + f.id + '.' + f.ext} description={f.description} />\n          })\n        }\n        </div>\n        <div className=\"text-center mt-2\" >\n          <Button onClick={this.toggle} color=\"info\">{ this.state.buttonText}</Button>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport MoreImages from './MoreImages';\nimport PreviewModal from './PreviewModal';\n\n\nexport default class Files extends Component {\n\n  render() {\n    let files = Object.values(this.props.files) || [];\n\n    files = files.map( f => {\n      if (['jpg', 'png', 'gif', 'tif', 'tiff', 'jpeg'].includes(f.ext.toLowerCase())){\n        return f;\n      } else {\n        return false;\n      }\n    }).filter(e => { return e; });\n    const firstFiles = files.slice(0,3);\n    const otherFiles = files.slice(3);\n\n    if(firstFiles.length < 1){\n      return null;\n    }\n\n    return (\n\n      <div className=\"mt-3\">\n        <h5>Attached images</h5>\n        {\n          firstFiles.map( (f, id) => {\n            return <PreviewModal key={id}\n              file={this.props.baseUrl.replace('/api/', '/projects/') + 'files/' + f.id + '.' + f.ext} description={f.description} />\n          })\n        }\n        <MoreImages files={otherFiles} baseUrl={this.props.baseUrl} />\n      </div>\n\n    );\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport { GeoJSON } from 'react-leaflet';\nimport axios from 'axios';\n\nimport { SiteMapsList } from '../../Services/Cfg/remoteGisSources';\n\n\nconst getStyle = (f) =>{\n  const p = f.properties;\n\n  // Default stroke and fill opacity\n  let s = {\n    weight: 2,\n    fillOpacity: .2\n  };\n\n  // Set opacity variable\n  let opacity;\n\n  // Reconstructed features have dashed strokes and .4 opacity\n  if (p.reconstr){\n    s.dashArray = '4 4';\n    opacity = 0.4;\n  } else {\n    // Other features have .8 opacity\n    opacity = 0.8\n  }\n\n  // Differentiate strike and fill colors by phase\n  switch(true){\n    case (p.phase < -1):\n      s.color = 'rgba(150, 150, 150, ' + opacity + ')';\n      s.fillColor = 'rgba(150, 150, 150, .4)';\n      break;\n    case (p.phase === -1):\n      s.color = 'rgba(61, 90, 128, ' + opacity + ')';\n      s.fillColor = 'rgba(61, 90, 128, .4)';\n      break;\n      case (p.phase === 1):\n      s.color = 'rgba(247, 110, 1, ' + opacity + ')';\n      s.fillColor = 'rgba(247, 110, 1, .4)';\n      break;\n    case (p.phase === 2):\n      s.color = 'rgba(194, 0, 251, ' + opacity + ')';\n      s.fillColor = 'rgba(194, 0, 251, .4)';\n      break;\n    case (p.phase === 3):\n      s.color = 'rgba(56, 134, 89, ' + opacity + ')';\n      s.fillColor = 'rgba(56, 134, 89, .4)';\n      break;\n    case (p.phase > 3):\n      s.color = 'rgba(80, 47, 76, ' + opacity + ')';\n      s.fillColor = 'rgba(56, 134, 89, .4)';\n      break;\n    default:\n      s.color = 'rgba(31, 120, 180, ' + opacity + ')';\n      s.fillColor = 'rgba(31, 120, 180, .4)';\n      break;\n  }\n\n  // Set style for upper projections\n  if (p.part && p.part.indexOf('u') > -1) {\n    s.fill = false;\n    s.color = 'rgba(0, 0, 0, .2)';\n\n  // Set style for lower projections\n  } else if (p.part && p.part.indexOf('l') > -1) {\n    s.fillColor = 'rgba(0, 0, 0, .1)';\n    s.color = 'rgba(0, 0, 0, .2)';\n\n  // Set style for doorways\n  } else if (p.part && p.part.indexOf('d') > -1) {\n    s.fillColor = 'rgba(171, 221, 164, .8)';\n    s.color = 'rgba(171, 221, 164, 1)';\n  }\n\n  // finished: return the style object\n  return s;\n};\n\nconst onEachFeature = (feature, layer) => {\n  layer.bindPopup(`<a href=\"https://atlas.paths-erc.eu/places/${feature.properties.place}\">paths.places.${feature.properties.place}</a>\n  <br />${feature.properties.subplace}\n  <br />Vectorized from: <a href=\"https://www.zotero.org/groups/2189557/erc-paths/items/itemKey/${feature.properties.source}\" target=\"_blank\">PAThs Zotero ${feature.properties.source} ${feature.properties.subsource}</a>\n  <br />Phase: ${feature.properties.phase}`\n  );\n}\n\n\nexport default function SiteMaps(props){\n  const bounds = props.bounds;\n  const zoom = props.zoom;\n  const siteId = props.siteId;\n\n  const [siteMaps, addSiteMaps] = useState();\n\n\n  useEffect( ()=>{\n    const axiosArray = SiteMapsList.map( e => {\n      if ( e.startsWith(`paths.places.${siteId}-`) ){\n          return axios({\n            method: 'get',\n            url: `https://xyz.paths-erc.eu/geojson/${e}.geojson`\n          });\n      } else {\n        return false;\n      }\n    }).filter(Boolean);\n\n    let gj = [];\n    axios.all(axiosArray).then(respArr => {\n      gj = respArr.map(e => e.data );\n      addSiteMaps(gj);\n    })\n\n  }, [bounds, zoom, siteId]);\n\n  if (!siteMaps){\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      { siteMaps.map((e, i)=>{\n        return <GeoJSON\n            key={i}\n            data={e}\n            style={ getStyle }\n            onEachFeature={ onEachFeature }\n          />\n      }) }\n    </React.Fragment>\n  );\n}\n","import React from 'react';\nimport { Map, TileLayer, Marker, Popup, LayersControl } from 'react-leaflet';\nimport SiteMaps from '../PathsMap/Map/SiteMaps';\nimport { GoogleLayer } from 'react-leaflet-google-v2';\nimport 'react-leaflet-fullscreen/dist/styles.css'\nimport FullscreenControl from 'react-leaflet-fullscreen';\n\n\nimport GoogleApiKey from '../Services/Cfg/GoogleApiKey';\nconst { BaseLayer } = LayersControl;\n\nexport default function MiniMap(props) {\n\n  const geom_arr = props.geom ? Object.values(props.geom) : false;\n  const id = props.id;\n  \n  if (!geom_arr || geom_arr.length < 1) {\n    return null;\n  }\n\n  const position = JSON.parse(geom_arr[0].geojson).coordinates.reverse();\n\n  return (\n    <div style={{ height: '300px', width: '100%'}} className=\"mb-5\">\n        <Map  className=\"sidebar-map maxHeight\" \n              center={ position } \n              zoom={15} \n              zoomControl={true}\n              >\n          <FullscreenControl position=\"topleft\" />\n          <LayersControl position=\"topright\">\n            <BaseLayer name=\"AWMC\">\n              <TileLayer url=\"http://{s}.tiles.mapbox.com/v3/isawnyu.map-knmctlkh/{z}/{x}/{y}.png\" />\n            </BaseLayer>\n\n            <BaseLayer name=\"Imperium (DARE)\">\n              <TileLayer url=\"https://dh.gu.se/tiles/imperium/{z}/{x}/{y}.png\" />\n            </BaseLayer>\n\n            <BaseLayer name=\"OpenStreetMap\">\n              <TileLayer url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\" />\n            </BaseLayer>\n\n            <BaseLayer name=\"Google Satellite\" checked=\"true\">\n              <GoogleLayer googlekey={GoogleApiKey}  maptype=\"SATELLITE\" />\n            </BaseLayer>\n          \n          <SiteMaps siteId={id} />\n\n          {\n            geom_arr.map( (e, i) => {\n              const coord = JSON.parse(e.geojson).coordinates.reverse();\n              return <Marker position={ coord } key={ i }>\n                <Popup>\n                  Latitude: {coord[0]}<br />\n                  Longitude: {coord[1]}<br />\n                  CRS: <a href=\"https://epsg.io/4326\" target=\"_blank\" rel=\"noopener noreferrer\">WGS84 [EPSG:4326]</a>\n                </Popup>\n              </Marker>\n              } ) \n          }\n\n          </LayersControl>\n        </Map>\n      </div>\n  );\n}\n","import React from 'react';\nimport { ListGroupItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nexport default function CoptOT (props) {\n\n  if ( props.tb !== 'manuscripts' || !props.data.val || props.data.val.length < 1 ) {\n    return null;\n  }\n  return <ListGroupItem>\n    <a href={\"http://coptot.manuscriptroom.com/manuscript-catalog/?gaNum=\" + encodeURIComponent(props.data.val)} target=\"_blank\" rel=\"noopener noreferrer\">\n      <FontAwesomeIcon icon=\"external-link-alt\" /> The Digital Edition of the Coptic Old Testament\n    </a>\n  </ListGroupItem>\n}\n","import React from 'react';\nimport { ListGroupItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nexport default function TM(props) {\n\n  if ( props.tb !== 'manuscripts' || !props.data.val || props.data.val.length < 1 ) {\n    return null;\n  }\n\n  return (\n    <div>\n      { props.data.val.split(',').map( (v, k) => {\n        return <ListGroupItem key={k}>\n          <a href={\"https://www.trismegistos.org/text/\" + v.trim() } target=\"_blank\" rel=\"noopener noreferrer\">\n            <FontAwesomeIcon icon=\"external-link-alt\" /> TM {v}\n          </a>\n        </ListGroupItem>\n      }) }\n    </div>\n  );\n}\n","import React from 'react';\nimport { ListGroupItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nexport default function TmGeo (props) {\n\n  if ( props.tb !== 'places' || !props.data.val || props.data.val.length < 1 ) {\n    return null;\n  }\n  return (\n    <div>\n      { props.data.val.split(',').map( (v, k) => {\n        return <ListGroupItem key={ k }>\n          <a href={\"https://www.trismegistos.org/place/\" + v.trim() } target=\"_blank\" rel=\"noopener noreferrer\">\n            <FontAwesomeIcon icon=\"external-link-alt\" /> TM Geo {v}\n          </a>\n        </ListGroupItem>\n      }) }\n    </div>\n  )\n}\n","import React from 'react';\nimport { ListGroupItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nexport default function Ldab(props) {\n\n  if ( props.tb !== 'manuscripts' || !props.data.val || props.data.val.length < 1 ) {\n    return null;\n  }\n  return (\n    <div>\n      { props.data.val.split(',').map( (v, k) => {\n        return <ListGroupItem key={k}>\n          <a href={\"https://www.trismegistos.org/ldab/text.php?quick=\" + v.trim() } target=\"_blank\" rel=\"noopener noreferrer\">\n            <FontAwesomeIcon icon=\"external-link-alt\" /> LDAB {v}\n          </a>\n        </ListGroupItem>\n      }) }\n    </div>\n  );\n}\n","import React from 'react';\nimport { ListGroupItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nexport default function Pleiades(props) {\n\n  if ( props.tb !== 'places' || !props.data.val || props.data.val.length < 1 ) {\n    return null;\n  }\n  return (\n    <div>\n      { props.data.val.split(',').map( (v, k) => {\n        return <ListGroupItem key={k}>\n          <a href={\"https://pleiades.stoa.org/places/\" + v.trim() } target=\"_blank\" rel=\"noopener noreferrer\">\n            <FontAwesomeIcon icon=\"external-link-alt\" /> Pleiades {v}\n          </a>\n        </ListGroupItem>\n      }) }\n    </div>\n  );\n}\n","import React from 'react';\nimport { ListGroupItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nexport default function CopticColophons (props) {\n\n  if ( props.tb !== 'colophons' || !props.data.val || props.data.val.length < 1 ) {\n    return null;\n  }\n  return <ListGroupItem>\n    <a href={`https://github.com/paths-erc/coptic-texts/blob/master/colophons/paths.colophons.${props.data.val}.xml` } target=\"_blank\" rel=\"noopener noreferrer\">\n      <FontAwesomeIcon icon=\"external-link-alt\" /> View marked-up text on GitHub\n    </a>\n  </ListGroupItem>\n}\n","import React from 'react';\nimport { ListGroupItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nexport default function Dbmnt(props) {\n\n  if ( props.tb !== 'manuscripts' || !props.data.val || props.data.val.length < 1 ) {\n    return null;\n  }\n\n  return (\n    <div>\n      { props.data.val.split(',').map( (v, k) => {\n        return <ListGroupItem key={k}>\n          <a href={`http://www.dbmnt.uw.edu.pl/${v.trim()}` } target=\"_blank\" rel=\"noopener noreferrer\">\n            <FontAwesomeIcon icon=\"external-link-alt\" /> DBMNT {v}\n          </a>\n        </ListGroupItem>\n      }) }\n    </div>\n  );\n}\n","import React, { Component } from 'react';\nimport { Card, CardHeader, CardBody, ListGroup } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport CoptOT from './ExternalLinks/CoptOT';\nimport TM from './ExternalLinks/TM';\nimport TmGeo from './ExternalLinks/TmGeo';\nimport Ldab from './ExternalLinks/Ldab';\nimport Pleiades from './ExternalLinks/Pleiades';\nimport CopticColophons from './ExternalLinks/CopticColophons';\nimport Dbmnt from './ExternalLinks/Dbmnt';\n\n\nexport default class ExternalLinks extends Component {\n\n  render() {\n    if ( !this.props.rec || this.props.rec.length < 1 ) {\n      return null;\n    }\n    return <div className=\"mt-3\">\n\n      <Card className=\"mt-2\">\n        <CardHeader>\n          <FontAwesomeIcon icon={['fab', 'hubspot']} /> External links\n        </CardHeader>\n        <CardBody>\n          <ListGroup>\n            <CoptOT   data={this.props.rec.lcbm}  tb={this.props.tb}/>\n            <TM       data={this.props.rec.tm}    tb={this.props.tb} />\n            <Ldab     data={this.props.rec.ldab}  tb={this.props.tb} />\n            <Dbmnt    data={this.props.rec.dbmnt} tb={this.props.tb} />\n\n            <TmGeo data={this.props.rec.tmgeo}    tb={this.props.tb} />\n            <Pleiades data={this.props.rec.pleiades} tb={this.props.tb} />\n            <CopticColophons data={this.props.rec.id} tb={this.props.tb} />\n\n    \t    </ListGroup>\n        </CardBody>\n      </Card>\n\n    </div>\n  }\n}\n","import React, { Component } from 'react';\nimport { Card, CardHeader, CardBody, Row, Col, Button } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\n\nimport Database from '../Services/Database/Database';\nimport SubHead from '../SubHead/SubHead';\nimport Body from './Bodies/Body';\nimport RecordLinks from './RecordLinks';\nimport UserLinks from './UserLinks';\nimport Files from '../ViewFiles/Files';\nimport MiniMap from './MiniMap';\nimport Loading from '../Loading/Loading';\nimport ExternalLinks from './ExternalLinks';\n\nexport default class ViewOne extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      rec: false,\n      copied: false\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps){\n    if(nextProps !== this.props ){\n      this.setState({\n        rec: null\n      });\n\n      Database.getOne(nextProps.match.params.table, nextProps.match.params.id, (d) =>{\n        this.setState({\n          rec: d\n        });\n      });\n    }\n  }\n\n  componentDidMount(){\n    Database.getOne(this.props.match.params.table, this.props.match.params.id, (d) =>{\n      this.setState({\n        rec: d\n      });\n    });\n  }\n\n  renderTemplate(rec) {\n\n    if (rec.type === 'error'){\n      return (<pre className=\"text-danger p-5\">{ rec.text }</pre>)\n    }\n\n    switch (rec.metadata.tb_stripped) {\n      // case 'titles':\n      //   return (<ViewOneTitle record={ rec } />);\n      default:\n        // No record found!\n        if (rec.core.length < 1){\n          return (\n            <div className=\"container\">\n              <SubHead tb={ rec.metadata.tb_stripped } tblabel={rec.metadata.tb_label} text=\"View record\" />\n                <Card className=\"mt-2\">\n                  <CardHeader>\n                    <h3 className=\"text-danger\">Record paths.{ rec.metadata.tb_stripped }.{ this.props.match.params.id }  not found!</h3>\n                  </CardHeader>\n                </Card>\n            </div>\n          )\n        }\n        return(\n          <div className=\"container\">\n\n            <SubHead tb={ rec.metadata.tb_stripped } tblabel={rec.metadata.tb_label} text=\"View record\" />\n\n            <Row className=\"mt-2\">\n              <Col sm=\"8\">\n                <Card>\n                  <CardHeader>\n                    <h3>\n                      paths.{ rec.metadata.tb_stripped }.{ rec.core.id.val }\n                    </h3>\n                      <div className=\"text-secondary d-flex justify-content-between\">\n                        <div>\n                          <FontAwesomeIcon icon=\"link\" /> http://paths.uniroma1.it/atlas/{ rec.metadata.tb_stripped }/{ rec.core.id.val }\n                        </div>\n                        <div>\n                          <CopyToClipboard\n                            text={ 'http://paths.uniroma1.it/atlas/' + rec.metadata.tb_stripped + '/' + rec.core.id.val }\n                            onCopy={() => { this.setState({copied: true}); window.setTimeout(()=>{ this.setState({copied: false}); }, 2000); } }\n                            >\n                            <Button size=\"sm\" color={ this.state.copied ? 'primary': 'secondary'}>\n                              <FontAwesomeIcon icon=\"clone\" /> <span className=\"d-none d-sm-inline\">\n                                {this.state.copied ? 'Copied!' : 'Copy to clipboard'}\n                              </span>\n                            </Button>\n                          </CopyToClipboard>\n                        </div>\n                      </div>\n                  </CardHeader>\n                  <CardBody>\n                    <MiniMap geom={ rec.geodata } id={rec.core.id.val} />\n                    <Body rec={ rec } />\n                  </CardBody>\n                </Card>\n              </Col>\n              <Col sm=\"4\">\n                <Files files={ rec.files } baseUrl={ Database.getBaseUrl() } />\n                <RecordLinks links={ rec.links } backlinks={ rec.backlinks } />\n                <UserLinks links={ rec.manualLinks } />\n                <ExternalLinks rec={ rec.core } tb={ rec.metadata.tb_stripped } />\n              </Col>\n            </Row>\n          </div>\n        )\n    }\n  }\n\n  render() {\n    if (!this.state.rec) {\n      return <div className=\"m-5 p-5\"><Loading /></div>;\n    }\n\n    return (\n      <div className=\"mb-5\">\n        { this.renderTemplate(this.state.rec) }\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport {Bar} from 'react-chartjs-2';\n\nimport Loading from '../Loading/Loading';\n\n\nexport default class ChartView extends Component {\n\n  parseData(data){\n    let d = {\n      labels: [],\n      datasets: [{\n        label: 'My First dataset',\n        backgroundColor: 'rgba(195,31,42,0.8)',\n        borderColor: 'rgba(195,31,42,1)',\n        borderWidth: 1,\n        hoverBackgroundColor: 'rgba(195,31,42,1)',\n        hoverBorderColor: 'rgba(195,31,42,0.8)',\n        data: []\n      }]\n    }\n\n    data.forEach(row => {\n      d.labels.push(row.series_name)\n      Object.keys(row).forEach(k =>{\n        if (k !== 'series_name'){\n          d.datasets[0].data.push(row[k]);\n          d.datasets[0].label = k;\n        }\n      });\n    });\n\n    return d;\n  }\n\n  render(){\n    if (this.props.loading){\n      return <Loading>Loading chart...</Loading>;\n    }\n    if (!this.props.data){\n      return null;\n    }\n\n    const data = this.parseData(this.props.data);\n    return (\n      <div className=\"my-5\">\n        <h2>{ this.props.name }</h2>\n          <Bar data={ data }  width={100}\n          height={350}\n          options={{\n            maintainAspectRatio: false\n          }}/>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Button, Card, CardBody, ListGroup, ListGroupItem } from 'reactstrap';\n\nimport Database from '../Services/Database/Database';\nimport ChartView from './ChartView';\nimport Loading from '../Loading/Loading';\n\nexport default class ChartList extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: false,\n      data: false,\n      loading: false\n    };\n  }\n\n  loadChart(id){\n    this.setState({ loading: true });\n    Database.getChart(id, d => {\n      this.setState({ name: d.name });\n      this.setState({ data: d.data });\n      this.setState({ loading: false });\n    });\n\n  }\n\n  render(){\n    if (!this.props.charts){\n      return <Loading>Loading chart list...</Loading>;\n    }\n    if (this.props.charts.type === 'error'){\n      return (\n        <div className=\"text-danger mt-5 px-5\">Sorry! There was an error getting list of chart from the database...</div>\n      );\n    }\n    return (\n      <div className=\"mt-5\">\n        <ChartView name={this.state.name} data={this.state.data} loading={this.state.loading}/>\n        <Card>\n          <CardBody>\n            <ListGroup>\n              { this.props.charts.map( (c, i) => {\n                return (\n                  <ListGroupItem\n                    key={i}\n                    tag={Button}\n                    onClick={ () => this.loadChart(c.id) } className=\"mb-3\"\n\n                    color=\"secondary\">\n                    { c.name }\n                  </ListGroupItem>\n                );\n              } ) }\n            </ListGroup>\n          </CardBody>\n        </Card>\n\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport Database from '../Services/Database/Database';\nimport ChartList from './ChartList';\n\n\nexport default class Charts extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      chartList: false\n    };\n  }\n\n  componentDidMount(prevProps, prevState){\n    Database.getChart('all', d => {\n      this.setState({ chartList: d });\n    });\n  }\n\n\n  render(){\n    return (\n      <div className=\"container mt-5\">\n        <h1><FontAwesomeIcon icon=\"chart-bar\" /> Available charts</h1>\n        <ChartList charts={this.state.chartList} />\n      </div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/Cite.a0d89a54.md\";","import React from \"react\";\nimport './Cite.css';\n\n\nimport cite from './Cite.md';\nimport ReactMarkdownPath from '../ReactMarkdownPath/ReactMarkdownPath';\n\n\nexport default function Cite(){\n\n  return (\n    <div>\n      <div className=\"jumbotron\">\n        <div className=\"container text-center\">\n          <h1>How to cite the PAThs project as a whole and the single database records</h1>\n        </div>\n      </div>\n      <div className=\"container\">\n        <div className=\"my-5 px-5 cite\">\n          <ReactMarkdownPath path={cite} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/Api.8f01dbe1.md\";","import React from \"react\";\n\nimport ReactMarkdownPath from '../ReactMarkdownPath/ReactMarkdownPath';\nimport api from './Api.md';\n\nexport default function Api(){\n\n  return (\n    <div>\n      <div className=\"jumbotron\">\n        <div className=\"container text-center\">\n          <h1>PAThs API & Data export</h1>\n        </div>\n      </div>\n      <div className=\"container\">\n        <div className=\"my-5 px-5\">\n          <ReactMarkdownPath path={api} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\n\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { fas } from '@fortawesome/free-solid-svg-icons';\nimport { fab } from '@fortawesome/free-brands-svg-icons';\nimport { faArrowCircleRight, faBug, faEye, faExternalLinkSquareAlt, faFilter, faIdBadge, faLink, faMapMarkerAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faGithub } from '@fortawesome/free-brands-svg-icons';\n\nimport MainTemplate from './components/mainLayout/MainTemplate';\nimport Home from './components/Home/Home';\nimport BrowserNotSupported from './components/Home/BrowserNotSupported';\nimport PathsMap from './components/PathsMap/PathsMap';\n\nimport SearchSaved from './components/Search/SearchSaved';\nimport SearchSimple from './components/Search/SearchSimple';\nimport SearchAdv from './components/Search/SearchAdv';\nimport SearchShortSQL from './components/Search/SearchShortSQL';\nimport SearchAll from './components/Search/SearchAll';\n\nimport Intro from './components/Intro/Intro';\n\nimport ViewOne from './components/Record/ViewOne';\nimport Charts from './components/Charts/Charts';\nimport Cite from './components/Cite/Cite';\nimport Api from './components/Api/Api';\nimport ReactGA from 'react-ga';\nimport { detect } from 'detect-browser';\n\nconst browser = detect();\n\n\nif(window.location.href.match(/atlas\\.paths-erc\\.eu/g)){\n  ReactGA.initialize('UA-10461068-45');\n  ReactGA.pageview(window.location.pathname + window.location.search);\n}\n\nconst compatibility = {\n  'ie': 10000,\n  'opera-mini': 10000,\n  'bb10': 10000,\n  'edge': 14,\n  'firefox': 39,\n  'chrome': 42, // 42\n  'safari': 11,\n  'opera': 29,\n  'android': 67,\n}\n\nlet notSupported = false;\nif (browser){\n  const bName = browser.name;\n  const bVersion = browser.version.split('.')[0];\n\n  if ( Object.keys(compatibility).indexOf(bName) > -1 && bVersion < compatibility[bName] ) {\n    notSupported = true;\n  }\n}\n\nlibrary.add(fas, fab, faArrowCircleRight, faBug, faEye, faExternalLinkSquareAlt, faFilter, faGithub, faIdBadge, faLink, faMapMarkerAlt);\n\n\nexport default function App () {\n\n    if (notSupported){\n      return <BrowserNotSupported browser={browser} compatibility={compatibility} />\n    }\n\n    return (\n      <BrowserRouter basename=\"/\">\n        <Switch>\n          <Route path='/map/:action?/:data?' component={PathsMap}/>\n          <MainTemplate>\n            <Route exact path='/' component={ Home } />\n            <Route exact path='/:table(places|titles|works|manuscripts|authors|colophons|persons|collections)' component={Intro} />\n            <Route exact path='/:table(places|titles|works|manuscripts|authors|colophons|persons|collections)/:id' component={ViewOne} />\n\n            <Route exact path='/search/:table(places|titles|works|manuscripts|authors|colophons|persons|collections)/saved' component={SearchSaved} />\n            <Route exact path='/search/:table(places|titles|works|manuscripts|authors|colophons|persons|collections)/all' component={SearchAll} />\n            <Route exact path='/search/:table(places|titles|works|manuscripts|authors|colophons|persons|collections)/adv' component={SearchAdv} />\n            <Route exact path='/search/:table(places|titles|works|manuscripts|authors|colophons|persons|collections)/shortsql' component={SearchShortSQL} />\n            <Route exact path='/search/:table(places|titles|works|manuscripts|authors|colophons|persons|collections)' component={SearchSimple} />\n\n            <Route exact path='/charts/:id?' component={Charts} />\n            <Route exact path='/cite' component={Cite} />\n            <Route exact path='/api' component={Api} />\n\n          </MainTemplate>\n        </Switch>\n      </BrowserRouter>\n    );}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n// import registerServiceWorker from './registerServiceWorker';\nimport { unregister } from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n// registerServiceWorker();\nunregister();\n"],"sourceRoot":""}